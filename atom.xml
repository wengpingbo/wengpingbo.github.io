<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pingbo&#39;s Blog</title>
  <subtitle>A farmer in source code</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.miopeco.com/"/>
  <updated>2016-05-04T04:27:03.000Z</updated>
  <id>http://blog.miopeco.com/</id>
  
  <author>
    <name>Pingbo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>净化百度，从我做起</title>
    <link href="http://blog.miopeco.com/2016/05/04/baidu-clear/"/>
    <id>http://blog.miopeco.com/2016/05/04/baidu-clear/</id>
    <published>2016-05-04T04:19:07.000Z</published>
    <updated>2016-05-04T04:27:03.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x6700;&amp;#x8FD1; &amp;#x201C;&amp;#x9B4F;&amp;#x5219;&amp;#x897F;&amp;#x201D; &amp;#x4E8B;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8BA9;&amp;#x767E;&amp;#x5EA6;&amp;#x5927;&amp;#x5927;&amp;#x7684;&amp;#x723D;&amp;#x4E86;&amp;#x4E00;&amp;#x628A;&amp;#x3002;&amp;#x5148;&amp;#x4E0D;&amp;#x53BB;&amp;#x8BC4;&amp;#x8BBA;&amp;#x767E;&amp;#x5EA6;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9505;&amp;#x5230;&amp;#x5E95;&amp;#x80CC;&amp;#x7684;&amp;#x5BF9;&amp;#x4E0D;&amp;#x5BF9;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x80FD;&amp;#x8BA9;&amp;#x8FD9;&amp;#x4E48;&amp;#x591A;&amp;#x4EBA;&amp;#x8FCE;&amp;#x5934;&amp;#x75DB;&amp;#x6279;&amp;#xFF0C;&amp;#x62CD;&amp;#x624B;&amp;#x53EB;&amp;#x597D;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x60F3;&amp;#x8C61;&amp;#x767E;&amp;#x5EA6;&amp;#x5230;&amp;#x5E95;&amp;#x505A;&amp;#x4E86;&amp;#x591A;&amp;#x5C11;&amp;#x6076;&amp;#x3002;&amp;#x8EAB;&amp;#x5904;&amp;#x8FD9;&amp;#x6837;&amp;#x4E00;&amp;#x4E2A;&amp;#x5947;&amp;#x8469;&amp;#x7684;&amp;#x56FD;&amp;#x5EA6;&amp;#xFF0C;&amp;#x5B8C;&amp;#x5168;&amp;#x6539;&amp;#x53D8;&amp;#x73B0;&amp;#x72B6;&amp;#xFF0C;&amp;#x5F03;&amp;#x7528;&amp;#x767E;&amp;#x5EA6;&amp;#x662F;&amp;#x4E0D;&amp;#x73B0;&amp;#x5B9E;&amp;#x7684;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x600E;&amp;#x4E48;&amp;#x4E0D;&amp;#x8BA9;&amp;#x767E;&amp;#x5EA6;&amp;#x90A3;&amp;#x4E9B;&amp;#x6076;&amp;#x5FC3;&amp;#x7684;&amp;#x63A8;&amp;#x5E7F;&amp;#x94FE;&amp;#x63A5;&amp;#x5F71;&amp;#x54CD;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x5462;&amp;#xFF1F;&amp;#x4ECE;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5458;&amp;#x7684;&amp;#x89D2;&amp;#x5EA6;&amp;#x6765;&amp;#x770B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x65E0;&amp;#x6CD5;&amp;#x6539;&amp;#x5199;&amp;#x767E;&amp;#x5EA6;&amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x7AEF;&amp;#x7684;&amp;#x884C;&amp;#x4E3A;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x6539;&amp;#x53D8;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x62D2;&amp;#x7EDD;&amp;#x505A;&amp;#x5C0F;&amp;#x767D;&amp;#x7F8A;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x600E;&amp;#x4E48;&amp;#x6539;&amp;#xFF1F;&amp;#x5176;&amp;#x5B9E;&amp;#x8FD9;&amp;#x90FD;&amp;#x662F;&amp;#x8001;&amp;#x751F;&amp;#x5E38;&amp;#x8C08;&amp;#x4E86;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x666E;&amp;#x901A;&amp;#x5927;&amp;#x4F17;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x6700;&amp;#x5BB9;&amp;#x6613;&amp;#x505A;&amp;#x5230;&amp;#x7684;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5728;&amp;#x81EA;&amp;#x5DF1;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x4E0A;&amp;#x5B89;&amp;#x88C5;&amp;#x5E7F;&amp;#x544A;&amp;#x8FC7;&amp;#x6EE4;&amp;#x63D2;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BA9;&amp;#x81EA;&amp;#x5DF1;&amp;#x673A;&amp;#x5668;&amp;#x4E0A;&amp;#x7684;&amp;#x7F51;&amp;#x9875;&amp;#x53D8;&amp;#x7684;&amp;#x6E05;&amp;#x723D;&amp;#x65E0;&amp;#x6BD4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x63A8;&amp;#x8350;&amp;#x4E24;&amp;#x4E2A;&amp;#x6211;&amp;#x5E38;&amp;#x7528;&amp;#x7684; Chrome &amp;#x63D2;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F; &lt;a href=&quot;https://adblockplus.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ADBlock PLUS&lt;/a&gt;&amp;#xFF0C;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x4E2A;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EB;&amp;#x505A;&lt;a href=&quot;http://saiwei.me/?p=2032&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&amp;#x5C4F;&amp;#x853D;&amp;#x767E;&amp;#x5EA6;&amp;#x63A8;&amp;#x5E7F;&lt;/a&gt;&amp;#x3002;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x53BB; Chrome &amp;#x5546;&amp;#x5E97;&amp;#x641C;&amp;#x7D22;&amp;#x5B89;&amp;#x88C5;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x4E0B;&amp;#x8F7D;&amp;#x79BB;&amp;#x7EBF; CRX &amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x62D6;&amp;#x5165;&amp;#x5230; Chrome &amp;#x91CC;&amp;#x5B89;&amp;#x88C5;&amp;#x3002;&amp;#x5B89;&amp;#x88C5;&amp;#x5B8C;&amp;#xFF0C;&amp;#x91CD;&amp;#x65B0;&amp;#x5237;&amp;#x65B0;&amp;#x9875;&amp;#x9762;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;ADBlock PLUS &amp;#x9700;&amp;#x8981;&amp;#x53D6;&amp;#x6D88;&amp;#x201C;&amp;#x5141;&amp;#x8BB8;&amp;#x4E00;&amp;#x4E9B;&amp;#x975E;&amp;#x4FB5;&amp;#x5165;&amp;#x5F0F;&amp;#x5E7F;&amp;#x544A;&amp;#x201D;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9009;&amp;#x9879;&amp;#xFF0C;&amp;#x624D;&amp;#x80FD;&amp;#x5B8C;&amp;#x5168;&amp;#x5C4F;&amp;#x853D;&amp;#x767E;&amp;#x5EA6;&amp;#x63A8;&amp;#x5E7F;&amp;#x94FE;&amp;#x63A5;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; ADBlock PLUS &amp;#x63D2;&amp;#x4EF6;&amp;#x8BBE;&amp;#x7F6E;&amp;#x9875;&amp;#x91CC;&amp;#x52FE;&amp;#x9009;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x653E;&amp;#x4E24;&amp;#x5F20;&amp;#x6548;&amp;#x679C;&amp;#x5BF9;&amp;#x6BD4;&amp;#x56FE;&amp;#x5427;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/baidu-before.png&quot; alt=&quot;&amp;#x8FC7;&amp;#x6EE4;&amp;#x524D;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/baidu-after.png&quot; alt=&quot;&amp;#x8FC7;&amp;#x6EE4;&amp;#x540E;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x7528;&amp;#x7684;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x4E0D;&amp;#x662F; Chrome&amp;#xFF1F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x81EA;&amp;#x6551;&amp;#x5427;&amp;#x3002;&amp;#x201C;&amp;#x5C4F;&amp;#x853D;&amp;#x767E;&amp;#x5EA6;&amp;#x63A8;&amp;#x5E7F;&amp;#x94FE;&amp;#x63A5;&amp;#x201D; &amp;#x597D;&amp;#x50CF;&amp;#x6709;&amp;#x5176;&amp;#x4ED6;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x63D2;&amp;#x4EF6;&amp;#x7684;&amp;#x7248;&amp;#x672C;&amp;#x4F9B;&amp;#x4E0B;&amp;#x8F7D;&amp;#xFF0C;ADBlock PLUS &amp;#x5BF9;&amp;#x5404;&amp;#x5927;&amp;#x4E3B;&amp;#x6D41;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x90FD;&amp;#x6709;&amp;#x652F;&amp;#x6301;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5230;&amp;#x5B98;&amp;#x7F51;&amp;#x4E0A;&amp;#x770B;&amp;#x5427;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Chrome &amp;#x5546;&amp;#x5E97;&amp;#x65E0;&amp;#x6CD5;&amp;#x8BBF;&amp;#x95EE;&amp;#xFF1F;&amp;#x606D;&amp;#x559C;&amp;#x4F60;&amp;#xFF0C;&amp;#x4F60;&amp;#x88AB;&amp;#x548C;&amp;#x8C10;&amp;#x4E86;&amp;#x3002;&amp;#x600E;&amp;#x4E48;&amp;#x79D1;&amp;#x5B66;&amp;#x4E0A;&amp;#x7F51;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x7F51;&amp;#x4E0A;&amp;#x6559;&amp;#x7A0B;&amp;#x4E00;&amp;#x5927;&amp;#x628A;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x5728;&amp;#x5570;&amp;#x55E6;&amp;#x4E86;&amp;#x3002;&amp;#x4E0D;&amp;#x8FC7;&amp;#x524D;&amp;#x51E0;&amp;#x5929;&amp;#xFF0C;&amp;#x6211;&amp;#x5AB3;&amp;#x5987;&amp;#x513F;&amp;#x5435;&amp;#x7740;&amp;#x60F3;&amp;#x5230;&amp;#x5899;&amp;#x5916;&amp;#x8FB9;&amp;#x770B;&amp;#x770B;&amp;#xFF0C;&amp;#x63A8;&amp;#x8350;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A; &lt;a href=&quot;https://getlantern.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;lantern&lt;/a&gt; &amp;#x7ED9;&amp;#x5979;&amp;#xFF0C;&amp;#x8FD8;&amp;#x633A;&amp;#x597D;&amp;#x4F7F;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近 “魏则西” 事件，让百度大大的爽了一把。先不去评论百度这个锅到底背的对不对，但是能让这么多人迎头痛批，拍手叫好，可以想象百度到底做了多少恶。身处这样一个奇葩的国度，完全改变现状，弃用百度是不现实的。那么我们怎么不让百度那些恶心的推广链接影响到我们呢？从程序员的角度来看，我们无法改写百度服务器端的行为，但是我们可以改变自己的客户端，拒绝做小白羊。&lt;/p&gt;
    
    </summary>
    
      <category term="吐槽" scheme="http://blog.miopeco.com/categories/%E5%90%90%E6%A7%BD/"/>
    
    
      <category term="Baidu" scheme="http://blog.miopeco.com/tags/Baidu/"/>
    
      <category term="ADBlock" scheme="http://blog.miopeco.com/tags/ADBlock/"/>
    
      <category term="Lantern" scheme="http://blog.miopeco.com/tags/Lantern/"/>
    
  </entry>
  
  <entry>
    <title>BASH 中的空格</title>
    <link href="http://blog.miopeco.com/2015/06/10/bash_space/"/>
    <id>http://blog.miopeco.com/2015/06/10/bash_space/</id>
    <published>2015-06-09T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5927;&amp;#x90E8;&amp;#x5206; BASH &amp;#x521D;&amp;#x5B66;&amp;#x8005;&amp;#x800C;&amp;#x8A00;&amp;#xFF0C;&amp;#x5728;&amp;#x52A8;&amp;#x624B;&amp;#x5199;&amp;#x811A;&amp;#x672C;&amp;#x65F6;&amp;#xFF0C;&amp;#x9047;&amp;#x5230;&amp;#x6700;&amp;#x9891;&amp;#x7E41;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#xFF0C;&amp;#x6211;&amp;#x60F3;&amp;#xFF0C;&amp;#x5927;&amp;#x6982;&amp;#x5C31;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;msg = &amp;quot;hello world&amp;quot; # msg: command not found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;My message: $msg&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x521A;&amp;#x63A5;&amp;#x89E6; BASH &amp;#x65F6;&amp;#xFF0C;&amp;#x6211;&amp;#x4E5F;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x7EA0;&amp;#x7ED3;&amp;#x4E86;&amp;#x5F88;&amp;#x4E45;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; &lt;code&gt;=&lt;/code&gt; &amp;#x524D;&amp;#x540E;&amp;#x4E0D;&amp;#x80FD;&amp;#x6709;&amp;#x7A7A;&amp;#x683C;&amp;#xFF1F;&amp;#x4F46; google &amp;#x4E86;&amp;#x534A;&amp;#x5929;&amp;#xFF0C;&amp;#x51E0;&amp;#x4E4E;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x4EBA;&amp;#x90FD;&amp;#x53EA;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x5199;&amp;#x6CD5;&amp;#x662F; BASH &amp;#x56FA;&amp;#x6709;&amp;#x7684;&amp;#x8BED;&amp;#x6CD5;&amp;#xFF0C;&amp;#x800C;&amp;#x6CA1;&amp;#x6709;&amp;#x66F4;&amp;#x6DF1;&amp;#x4E00;&amp;#x5C42;&amp;#x53BB;&amp;#x8FFD;&amp;#x7A76;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x5C1D;&amp;#x8BD5;&amp;#x4ECE; BASH &amp;#x7684;&amp;#x8BCD;&amp;#x6CD5;&amp;#x8BBE;&amp;#x8BA1;&amp;#x4E0A;&amp;#x53BB;&amp;#x8FFD;&amp;#x5BFB;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#x7684;&amp;#x672C;&amp;#x8D28;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x6240;&amp;#x719F;&amp;#x6089;&amp;#x7684;&amp;#x8BED;&amp;#x8A00; ( c / c++ ) &amp;#x4E2D;&amp;#xFF0C;&lt;code&gt;=&lt;/code&gt; &amp;#x901A;&amp;#x5E38;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x800C;&amp;#x7A7A;&amp;#x683C;&amp;#x53EA;&amp;#x662F;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x5206;&amp;#x9694;&amp;#x7B26;&amp;#x3002;&amp;#x5F53;&amp;#x4E00;&amp;#x4E2A;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x4E2D;&amp;#x51FA;&amp;#x73B0;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x65F6;&amp;#xFF0C;&amp;#x5176;&amp;#x672C;&amp;#x8EAB;&amp;#x4E5F;&amp;#x8D77;&amp;#x5230;&amp;#x4E86;&amp;#x5206;&amp;#x9694;&amp;#x7B26;&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x524D;&amp;#x540E;&amp;#x7684;&amp;#x7A7A;&amp;#x683C;&amp;#x5C31;&amp;#x663E;&amp;#x7684;&amp;#x53EF;&amp;#x6709;&amp;#x53EF;&amp;#x65E0;&amp;#x3002;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; &lt;code&gt;int i = 1;&lt;/code&gt; &amp;#x548C; &lt;code&gt;int i=1;&lt;/code&gt; &amp;#x90FD;&amp;#x662F;&amp;#x6B63;&amp;#x786E;&amp;#x7684;&amp;#x5199;&amp;#x6CD5;&amp;#x3002;&amp;#x4F46;&amp;#x5728; BASH &amp;#x4E2D;&amp;#xFF0C;&lt;code&gt;=&lt;/code&gt; &amp;#x5374;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x3002;&amp;#x5728; &lt;a href=&quot;http://www.gnu.org/software/bash/manual/bashref.html#Definitions&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;bash manual definitions&lt;/a&gt; &amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x53EA;&amp;#x6709;&amp;#x5982;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;||, &amp;amp;&amp;amp;, &amp;amp;, ;, ;;, |, |&amp;amp;, (, ), newline, redirection operator&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E; &lt;code&gt;=&lt;/code&gt; &amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5982;&amp;#x679C;&amp;#x4E00;&amp;#x4E2A;&amp;#x8D4B;&amp;#x503C;&amp;#x8BED;&amp;#x53E5;&amp;#x4E2D;&amp;#x51FA;&amp;#x73B0;&amp;#x7A7A;&amp;#x683C;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48; BASH &amp;#x89E3;&amp;#x6790;&amp;#x65F6;&amp;#xFF0C;&amp;#x8DDF;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x9884;&amp;#x671F;&amp;#x5C31;&amp;#x5B8C;&amp;#x5168;&amp;#x4E0D;&amp;#x4E00;&amp;#x6837;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var=test #&amp;#x628A;test&amp;#x8D4B;&amp;#x503C;&amp;#x7ED9;&amp;#x53D8;&amp;#x91CF;var&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var = test #&amp;#x8FD0;&amp;#x884C;&amp;#x547D;&amp;#x4EE4;var&amp;#xFF0C;&amp;#x5176;&amp;#x53C2;&amp;#x6570;&amp;#x4E3A; = &amp;#x548C; test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var= test #&amp;#x628A;&amp;#x73AF;&amp;#x5883;&amp;#x53D8;&amp;#x91CF;var&amp;#x8BBE;&amp;#x4E3A;&amp;#x7A7A;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD0;&amp;#x884C;&amp;#x547D;&amp;#x4EE4;test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var =test #&amp;#x8FD0;&amp;#x884C;&amp;#x547D;&amp;#x4EE4;var&amp;#xFF0C;&amp;#x5176;&amp;#x53C2;&amp;#x6570;&amp;#x4E3A;=test&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136; &lt;code&gt;=&lt;/code&gt; &amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5728; BASH &amp;#x4E2D;&amp;#xFF0C;&amp;#x8D4B;&amp;#x503C;&amp;#x662F;&amp;#x600E;&amp;#x4E48;&amp;#x5B9A;&amp;#x4E49;&amp;#x5462;&amp;#xFF1F;&amp;#x5176;&amp;#x5B9E;&amp;#x5728; BASH &amp;#x8BCD;&amp;#x6CD5;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6709;&amp;#x4E13;&amp;#x95E8;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A; &lt;a href=&quot;http://code.metager.de/source/xref/gnu/bash/parse.y#348&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ASSIGNMENT_WORD&lt;/a&gt;&amp;#xFF0C;&amp;#x662F; WORD &amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&lt;code&gt;var=test&lt;/code&gt; &amp;#x5728; BASH &amp;#x4E2D;&amp;#x662F;&amp;#x88AB;&amp;#x89E3;&amp;#x6790;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BCD;&amp;#x6CD5;&amp;#x5355;&amp;#x5143;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2D;&amp;#x95F4;&amp;#x81EA;&amp;#x7136;&amp;#x4E5F;&amp;#x4E0D;&amp;#x5141;&amp;#x8BB8;&amp;#x7A7A;&amp;#x683C;&amp;#x628A;&amp;#x5B83;&amp;#x5206;&amp;#x5272;&amp;#x6210;&amp;#x591A;&amp;#x4E2A;&amp;#x8BCD;&amp;#x6CD5;&amp;#x5355;&amp;#x5143;&amp;#x3002;&amp;#x800C; &lt;code&gt;simple command&lt;/code&gt; &amp;#x4E4B;&amp;#x524D;&amp;#x653E;&amp;#x7F6E;&amp;#x53D8;&amp;#x91CF;&amp;#x8D4B;&amp;#x503C;&amp;#xFF0C;&amp;#x4E5F;&amp;#x90FD;&amp;#x662F;&amp;#x89E3;&amp;#x6790;&amp;#x4E3A; &lt;code&gt;ASSIGNMENT_WORD&lt;/code&gt;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DEBUG=1 ./your_script&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728; BASH &amp;#x4E2D;&amp;#xFF0C;&amp;#x82E5;&amp;#x6CA1;&amp;#x6709;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x5219;&amp;#x5FC5;&amp;#x987B;&amp;#x7528;&amp;#x7A7A;&amp;#x683C;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x5176;&amp;#x4ED6; &lt;code&gt;blank character&lt;/code&gt; &amp;#x6765;&amp;#x5206;&amp;#x5272;&amp;#x4E00;&amp;#x6761;&amp;#x8BED;&amp;#x53E5;&amp;#x4E2D;&amp;#x7684;&amp;#x5B57;(WORD)&amp;#x3002;&amp;#x4F46;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x770B;&amp;#x4E0A;&amp;#x53BB;&amp;#x50CF;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x53EA;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; reserved word&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x82E5;&amp;#x4E0D;&amp;#x52A0;&amp;#x7A7A;&amp;#x683C;&amp;#xFF0C;&amp;#x5219;&amp;#x4F1A;&amp;#x9020;&amp;#x6210;&amp;#x7C7B;&amp;#x4F3C;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[1 -eq 1] # wrong, [ &amp;#x662F; BASH &amp;#x5185;&amp;#x7F6E;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ 1 -eq 1 ] # right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[1 -eq 1]] # wrong, [[ &amp;#x662F; BASH &amp;#x5173;&amp;#x952E;&amp;#x5B57;&amp;#xFF0C;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[ 1 -eq 1 ]] # right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(echo this is a test) # right, ( &amp;#x548C; ) &amp;#x662F; BASH &amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{echo this is a test} # wrong, { &amp;#x662F; BASH &amp;#x5173;&amp;#x952E;&amp;#x5B57;&amp;#xFF0C;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{ echo this is a test} # wrong, } &amp;#x662F; BASH &amp;#x5173;&amp;#x952E;&amp;#x5B57;&amp;#xFF0C;&amp;#x4E0D;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{ echo this is a test;} # right, ; &amp;#x662F; BASH &amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x603B;&amp;#x7ED3;&amp;#x8D77;&amp;#x6765;&amp;#xFF0C;&amp;#x5728; BASH &amp;#x4E2D;&amp;#xFF0C;&amp;#x4E00;&amp;#x5B9A;&amp;#x8981;&amp;#x8BB0;&amp;#x4F4F;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E0D;&amp;#x662F;&amp;#x3002;&amp;#x53EA;&amp;#x6709;&amp;#x8FD9;&amp;#x6837;&amp;#xFF0C;&amp;#x624D;&amp;#x4F1A;&amp;#x77E5;&amp;#x9053;&amp;#x4EC0;&amp;#x4E48;&amp;#x65F6;&amp;#x5019;&amp;#x5FC5;&amp;#x987B;&amp;#x52A0;&amp;#x7A7A;&amp;#x683C;&amp;#xFF0C;&amp;#x4EC0;&amp;#x4E48;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x53EF;&amp;#x6709;&amp;#x53EF;&amp;#x65E0;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;对于大部分 BASH 初学者而言，在动手写脚本时，遇到最频繁的错误，我想，大概就是这样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;msg = &amp;quot;hello world&amp;quot; # msg: command not found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;My message: $msg&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在刚接触 BASH 时，我也在这个地方纠结了很久，为什么 &lt;code&gt;=&lt;/code&gt; 前后不能有空格？但 google 了半天，几乎所有的人都只是说，这种写法是 BASH 固有的语法，而没有更深一层去追究这个问题。这里，这篇文章尝试从 BASH 的词法设计上去追寻这个问题的本质。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="bash" scheme="http://blog.miopeco.com/tags/bash/"/>
    
      <category term="space" scheme="http://blog.miopeco.com/tags/space/"/>
    
      <category term="assignment word" scheme="http://blog.miopeco.com/tags/assignment-word/"/>
    
  </entry>
  
  <entry>
    <title>终端中的动画</title>
    <link href="http://blog.miopeco.com/2015/06/03/bash_print_animation/"/>
    <id>http://blog.miopeco.com/2015/06/03/bash_print_animation/</id>
    <published>2015-06-02T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;&amp;#x5370;&amp;#x8C61;&amp;#x4E2D;&amp;#xFF0C;&amp;#x597D;&amp;#x50CF;&amp;#x7EC8;&amp;#x7AEF;&amp;#x5C31;&amp;#x662F;&amp;#x9ED1;&amp;#x767D;&amp;#x754C;&amp;#x9762;&amp;#xFF0C;&amp;#x52A0;&amp;#x6241;&amp;#x5E73;&amp;#x8F93;&amp;#x51FA;&amp;#x3002;&amp;#x662F;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x4E4F;&amp;#x5473;&amp;#xFF1F;&amp;#x5176;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728; Linux/Unix &amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#x5E26;&amp;#x7684;&amp;#x7EC8;&amp;#x7AEF;&amp;#x6A21;&amp;#x62DF;&amp;#x5668;&amp;#x662F;&amp;#x652F;&amp;#x6301;&amp;#x52A8;&amp;#x753B;&amp;#x548C;&amp;#x5F69;&amp;#x8272;&amp;#x8F93;&amp;#x51FA;&amp;#x7684;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#xFF0C;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x770B;&amp;#x770B;&amp;#x5B57;&amp;#x7B26;&amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x9B45;&amp;#x529B;&amp;#xFF01;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5B9A;&amp;#x70B9;&amp;#x8F93;&amp;#x51FA;&quot;&gt;&lt;a href=&quot;#&amp;#x5B9A;&amp;#x70B9;&amp;#x8F93;&amp;#x51FA;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B9A;&amp;#x70B9;&amp;#x8F93;&amp;#x51FA;&quot;&gt;&lt;/a&gt;&amp;#x5B9A;&amp;#x70B9;&amp;#x8F93;&amp;#x51FA;&lt;/h2&gt;&lt;h3 id=&quot;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;carriage-return&quot;&gt;&lt;a href=&quot;#&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;-carriage-return&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;(carriage return)&quot;&gt;&lt;/a&gt;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;(carriage return)&lt;/h3&gt;&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4E00;&amp;#x76F4;&amp;#x4E0B;&amp;#x610F;&amp;#x8BC6;&amp;#x7684;&amp;#x4EE5;&amp;#x4E3A;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;&amp;#x548C;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x610F;&amp;#x601D;&amp;#xFF0C;&amp;#x76F8;&amp;#x4FE1;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#x4EBA;&amp;#x4E5F;&amp;#x6709;&amp;#x8FD9;&amp;#x79CD;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x4E0D;&amp;#x7136;&amp;#xFF0C;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;(\r)&amp;#x662F;&amp;#x628A;&amp;#x5149;&amp;#x6807;&amp;#x8FD4;&amp;#x56DE;&amp;#x5230;&amp;#x884C;&amp;#x9996;&amp;#xFF0C;&amp;#x800C;&amp;#x6362;&amp;#x884C;&amp;#x7B26;(\n)&amp;#x624D;&amp;#x662F;&amp;#x628A;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x5230;&amp;#x4E0B;&amp;#x4E00;&amp;#x884C;&amp;#x3002;&amp;#x5C3D;&amp;#x7BA1;&amp;#x5728; Linux &amp;#x4E2D;&amp;#xFF0C;&amp;#x662F;&amp;#x91C7;&amp;#x7528;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#x4F5C;&amp;#x4E3A;&amp;#x65B0;&amp;#x884C;&amp;#x7684;&amp;#x6807;&amp;#x8BC6;&amp;#xFF0C;&amp;#x4F46;&amp;#x7EC8;&amp;#x7AEF;&amp;#x6A21;&amp;#x62DF;&amp;#x5668;&amp;#x4E2D;&amp;#x8FD8;&amp;#x662F;&amp;#x4F1A;&amp;#x54CD;&amp;#x5E94;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26; [&lt;a href=&quot;http://en.wikipedia.org/wiki/Newline&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;1&lt;/a&gt;]&amp;#x3002;&lt;/p&gt;
&lt;p&gt;OK&amp;#xFF0C;&amp;#x5728;&amp;#x7406;&amp;#x89E3;&amp;#x4E86;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;&amp;#x548C;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#x7684;&amp;#x533A;&amp;#x522B;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8003;&amp;#x8651;&amp;#x4E00;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#xFF1A;&amp;#x5F53;&amp;#x5728;&amp;#x4E00;&amp;#x884C;&amp;#x7ED3;&amp;#x675F;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x53EA;&amp;#x8F93;&amp;#x51FA;&amp;#x56DE;&amp;#x8F66;&amp;#x7B26;&amp;#xFF0C;&amp;#x800C;&amp;#x6CA1;&amp;#x6709;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#xFF0C;&amp;#x4F1A;&amp;#x53D1;&amp;#x751F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&amp;#x7531;&amp;#x4E8E;&amp;#x6CA1;&amp;#x6709;&amp;#x6362;&amp;#x884C;&amp;#xFF0C;&amp;#x53EA;&amp;#x56DE;&amp;#x5230;&amp;#x4E86;&amp;#x884C;&amp;#x9996;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x65B0;&amp;#x6253;&amp;#x5370;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x4F1A;&amp;#x628A;&amp;#x5F53;&amp;#x524D;&amp;#x884C;&amp;#x8986;&amp;#x76D6;&amp;#x3002;&amp;#x800C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x57FA;&amp;#x4E8E;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x5728;&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&amp;#x505A;&amp;#x4E00;&amp;#x4E9B;&amp;#x5F88;&amp;#x6709;&amp;#x610F;&amp;#x601D;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x5199;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C1D;&amp;#x8BD5;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;spin=(&amp;apos;\&amp;apos; &amp;apos;|&amp;apos; &amp;apos;/&amp;apos; &amp;apos;-&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cnt=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while(true)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo -n &amp;quot;handling $((cnt++)), please wait... ${spin[$((cnt % 4))]}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo -n -e \\r&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sleep 0.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x5173;&amp;#x952E;&amp;#x5C31;&amp;#x662F; &lt;code&gt;-n&lt;/code&gt;&amp;#xFF0C;&amp;#x5F3A;&amp;#x5236; echo &amp;#x4E0D;&amp;#x8F93;&amp;#x51FA;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x52A8;csi&amp;#x7801;&quot;&gt;&lt;a href=&quot;#&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x52A8;-CSI&amp;#x7801;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x52A8;(CSI&amp;#x7801;)&quot;&gt;&lt;/a&gt;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x52A8;(CSI&amp;#x7801;)&lt;/h3&gt;&lt;p&gt;&amp;#x5355;&amp;#x7EAF;&amp;#x5728;&amp;#x540C;&amp;#x4E00;&amp;#x884C;&amp;#x505A;&amp;#x6587;&amp;#x7AE0;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x8FD8;&amp;#x65E0;&amp;#x6CD5;&amp;#x6EE1;&amp;#x8DB3;&amp;#x4E00;&amp;#x4E9B;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&amp;#x8FD9;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x91C7;&amp;#x7528; CSI &amp;#x7801;&amp;#x6765;&amp;#x624B;&amp;#x52A8;&amp;#x79FB;&amp;#x52A8;&amp;#x5149;&amp;#x6807;&amp;#x3002;CSI(private mode character) &amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x683C;&amp;#x5F0F;&amp;#x5316;&amp;#x7EC8;&amp;#x7AEF;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#x3002;&amp;#x5176;&amp;#x5E8F;&amp;#x5217;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E3A; &lt;code&gt;[ESC][ + N1; N2; ... S&lt;/code&gt;&amp;#xFF0C;&amp;#x800C; ESC &amp;#x53EF;&amp;#x4EE5;&amp;#x7528; &lt;code&gt;\e&lt;/code&gt;&amp;#xFF0C;&lt;code&gt;\033&lt;/code&gt; &amp;#x548C; &lt;code&gt;\x1B&lt;/code&gt; &amp;#x6765;&amp;#x8868;&amp;#x793A;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x63A7;&amp;#x5236;&amp;#x4E00;&amp;#x4E0B;&amp;#x8F93;&amp;#x51FA;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;echo -en &amp;apos;\e[2J\e[7;40f this is a test\e[6;38f this is another teset\n\n&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6761;&amp;#x547D;&amp;#x4EE4;&amp;#x9996;&amp;#x5148;&amp;#x7528; &lt;code&gt;\e[2J&lt;/code&gt; &amp;#x6765;&amp;#x6E05;&amp;#x5C4F;&amp;#xFF0C;&lt;code&gt;\e[7;40f&lt;/code&gt; &amp;#x628A;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x5230;&amp;#x5230; 7,40&amp;#xFF0C;&amp;#x8F93;&amp;#x51FA;&amp;#x5185;&amp;#x5BB9;&amp;#xFF0C;&amp;#x7136;&amp;#x540E; &lt;code&gt;\e[6;38f&lt;/code&gt; &amp;#x628A;&amp;#x5149;&amp;#x6807;&amp;#x79FB;&amp;#x52A8;&amp;#x5230; 6,38&amp;#xFF0C;&amp;#x518D;&amp;#x8F93;&amp;#x51FA;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x7684; CSI &amp;#x7801;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; &lt;a href=&quot;http://en.wikipedia.org/wiki/ANSI_escape_code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wiki&lt;/a&gt; &amp;#x627E;&amp;#x5230;&amp;#xFF0C;&amp;#x53D1;&amp;#x6325;&amp;#x4F60;&amp;#x7684;&amp;#x60F3;&amp;#x8C61;&amp;#x529B;&amp;#x5427;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Linux &amp;#x4E0B;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; tput &amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7EC8;&amp;#x7AEF;&amp;#x7684;&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x82E5;&amp;#x4E0D;&amp;#x60F3;&amp;#x7528; CSI &amp;#x7801;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528; tput &amp;#x4EE3;&amp;#x66FF;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x53EF;&amp;#x4EE5;&amp;#x67E5;&amp;#x770B; tput &amp;#x8054;&amp;#x673A;&amp;#x6587;&amp;#x6863;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x8272;&amp;#x5F69;&amp;#x5316;&amp;#x8F93;&amp;#x51FA;&quot;&gt;&lt;a href=&quot;#&amp;#x8272;&amp;#x5F69;&amp;#x5316;&amp;#x8F93;&amp;#x51FA;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8272;&amp;#x5F69;&amp;#x5316;&amp;#x8F93;&amp;#x51FA;&quot;&gt;&lt;/a&gt;&amp;#x8272;&amp;#x5F69;&amp;#x5316;&amp;#x8F93;&amp;#x51FA;&lt;/h2&gt;&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x8F93;&amp;#x51FA;&amp;#x4F4D;&amp;#x7F6E;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x7531;&amp;#x63A7;&amp;#x5236;&amp;#x4E86;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x53EA;&amp;#x5269;&amp;#x4E0B;&amp;#x989C;&amp;#x8272;&amp;#x4E86;&amp;#x3002;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E2D;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#x4E5F;&amp;#x662F;&amp;#x901A;&amp;#x8FC7; SGR(select graphic rendition) &amp;#x7801;&amp;#x6765;&amp;#x63A7;&amp;#x5236;&amp;#x3002;SGR &amp;#x662F; CSI &amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B50;&amp;#x96C6;&amp;#xFF0C;&amp;#x5176;&amp;#x683C;&amp;#x5F0F;&amp;#x4E3A; &lt;code&gt;CSI + N + m&lt;/code&gt;&amp;#x3002;&amp;#x5176;&amp;#x4E2D; N &amp;#x5C31;&amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x989C;&amp;#x8272;&amp;#x7684;&amp;#x3002;&amp;#x53EF;&amp;#x4EE5;&amp;#x5229;&amp;#x7528; SGR &amp;#x7801;&amp;#x6765;&amp;#x8BBE;&amp;#x5B9A;&amp;#x5B57;&amp;#x4F53;&amp;#x3001;&amp;#x52A0;&amp;#x7C97;&amp;#x3001;&amp;#x4E0B;&amp;#x5212;&amp;#x7EBF;&amp;#x3001;&amp;#x80CC;&amp;#x666F;&amp;#x8272;&amp;#x548C;&amp;#x524D;&amp;#x666F;&amp;#x8272;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x6548;&amp;#x679C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; &lt;a href=&quot;http://misc.flogisoft.com/bash/tip_colors_and_formatting&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;flogisoft&lt;/a&gt; &amp;#x67E5;&amp;#x770B;&amp;#xFF0C;&amp;#x505A;&amp;#x7684;&amp;#x5F88;&amp;#x5168;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x53EA;&amp;#x4E3E;&amp;#x4E00;&amp;#x4E9B;&amp;#x57FA;&amp;#x672C;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;echo -e &amp;apos;this is a \e[1mtest&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo -e &amp;apos;this is a \e[1;31mtest&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo -e &amp;apos;this is a \e[1;4;31mtest&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#xFF0C;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x6548;&amp;#x679C;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x53E0;&amp;#x52A0;&amp;#x7684;&amp;#x3002;&amp;#x53EA;&amp;#x9700;&amp;#x4E2D;&amp;#x95F4;&amp;#x7528;&amp;#x5206;&amp;#x53F7;&amp;#x9694;&amp;#x5F00;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x4E00;&amp;#x4E9B;&amp;#x6709;&amp;#x8DA3;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x548C;&amp;#x5DE5;&amp;#x5177;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#x4E9B;&amp;#x6709;&amp;#x8DA3;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x548C;&amp;#x5DE5;&amp;#x5177;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E00;&amp;#x4E9B;&amp;#x6709;&amp;#x8DA3;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x548C;&amp;#x5DE5;&amp;#x5177;&quot;&gt;&lt;/a&gt;&amp;#x4E00;&amp;#x4E9B;&amp;#x6709;&amp;#x8DA3;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x548C;&amp;#x5DE5;&amp;#x5177;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x5206;&amp;#x6790;&amp;#x5B8C;&amp;#x57FA;&amp;#x672C;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#x540E;&amp;#xFF0C;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x770B;&amp;#x770B;&amp;#x4E16;&amp;#x754C;&amp;#x5404;&amp;#x5730;&amp;#x86CB;&amp;#x75BC;&amp;#x7684;&amp;#x4EBA;&amp;#x505A;&amp;#x7684;&amp;#x6210;&amp;#x679C;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E0D;&amp;#x662F;&amp;#x5426;&amp;#x5B9A;&amp;#x4ED6;&amp;#x4EEC;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#xFF0C;&amp;#x4E8B;&amp;#x5B9E;&amp;#x4E0A;&amp;#xFF0C;&amp;#x6211;&amp;#x4E5F;&amp;#x662F;&amp;#x8FD9;&amp;#x7C7B;&amp;#x4EBA;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x6211;&amp;#x521A;&amp;#x5199;&amp;#x7684;&amp;#xFF0C;&amp;#x6253;&amp;#x5370;&amp;#x4E00;&amp;#x4E2A;&amp;#x5012;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x52A0;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E9B;&amp;#x989C;&amp;#x8272;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	for i in {20..1}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		echo -en &amp;quot;\e[38;5;$((RANDOM % 256))m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		# expand twice&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		eval printf \&amp;apos; %.0s\&amp;apos; {1..$((41 - i))}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		eval printf \&amp;apos;&amp;apos;#%.0s&amp;apos;\&amp;apos; {1..$((2*i -1))}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		echo -e &amp;quot;\e[0m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo -en &amp;quot;\e[20F&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sleep 0.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x5728; for &amp;#x5FAA;&amp;#x73AF;&amp;#x4E2D;&amp;#x6253;&amp;#x5370;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x7528; &lt;code&gt;\e[20F&lt;/code&gt; &amp;#x5411;&amp;#x4E0A;&amp;#x79FB;&amp;#x52A8; 20 &amp;#x884C;&amp;#xFF0C;&amp;#x518D;&amp;#x7EE7;&amp;#x7EED;&amp;#x6253;&amp;#x5370;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x3002;&amp;#x800C; &lt;code&gt;\e[38;5;$((RANDOM % 256))m&lt;/code&gt; &amp;#x4F1A;&amp;#x5728; 256 &amp;#x4E2D;&amp;#x989C;&amp;#x8272;&amp;#x4E2D;&amp;#x968F;&amp;#x673A;&amp;#x9009;&amp;#x62E9;&amp;#x4E00;&amp;#x79CD;&amp;#x989C;&amp;#x8272;&amp;#x3002;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x5177;&amp;#x4F53;&amp;#x6548;&amp;#x679C;&amp;#xFF1A;&lt;/p&gt;
&lt;iframe src=&quot;http://showterm.io/3f1083e4211e37bd25fdd&quot; width=&quot;640&quot; height=&quot;400&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x559C;&amp;#x6B22;&amp;#x300A;&amp;#x9ED1;&amp;#x5BA2;&amp;#x5E1D;&amp;#x56FD;&amp;#x300B;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B89;&amp;#x88C5; cmatrix(apt-get install cmatrix)&amp;#xFF0C;&amp;#x4F53;&amp;#x9A8C;&amp;#x4E00;&amp;#x4E0B;&amp;#x5B57;&amp;#x7B26;&amp;#x5237;&amp;#x5C4F;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x662F;&amp;#x300A;&amp;#x661F;&amp;#x7403;&amp;#x5927;&amp;#x6218;&amp;#x300B;&amp;#x7684;&amp;#x7C89;&amp;#x4E1D;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FD0;&amp;#x884C;&amp;#x4E00;&amp;#x4E0B;&amp;#x8FD9;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4; &lt;code&gt;telnet towel.blinkenlights.nl&lt;/code&gt;&amp;#xFF0C;&amp;#x4F53;&amp;#x9A8C;&amp;#x4E00;&amp;#x4E0B;&amp;#x5B57;&amp;#x7B26;&amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#x7684;&amp;#x7535;&amp;#x5F71;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x60F3;&amp;#x8981;&amp;#x9707;&amp;#x64BC;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x5B57;&amp;#x7B26;&amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#x7684;&amp;#x5206;&amp;#x5F62;&amp;#x56FE;&amp;#x50CF;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FD0;&amp;#x884C; &lt;code&gt;bb(apt-get install bb)&lt;/code&gt;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x60F3;&amp;#x628A;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x6587;&amp;#x5B57;&amp;#x53D8;&amp;#x7684;&amp;#x5F88;&amp;#x7EDA;&amp;#x4E3D;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BD5;&amp;#x4E00;&amp;#x4E0B; toilet&amp;#xFF0C;&amp;#x4F60;&amp;#x6CA1;&amp;#x770B;&amp;#x9519;&amp;#xFF0C;&amp;#x5C31;&amp;#x8FD9;&amp;#x540D;&amp;#x5B57;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;toilet -f term --gay this is a test&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在印象中，好像终端就是黑白界面，加扁平输出。是不是很乏味？其实现在 Linux/Unix 系统中带的终端模拟器是支持动画和彩色输出的。下面，一起来看看字符界面下的动画魅力！&lt;/p&gt;
&lt;h2 id=&quot;定点输出&quot;&gt;&lt;a href=&quot;#定点输出&quot; class=&quot;headerlink&quot; title=&quot;定点输出&quot;&gt;&lt;/a&gt;定点输出&lt;/h2&gt;&lt;h3 id=&quot;回车符-carriage-return&quot;&gt;&lt;a href=&quot;#回车符-carriage-return&quot; class=&quot;headerlink&quot; title=&quot;回车符(carriage return)&quot;&gt;&lt;/a&gt;回车符(carriage return)&lt;/h3&gt;&lt;p&gt;在这之前，我一直下意识的以为回车符和换行符是一个意思，相信有很多人也有这种错误的理解。其实不然，回车符(\r)是把光标返回到行首，而换行符(\n)才是把光标移到下一行。尽管在 Linux 中，是采用换行符作为新行的标识，但终端模拟器中还是会响应回车符 [&lt;a href=&quot;http://en.wikipedia.org/wiki/Newline&quot;&gt;1&lt;/a&gt;]。&lt;/p&gt;
&lt;p&gt;OK，在理解了回车符和换行符的区别后，我们考虑一种情况：当在一行结束的时候，只输出回车符，而没有换行符，会发生什么？由于没有换行，只回到了行首，所以新打印的内容会把当前行覆盖。而我们可以基于这个特性，在脚本中做一些很有意思的动画。这里我写了一个例子，可以尝试一下：&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="bash" scheme="http://blog.miopeco.com/tags/bash/"/>
    
      <category term="csi" scheme="http://blog.miopeco.com/tags/csi/"/>
    
      <category term="script animation" scheme="http://blog.miopeco.com/tags/script-animation/"/>
    
  </entry>
  
  <entry>
    <title>BASH 的目录切换</title>
    <link href="http://blog.miopeco.com/2015/06/02/bash_dirstack/"/>
    <id>http://blog.miopeco.com/2015/06/02/bash_dirstack/</id>
    <published>2015-06-01T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728; BASH &amp;#x4E2D;&amp;#x4F60;&amp;#x7528;&amp;#x7684;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&amp;#x8FD9;&amp;#x7EDD;&amp;#x5BF9;&amp;#x975E; cd &amp;#x83AB;&amp;#x5C5E;(ls &amp;#x4E5F;&amp;#x662F;&amp;#x4E2A;&amp;#x6F5C;&amp;#x529B;&amp;#x80A1;&amp;#xFF0C;&amp;#x6682;&amp;#x65F6;&amp;#x505A;&amp;#x8001;&amp;#x4E8C;&amp;#x5427;)&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x804A;&amp;#x804A;&amp;#x5982;&amp;#x4F55;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x5728; BASH &amp;#x4E2D;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5F80;&amp;#x540E;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot;&gt;&lt;a href=&quot;#&amp;#x5F80;&amp;#x540E;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5F80;&amp;#x540E;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot;&gt;&lt;/a&gt;&amp;#x5F80;&amp;#x540E;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&lt;/h2&gt;&lt;p&gt;&amp;#x56DE;&amp;#x9000;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x6B63;&amp;#x89C4;&amp;#x7684;&amp;#x505A;&amp;#x6CD5;&amp;#x662F; &lt;code&gt;cd ..&lt;/code&gt;&amp;#x3002;&amp;#x4F46;&amp;#x7F51;&amp;#x4E0A;&amp;#x7684;&amp;#x5C0F;&amp;#x4F19;&amp;#x4F34;&amp;#x5F88;&amp;#x6709;&amp;#x624D;&amp;#xFF0C;&amp;#x53D1;&amp;#x660E;&amp;#x4E86;&amp;#x66F4;&amp;#x7B80;&amp;#x6D01;&amp;#x5B9E;&amp;#x7528;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x628A;&amp;#x5B83;&amp;#x642C;&amp;#x8FC7;&amp;#x6765;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x6211;&amp;#x81EA;&amp;#x5DF1;&amp;#x4E5F;&amp;#x4E00;&amp;#x76F4;&amp;#x8FD9;&amp;#x4E48;&amp;#x7528;&amp;#x7684;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias ..=&amp;apos;cd ..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias ...=&amp;apos;cd ../..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias ....=&amp;apos;cd ../../..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x751A;&amp;#x81F3;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B9A;&amp;#x4E49;5&amp;#x70B9;&amp;#x7684;&amp;#x522B;&amp;#x540D;&amp;#xFF0C;&amp;#x4F46;&amp;#x611F;&amp;#x89C9;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x51E0;&amp;#x7387;&amp;#x4E0D;&amp;#x5927;&amp;#x3002;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E9B;&amp;#x522B;&amp;#x540D;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6109;&amp;#x5FEB;&amp;#x7684;&amp;#x7528; N &amp;#x4E2A;&amp;#x70B9;&amp;#x6765;&amp;#x56DE;&amp;#x9000; N &amp;#x7EA7;&amp;#x76EE;&amp;#x5F55;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x5B9E;&amp;#x5728;&amp;#x8FDB;&amp;#x884C;&amp;#x76EE;&amp;#x5F55;&amp;#x5207;&amp;#x6362;&amp;#x65F6;&amp;#xFF0C;BASH &amp;#x9ED8;&amp;#x8BA4;&amp;#x4F1A;&amp;#x628A;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#x8BB0;&amp;#x5F55;&amp;#x5728; OLDPWD&amp;#x3002;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528; &lt;code&gt;cd -&lt;/code&gt;&amp;#xFF0C;&amp;#x6216;&amp;#x8005; &lt;code&gt;cd $OLDPWD&lt;/code&gt; &amp;#x6765;&amp;#x5728;&amp;#x4E24;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#x4E4B;&amp;#x95F4;&amp;#x6765;&amp;#x56DE;&amp;#x5207;&amp;#x6362;&amp;#x3002;&amp;#x8FD9;&amp;#x5728;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x6811;&amp;#x4E0B;&amp;#xFF0C;&amp;#x5F88;&amp;#x6709;&amp;#x4F5C;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;&amp;#x5F80;&amp;#x524D;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot;&gt;&lt;a href=&quot;#&amp;#x5F80;&amp;#x524D;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5F80;&amp;#x524D;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&quot;&gt;&lt;/a&gt;&amp;#x5F80;&amp;#x524D;&amp;#x5207;&amp;#x6362;&amp;#x76EE;&amp;#x5F55;&lt;/h2&gt;&lt;p&gt;&amp;#x8FDB;&amp;#x5165;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6CA1;&amp;#x4EC0;&amp;#x4E48;&amp;#x7279;&amp;#x522B;&amp;#x7684;&amp;#x6280;&amp;#x5DE7;&amp;#x4E86;&amp;#x3002;&amp;#x8001;&amp;#x8001;&amp;#x5B9E;&amp;#x5B9E;&amp;#x7528; &lt;code&gt;cd /path/to/dir&lt;/code&gt; &amp;#x6765;&amp;#x505A;&amp;#x5427;&amp;#x3002;&amp;#x867D;&amp;#x7136;&amp;#x76EE;&amp;#x7684;&amp;#x5730;&amp;#x54B1;&amp;#x4E0D;&amp;#x80FD;&amp;#x7701;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x5077;&amp;#x70B9;&amp;#x61D2;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;cdpath&quot;&gt;&lt;a href=&quot;#CDPATH&quot; class=&quot;headerlink&quot; title=&quot;CDPATH&quot;&gt;&lt;/a&gt;CDPATH&lt;/h3&gt;&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5229;&amp;#x7528; CDPATH &amp;#x5B9A;&amp;#x4E49; &lt;code&gt;cd&lt;/code&gt; &amp;#x547D;&amp;#x4EE4;&amp;#x7684; base &amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x8FBE;&amp;#x76EE;&amp;#x7684;&amp;#x5730;&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x7528;&amp;#x5728;&amp;#x524D;&amp;#x9762;&amp;#x52A0;&amp;#x4E00;&amp;#x5806;&amp;#x7236;&amp;#x76EE;&amp;#x5F55;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/bash_cdpath.gif&quot; alt=&quot;bash cdpath&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0D;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x7075;&amp;#x6D3B;&amp;#xFF0C;&amp;#x4E14;&amp;#x6709;&amp;#x526F;&amp;#x4F5C;&amp;#x7528;&amp;#x3002;&amp;#x524D;&amp;#x6BB5;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x6211;&amp;#x673A;&amp;#x5668;&amp;#x4E0A;&amp;#x7F16;&amp;#x8BD1; Android&amp;#xFF0C;&amp;#x6B7B;&amp;#x6D3B;&amp;#x8FC7;&amp;#x4E0D;&amp;#x53BB;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x53D1;&amp;#x73B0;&amp;#x662F;&amp;#x8FD9;&amp;#x8D27;&amp;#x641E;&amp;#x7684;&amp;#x9B3C;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#xFF0C;&amp;#x73A9;&amp;#x73A9;&amp;#x53EF;&amp;#x4EE5;&amp;#xFF0C;&amp;#x5728;&amp;#x751F;&amp;#x4EA7;&amp;#x73AF;&amp;#x5883;&amp;#x614E;&amp;#x7528;&amp;#xFF01;&lt;/p&gt;
&lt;h3 id=&quot;cdspell&quot;&gt;&lt;a href=&quot;#CDSPELL&quot; class=&quot;headerlink&quot; title=&quot;CDSPELL&quot;&gt;&lt;/a&gt;CDSPELL&lt;/h3&gt;&lt;p&gt;&amp;#x5728; BASH &amp;#x4E2D;&amp;#x6253;&amp;#x5F00; cdspell(&lt;code&gt;shopt -s cdspell&lt;/code&gt;)&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x4F60;&amp;#x76EE;&amp;#x6807;&amp;#x76EE;&amp;#x5F55;&amp;#x5199;&amp;#x9519;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;BASH &amp;#x80FD;&amp;#x81EA;&amp;#x52A8;&amp;#x5E2E;&amp;#x4F60;&amp;#x77EB;&amp;#x6B63;&amp;#xFF0C;&amp;#x7701;&amp;#x4E86;&amp;#x91CD;&amp;#x65B0;&amp;#x6572;&amp;#x4E00;&amp;#x904D;&amp;#x3002;&amp;#x6548;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/bash_cdspell.gif&quot; alt=&quot;bash cdspell&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FD8;&amp;#x662F;&amp;#x5F88;&amp;#x6709;&amp;#x7528;&amp;#x7684;&amp;#xFF0C;&amp;#x5EFA;&amp;#x8BAE;&amp;#x6253;&amp;#x5F00;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&quot;&gt;&lt;a href=&quot;#&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&quot;&gt;&lt;/a&gt;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&lt;/h2&gt;&lt;p&gt;&amp;#x524D;&amp;#x9762;&amp;#x8BB2;&amp;#x7684;&amp;#x5927;&amp;#x591A;&amp;#x6570;&amp;#x662F;&amp;#x4E24;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x5207;&amp;#x6362;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7528;&amp;#x4E00;&amp;#x4E2A;&amp;#x53D8;&amp;#x91CF; OLDPWD &amp;#x6765;&amp;#x8BB0;&amp;#x5F55;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;&amp;#x591A;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BB0;&amp;#x5F55;&amp;#x4E4B;&amp;#x524D;&amp;#x76EE;&amp;#x5F55;&amp;#x5207;&amp;#x6362;&amp;#x7684;&amp;#x5386;&amp;#x53F2;&amp;#x8BB0;&amp;#x5F55;&amp;#xFF0C;&amp;#x5C31;&amp;#x5F97;&amp;#x53E6;&amp;#x8D77;&amp;#x4E00;&amp;#x5957;&amp;#x673A;&amp;#x5236;&amp;#x4E86;&amp;#x3002;&amp;#x800C; BASH &amp;#x5C31;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x8FD9;&amp;#x6837;&amp;#x4E00;&amp;#x5957;&amp;#x673A;&amp;#x5236; - &amp;#x201C;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;(dirs/pushd/popd)&amp;#x201D;&amp;#x3002;&amp;#x5176;&amp;#x8FD0;&amp;#x884C;&amp;#x673A;&amp;#x5236;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5806;&amp;#x6808;&amp;#xFF0C;&amp;#x5148;&amp;#x8FDB;&amp;#x5148;&amp;#x51FA;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528; &lt;code&gt;pushd dir&lt;/code&gt; &amp;#x6765; push &amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x8DEF;&amp;#x5F84;&amp;#xFF0C;&amp;#x7528; &lt;code&gt;popd&lt;/code&gt; &amp;#x6765;&amp;#x5F39;&amp;#x51FA;&amp;#x6808;&amp;#x9876;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x7528; &lt;code&gt;dirs&lt;/code&gt; &amp;#x53EF;&amp;#x4EE5;&amp;#x67E5;&amp;#x770B;&amp;#x5F53;&amp;#x524D;&amp;#x5806;&amp;#x6808;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5806;&amp;#x6808;&amp;#xFF0C;&amp;#x5728;&amp;#x5404;&amp;#x4E2A; BASH &amp;#x5B9E;&amp;#x4F8B;&amp;#x4E4B;&amp;#x95F4;&amp;#x662F;&amp;#x4E0D;&amp;#x901A;&amp;#x7528;&amp;#x7684;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x5728;&amp;#x5F53;&amp;#x524D; BASH &amp;#x4E2D; push &amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x4E0D;&amp;#x4F1A;&amp;#x5F71;&amp;#x54CD;&amp;#x5176;&amp;#x4ED6; BASH&amp;#x3002;&amp;#x6BCF;&amp;#x5F00;&amp;#x4E00;&amp;#x4E2A; BASH&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x5806;&amp;#x6808;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x5728;&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&amp;#x9700;&amp;#x8981;&amp;#x4E34;&amp;#x65F6;&amp;#x4FDD;&amp;#x5B58;&amp;#x5F53;&amp;#x524D;&amp;#x5DE5;&amp;#x4F5C;&amp;#x8DEF;&amp;#x5F84;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4FBF;&amp;#x56DE;&amp;#x6EAF;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5229;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6A21;&amp;#x62DF;-windows-explorer-icd&quot;&gt;&lt;a href=&quot;#&amp;#x6A21;&amp;#x62DF;-Windows-Explorer-icd&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6A21;&amp;#x62DF; Windows Explorer (icd)&quot;&gt;&lt;/a&gt;&amp;#x6A21;&amp;#x62DF; Windows Explorer (icd)&lt;/h2&gt;&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4E00;&amp;#x76F4;&amp;#x7EA0;&amp;#x7ED3;&amp;#x5728;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; BASH &amp;#x53EA;&amp;#x80FD;&amp;#x8BB0;&amp;#x5F55;&amp;#x4E24;&amp;#x5C42;&amp;#x76EE;&amp;#x5F55;&amp;#x3002;&amp;#x5F53;&amp;#x4F60;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x76EE;&amp;#x5F55;&amp;#x5C42;&amp;#x6570;&amp;#x6BD4;&amp;#x8F83;&amp;#x591A;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4F60;&amp;#x7ECF;&amp;#x5E38;&amp;#x9700;&amp;#x8981;&amp;#x591A;&amp;#x6B21; &lt;code&gt;cd ..&lt;/code&gt; &amp;#x6765;&amp;#x628A;&amp;#x5DE5;&amp;#x4F5C;&amp;#x76EE;&amp;#x5F55;&amp;#x56DE;&amp;#x9000; A &amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x53C8;&amp;#x8981;&amp;#x8FDB;&amp;#x5165; B &amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x518D;&amp;#x8FDB;&amp;#x5165; C &amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x8FD8;&amp;#x8981;&amp;#x56DE;&amp;#x5230; A &amp;#x76EE;&amp;#x5F55;&amp;#x3002;&amp;#x5C3D;&amp;#x7BA1;&amp;#x524D;&amp;#x9762;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5077;&amp;#x4E86;&amp;#x5F88;&amp;#x591A;&amp;#x61D2;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x663E;&amp;#x5F97;&amp;#x5F88;&amp;#x7E41;&amp;#x7410;&amp;#x3002;&amp;#x800C;&amp;#x6211;&amp;#x7684;&amp;#x60F3;&amp;#x6CD5;&amp;#x662F;&amp;#x628A; Windows &amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x4E2D;&amp;#x524D;&amp;#x8FDB;&amp;#x548C;&amp;#x540E;&amp;#x9000;&amp;#x529F;&amp;#x80FD;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230; BASH &amp;#x4E2D;&amp;#xFF0C;&amp;#x5C31;&amp;#x50CF; nautilus &amp;#x548C; &amp;#x5404;&amp;#x5927;&amp;#x6D4F;&amp;#x89C8;&amp;#x5668;&amp;#x505A;&amp;#x7684;&amp;#x90A3;&amp;#x6837;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x5B9E;&amp;#x73B0;&amp;#x8FD9;&amp;#x79CD;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x5F97;&amp;#x8BB0;&amp;#x5F55;&amp;#x6BCF;&amp;#x6B21;&amp;#x8FDB;&amp;#x5165;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x8DEF;&amp;#x5F84;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A; BASH &amp;#x81EA;&amp;#x5E26;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x5806;&amp;#x6808;&amp;#x53EF;&amp;#x4EE5;&amp;#x505A;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F; BASH &amp;#x5728; popd &amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5C31;&amp;#x628A;&amp;#x6808;&amp;#x9876;&amp;#x7684;&amp;#x8DEF;&amp;#x5F84;&amp;#x5220;&amp;#x9664;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x5BFC;&amp;#x81F4;&amp;#x540E;&amp;#x9000;&amp;#x540E;&amp;#xFF0C;&amp;#x65E0;&amp;#x6CD5;&amp;#x518D;&amp;#x524D;&amp;#x8FDB;&amp;#x4E86;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5F97;&amp;#x989D;&amp;#x5916;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x5957;&amp;#x673A;&amp;#x5236;&amp;#x6765;&amp;#x4FDD;&amp;#x5B58;&amp;#x76EE;&amp;#x5F55;&amp;#x8BB0;&amp;#x5F55;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x7528;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x6765;&amp;#x5B58;&amp;#x653E;&amp;#xFF0C;&amp;#x6587;&amp;#x4EF6;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x884C;&amp;#x662F;&amp;#x8BB0;&amp;#x5F55;&amp;#x7684;&amp;#x8DEF;&amp;#x5F84;&amp;#x603B;&amp;#x6570;&amp;#xFF0C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x884C;&amp;#x662F;&amp;#x5F53;&amp;#x524D;&amp;#x6240;&amp;#x5728;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x800C;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x7684;&amp;#x6BCF;&amp;#x4E00;&amp;#x884C;&amp;#x5C31;&amp;#x4EE3;&amp;#x8868;&amp;#x4E00;&amp;#x6761;&amp;#x76EE;&amp;#x5F55;&amp;#x8BB0;&amp;#x5F55;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/home&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/home/wenpingbo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/var/log&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#xFF0C;&amp;#x540E;&amp;#x9000;&amp;#x53EF;&amp;#x4EE5;&amp;#x5230; &lt;code&gt;/home&lt;/code&gt;&amp;#xFF0C;&amp;#x524D;&amp;#x8FDB;&amp;#x53EF;&amp;#x4EE5;&amp;#x5230; &lt;code&gt;/var/log&lt;/code&gt;&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x4FDD;&amp;#x8BC1;&amp;#x5404;&amp;#x4E2A; BASH &amp;#x4E4B;&amp;#x95F4;&amp;#x4E92;&amp;#x4E0D;&amp;#x5E72;&amp;#x6270;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5F97;&amp;#x5F15;&amp;#x5165; session &amp;#x8FD9;&amp;#x4E2A;&amp;#x6982;&amp;#x5FF5;&amp;#x3002;&amp;#x8FD8;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x4E3A;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A; BASH &amp;#x521B;&amp;#x5EFA;&amp;#x8FD9;&amp;#x6837;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x653E;&amp;#x5728; &lt;code&gt;/tmp&lt;/code&gt; &amp;#x4E0B;&amp;#xFF0C;&amp;#x6587;&amp;#x4EF6;&amp;#x540D;&amp;#x5C31;&amp;#x4EE5; BASHPID &amp;#x4E3A;&amp;#x540E;&amp;#x7F00;&amp;#xFF0C;&amp;#x907F;&amp;#x514D;&amp;#x91CD;&amp;#x540D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x903B;&amp;#x8F91;&amp;#x4E0A;&amp;#xFF0C;&amp;#x5F97;&amp;#x5B9E;&amp;#x73B0; 3 &amp;#x4E2A;&amp;#x51FD;&amp;#x6570; &lt;code&gt;icd_main&lt;/code&gt;&amp;#xFF0C;&lt;code&gt;icd_backward&lt;/code&gt; &amp;#x548C; &lt;code&gt;icd_forward&lt;/code&gt;&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x8FDB;&amp;#x5165;&amp;#x65B0;&amp;#x76EE;&amp;#x5F55;&amp;#x3001;&amp;#x540E;&amp;#x9000;&amp;#x3001;&amp;#x524D;&amp;#x8FDB;&amp;#x3002;&amp;#x7136;&amp;#x540E;&amp;#x5B9A;&amp;#x4E49;&amp;#x5FEB;&amp;#x6377;&amp;#x952E;&amp;#x7ED1;&amp;#x5B9A;&amp;#x5230;&amp;#x8FD9; 3 &amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&amp;#x6211;&amp;#x81EA;&amp;#x5DF1;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x7ED1;&amp;#x5B9A;&amp;#x7684;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias cd=icd_main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias h=icd_backward&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias l=icd_forward&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Ctrl + right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bind &amp;apos;&amp;quot;\e[1;5D&amp;quot;:&amp;quot;h\n&amp;quot;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Ctrl + left&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bind &amp;apos;&amp;quot;\e[1;5C&amp;quot;:&amp;quot;l\n&amp;quot;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528; &lt;code&gt;h&lt;/code&gt; / &lt;code&gt;Ctrl-right&lt;/code&gt; &amp;#x6765;&amp;#x56DE;&amp;#x9000;&amp;#xFF0C;&lt;code&gt;l&lt;/code&gt; / &lt;code&gt;Ctrl-left&lt;/code&gt; &amp;#x6765;&amp;#x524D;&amp;#x8FDB;&amp;#xFF0C;&lt;code&gt;cd&lt;/code&gt; &amp;#x6765;&amp;#x505A;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x6539;&amp;#x53D8;&amp;#x3002;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x6548;&amp;#x679C;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/bash_icd.gif&quot; alt=&quot;icd&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x8FD9;&amp;#x627E;&amp;#x5230; &lt;a href=&quot;https://github.com/wengpingbo/ilinux/blob/master/.icd.conf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;icd src&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在 BASH 中你用的最多的命令是什么？这绝对非 cd 莫属(ls 也是个潜力股，暂时做老二吧)。所以在这篇文章中，我们聊聊如何高效的在 BASH 中切换目录。&lt;/p&gt;
&lt;h2 id=&quot;往后切换目录&quot;&gt;&lt;a href=&quot;#往后切换目录&quot; class=&quot;headerlink&quot; title=&quot;往后切换目录&quot;&gt;&lt;/a&gt;往后切换目录&lt;/h2&gt;&lt;p&gt;回退目录，正规的做法是 &lt;code&gt;cd ..&lt;/code&gt;。但网上的小伙伴很有才，发明了更简洁实用的命令。这里把它搬过来，其实我自己也一直这么用的：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias ..=&amp;apos;cd ..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias ...=&amp;apos;cd ../..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;alias ....=&amp;apos;cd ../../..&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;甚至可以定义5点的别名，但感觉用到的几率不大。有了这些别名，就可以愉快的用 N 个点来回退 N 级目录。&lt;/p&gt;
&lt;p&gt;其实在进行目录切换时，BASH 默认会把上一个目录记录在 OLDPWD。可以用 &lt;code&gt;cd -&lt;/code&gt;，或者 &lt;code&gt;cd $OLDPWD&lt;/code&gt; 来在两个目录之间来回切换。这在两个不同的目录树下，很有作用。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="bash" scheme="http://blog.miopeco.com/tags/bash/"/>
    
      <category term="dirstack" scheme="http://blog.miopeco.com/tags/dirstack/"/>
    
      <category term="popd" scheme="http://blog.miopeco.com/tags/popd/"/>
    
      <category term="pushd" scheme="http://blog.miopeco.com/tags/pushd/"/>
    
      <category term="icd" scheme="http://blog.miopeco.com/tags/icd/"/>
    
  </entry>
  
  <entry>
    <title>BASH 的调试手段</title>
    <link href="http://blog.miopeco.com/2015/06/01/bash_debug/"/>
    <id>http://blog.miopeco.com/2015/06/01/bash_debug/</id>
    <published>2015-05-31T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5E73;&amp;#x65F6;&amp;#x5728;&amp;#x5199; BASH &amp;#x811A;&amp;#x672C;&amp;#x65F6;&amp;#xFF0C;&amp;#x603B;&amp;#x662F;&amp;#x4F1A;&amp;#x78B0;&amp;#x5230;&amp;#x8BA9;&amp;#x4EBA;&amp;#x6293;&amp;#x72C2;&amp;#x7684; BUG&amp;#x3002;&amp;#x548C; C/C++ &amp;#x8FD9;&amp;#x4E48;&amp;#x4E30;&amp;#x5BCC;&amp;#x7684;&amp;#x8C03;&amp;#x8BD5;&amp;#x5DE5;&amp;#x5177;&amp;#x76F8;&amp;#x6BD4;&amp;#xFF0C;BASH &amp;#x53C8;&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x8C03;&amp;#x8BD5;&amp;#x624B;&amp;#x6BB5;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;h2 id=&quot;echoprint-&amp;#x666E;&amp;#x901A;&amp;#x6280;&quot;&gt;&lt;a href=&quot;#echo-print-&amp;#x666E;&amp;#x901A;&amp;#x6280;&quot; class=&quot;headerlink&quot; title=&quot;echo/print (&amp;#x666E;&amp;#x901A;&amp;#x6280;)&quot;&gt;&lt;/a&gt;echo/print (&amp;#x666E;&amp;#x901A;&amp;#x6280;)&lt;/h2&gt;&lt;p&gt;&amp;#x6253;&amp;#x5370;&amp;#x4E00;&amp;#x4E9B;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x63D0;&amp;#x793A;&amp;#x4FE1;&amp;#x606F;&amp;#x3002;&amp;#x8FD9;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x901A;&amp;#x7528;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E86;&amp;#x3002;&amp;#x5728; BASH &amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7528; echo&amp;#xFF0C;&amp;#x6216;&amp;#x8005; print &amp;#x6765;&amp;#x8F93;&amp;#x51FA;&amp;#x4E00;&amp;#x4E9B; log&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x52A0;&amp;#x4E00;&amp;#x4E9B; loglevel &amp;#x6765;&amp;#x8FC7;&amp;#x6EE4;&amp;#x4E00;&amp;#x4E9B; log&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x8D34;&amp;#x4E00;&amp;#x4E0B;&amp;#x6211;&amp;#x5E73;&amp;#x5E38;&amp;#x7528;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_loglevel=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DIE() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;Critical: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INFO() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $_loglevel -ge 2 ] &amp;amp;&amp;amp; echo &amp;quot;INFO: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $_loglevel -ge 1 ] &amp;amp;&amp;amp; echo &amp;quot;ERROR: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x53EA;&amp;#x662F;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x52A0;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A; loglevel&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A; log &amp;#x8F93;&amp;#x51FA;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x7ED9; log &amp;#x52A0;&amp;#x4E0A;&amp;#x989C;&amp;#x8272;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# add color&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ $_loglevel -ge 1 ] &amp;amp;&amp;amp; echo -e &amp;quot;\033[31m ERROR:\033[0m $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# redirect to file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ $_loglevel -ge 1 ] &amp;amp;&amp;amp; echo &amp;quot;ERROR: $1&amp;quot; &amp;gt; /var/log/xxx_log.$BASHPID&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;set-x-&amp;#x7A00;&amp;#x6709;&amp;#x6280;&quot;&gt;&lt;a href=&quot;#set-x-&amp;#x7A00;&amp;#x6709;&amp;#x6280;&quot; class=&quot;headerlink&quot; title=&quot;set -x (&amp;#x7A00;&amp;#x6709;&amp;#x6280;)&quot;&gt;&lt;/a&gt;set -x (&amp;#x7A00;&amp;#x6709;&amp;#x6280;)&lt;/h2&gt;&lt;p&gt;-x(xtrace) &amp;#x9009;&amp;#x9879;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4; BASH &amp;#x5728;&amp;#x6267;&amp;#x884C;&amp;#x547D;&amp;#x4EE4;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x5148;&amp;#x628A;&amp;#x8981;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9009;&amp;#x9879;&amp;#x5BF9;&amp;#x8C03;&amp;#x8BD5;&amp;#x4E00;&amp;#x4E9B;&amp;#x547D;&amp;#x4EE4;&amp;#x9519;&amp;#x8BEF;&amp;#x5F88;&amp;#x6709;&amp;#x5E2E;&amp;#x52A9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;&amp;#x4F20;&amp;#x8FDB;&amp;#x6765;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x5E26;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x7279;&amp;#x6B8A;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x5BFC;&amp;#x81F4; BASH &amp;#x89E3;&amp;#x6790;&amp;#x65F6;&amp;#x4E0D;&amp;#x662F;&amp;#x6309;&amp;#x7167;&amp;#x6211;&amp;#x4EEC;&amp;#x9884;&amp;#x60F3;&amp;#x7684;&amp;#x8FDB;&amp;#x884C;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x628A; -x &amp;#x6253;&amp;#x5F00;&amp;#xFF0C;&amp;#x5C31;&amp;#x80FD;&amp;#x5728;&amp;#x547D;&amp;#x4EE4;&amp;#x6267;&amp;#x884C;&amp;#x524D;&amp;#xFF0C;&amp;#x628A;&amp;#x6269;&amp;#x5C55;&amp;#x540E;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x57FA;&amp;#x4E8E;&amp;#x524D;&amp;#x9762;&amp;#x5199;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set -x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INFO &amp;quot;this is a info log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR &amp;quot;this is a error log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;set +x&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#x5982;&amp;#x4E0B;&amp;#x8F93;&amp;#x51FA;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ INFO &amp;apos;this is a info log&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &amp;apos;[&amp;apos; 2 -ge 2 &amp;apos;]&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ echo -e &amp;apos;\033[32m INFO:\033[0m this is a info log&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; INFO: this is a info log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ ERROR &amp;apos;this is a error log&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &amp;apos;[&amp;apos; 2 -ge 1 &amp;apos;]&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ echo -e &amp;apos;\033[33m ERR:\033[0m this is a error log&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ERR: this is a error log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ set +x&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x60F3;&amp;#x5168;&amp;#x7A0B;&amp;#x6253;&amp;#x5F00; xtrace&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x6267;&amp;#x884C;&amp;#x811A;&amp;#x672C;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x52A0; &lt;code&gt;-x&lt;/code&gt; &amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;trapbashdb-&amp;#x53F2;&amp;#x8BD7;&amp;#x6280;&quot;&gt;&lt;a href=&quot;#trap-bashdb-&amp;#x53F2;&amp;#x8BD7;&amp;#x6280;&quot; class=&quot;headerlink&quot; title=&quot;trap/bashdb (&amp;#x53F2;&amp;#x8BD7;&amp;#x6280;)&quot;&gt;&lt;/a&gt;trap/bashdb (&amp;#x53F2;&amp;#x8BD7;&amp;#x6280;)&lt;/h2&gt;&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x65B9;&amp;#x4FBF;&amp;#x8C03;&amp;#x8BD5;&amp;#xFF0C;BASH &amp;#x4E5F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x9677;&amp;#x9631;&amp;#x673A;&amp;#x5236;&amp;#x3002;&amp;#x8FD9;&amp;#x8DDF;&amp;#x4E4B;&amp;#x524D;&amp;#x4ECB;&amp;#x7ECD;&amp;#x7684;&amp;#x4E24;&amp;#x79CD;&amp;#x65B9;&amp;#x6CD5;&amp;#x9AD8;&amp;#x7EA7;&amp;#x4E0D;&amp;#x5C11;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5229;&amp;#x7528; trap &amp;#x8FD9;&amp;#x4E2A;&amp;#x5185;&amp;#x7F6E;&amp;#x547D;&amp;#x4EE4;&amp;#x6765;&amp;#x6307;&amp;#x5B9A;&amp;#x5404;&amp;#x4E2A; sigspec &amp;#x5E94;&amp;#x8BE5;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x3002;trap &amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x7528;&amp;#x6CD5;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;trap [-lp] [[arg] sigspec ...]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;sigspec &amp;#x5305;&amp;#x62EC; &lt;code&gt;&amp;lt;signal.h&amp;gt;&lt;/code&gt; &amp;#x4E2D;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x5404;&amp;#x4E2A; signal&amp;#xFF0C; EXIT&amp;#xFF0C;ERR&amp;#xFF0C;RETURN &amp;#x548C; DEBUG&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5404;&amp;#x4E2A; signal &amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x4ECB;&amp;#x7ECD;&amp;#x4E86;&amp;#x3002;EXIT &amp;#x4F1A;&amp;#x5728; shell &amp;#x9000;&amp;#x51FA;&amp;#x65F6;&amp;#x6267;&amp;#x884C;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x3002;&amp;#x82E5;&amp;#x5F53;&amp;#x524D; shell &amp;#x4E2D;&amp;#x6709;&amp;#x547D;&amp;#x4EE4;&amp;#x6267;&amp;#x884C;&amp;#x8FD4;&amp;#x56DE;&amp;#x975E;&amp;#x96F6;&amp;#x503C;&amp;#xFF0C;&amp;#x5219;&amp;#x4F1A;&amp;#x6267;&amp;#x884C;&amp;#x4E0E; ERR &amp;#x76F8;&amp;#x5173;&amp;#x8054;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x3002;&amp;#x800C; RETURN &amp;#x662F;&amp;#x9488;&amp;#x5BF9; &lt;code&gt;source&lt;/code&gt; &amp;#x548C; &lt;code&gt;.&lt;/code&gt; &amp;#xFF0C;&amp;#x6BCF;&amp;#x6B21;&amp;#x6267;&amp;#x884C;&amp;#x90FD;&amp;#x4F1A;&amp;#x89E6;&amp;#x53D1; RETURN &amp;#x9677;&amp;#x9631;&amp;#x3002;&amp;#x82E5;&amp;#x7ED1;&amp;#x5B9A;&amp;#x4E00;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x5230; DEBUG&amp;#xFF0C;&amp;#x5219;&amp;#x4F1A;&amp;#x5728;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x6267;&amp;#x884C;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x5148;&amp;#x6267;&amp;#x884C; DEBUG &amp;#x8FD9;&amp;#x4E2A; trap&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;ERR &amp;#x548C; DEBUG &amp;#x53EA;&amp;#x5728;&amp;#x5F53;&amp;#x524D; shell &amp;#x6709;&amp;#x6548;&amp;#x3002;&amp;#x82E5;&amp;#x60F3;&amp;#x51FD;&amp;#x6570;&amp;#x548C;&amp;#x5B50; shell &amp;#x81EA;&amp;#x52A8;&amp;#x7EE7;&amp;#x627F;&amp;#x8FD9;&amp;#x4E9B; trap&amp;#xFF0C;&amp;#x5219;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BBE;&amp;#x7F6E; -T(DEBUG/RETURN) &amp;#x548C; -E(ERR)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6BD4;&amp;#x5982;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x4F1A;&amp;#x5728;&amp;#x9000;&amp;#x51FA;&amp;#x65F6;&amp;#xFF0C;&amp;#x6267;&amp;#x884C;echo&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;trap &amp;quot;echo this is a exit echo&amp;quot; EXIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;this is a normal echo&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6216;&amp;#x8005;&amp;#xFF0C;&amp;#x8BA9;&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&amp;#x547D;&amp;#x4EE4;&amp;#x51FA;&amp;#x9519;&amp;#x65F6;&amp;#xFF0C;&amp;#x628A;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;trap &amp;apos;echo $BASH_COMMAND return err&amp;apos; ERR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo this is a normal test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UnknownCmd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;this is a normal test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tt.sh: line 6: UnknownCmd: command not found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UnknownCmd return err&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EA6;&amp;#x6216;&amp;#x8005;&amp;#xFF0C;&amp;#x8BA9;&amp;#x811A;&amp;#x672C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5355;&amp;#x6B65;&amp;#x6267;&amp;#x884C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;trap &amp;apos;(read -p &amp;quot;[$0 : $LINENO] $BASH_COMMAND ?&amp;quot;)&amp;apos; DEBUG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo this is a test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while [ true ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo $i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ((i++))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x8F93;&amp;#x51FA;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 5] echo this is a test ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;this is a test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 7] i=0 ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 8] [ true ] ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 10] echo $i ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 11] ((i++)) ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 8] [ true ] ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 10] echo $i ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 11] ((i++)) ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 8] [ true ] ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 10] echo $i ?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[tt.sh : 11] ((i++)) ?&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x662F;&amp;#x4E0D;&amp;#x662F;&amp;#x6709;&amp;#x70B9;&amp;#x610F;&amp;#x601D;&amp;#x4E86;&amp;#xFF1F;&amp;#x5176;&amp;#x5B9E;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; &lt;a href=&quot;http://bashdb.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;bashdb&lt;/a&gt; &amp;#x7684;&amp;#x5F00;&amp;#x6E90;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x5229;&amp;#x7528; trap &amp;#x673A;&amp;#x5236;&amp;#xFF0C;&amp;#x6A21;&amp;#x62DF; gdb &amp;#x505A;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A; bash &amp;#x811A;&amp;#x672C;&amp;#x7684;&amp;#x8C03;&amp;#x8BD5;&amp;#x5668;&amp;#x3002;&amp;#x5B83;&amp;#x672C;&amp;#x8EAB;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; bash &amp;#x811A;&amp;#x672C;&amp;#x3002;&amp;#x5728;&amp;#x52A0;&amp;#x8F7D;&amp;#x8981;&amp;#x8C03;&amp;#x8BD5;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x540E;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x548C; gdb &amp;#x7C7B;&amp;#x4F3C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x751A;&amp;#x81F3;&amp;#x7F29;&amp;#x5199;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x5927;&amp;#x5BB6;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C1D;&amp;#x8BD5;&amp;#x4E00;&amp;#x4E0B;:)&lt;/p&gt;
&lt;p&gt;(&amp;#x4E0A;&amp;#x4E2A;&amp;#x6708;&amp;#x6C89;&amp;#x8FF7;&amp;#x4E8E; Diablo3&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x53D1;&amp;#x73B0;&amp;#x81EA;&amp;#x5DF1;&amp;#x8138;&amp;#x4E0D;&amp;#x884C;&amp;#xFF0C;&amp;#x60B4;&amp;#xFF01;&amp;#x8FD8;&amp;#x662F;&amp;#x56DE;&amp;#x6765;&amp;#x5199;&amp;#x70B9;&amp;#x4E1C;&amp;#x897F;&amp;#x5427;&amp;#xFF01;)&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;平时在写 BASH 脚本时，总是会碰到让人抓狂的 BUG。和 C/C++ 这么丰富的调试工具相比，BASH 又有什么调试手段呢？&lt;/p&gt;
&lt;h2 id=&quot;echo-print-普通技&quot;&gt;&lt;a href=&quot;#echo-print-普通技&quot; class=&quot;headerlink&quot; title=&quot;echo/print (普通技)&quot;&gt;&lt;/a&gt;echo/print (普通技)&lt;/h2&gt;&lt;p&gt;打印一些变量，或者提示信息。这应该是一个通用的方法了。在 BASH 里，我们可以简单的用 echo，或者 print 来输出一些 log，或者加一些 loglevel 来过滤一些 log。这里贴一下我平常用的函数：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_loglevel=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DIE() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;Critical: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INFO() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $_loglevel -ge 2 ] &amp;amp;&amp;amp; echo &amp;quot;INFO: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $_loglevel -ge 1 ] &amp;amp;&amp;amp; echo &amp;quot;ERROR: $1&amp;quot; &amp;gt;&amp;amp;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="bash" scheme="http://blog.miopeco.com/tags/bash/"/>
    
      <category term="debug" scheme="http://blog.miopeco.com/tags/debug/"/>
    
      <category term="bashdb" scheme="http://blog.miopeco.com/tags/bashdb/"/>
    
  </entry>
  
  <entry>
    <title>Linux Kernel 中的 Regmap</title>
    <link href="http://blog.miopeco.com/2015/03/23/linux_kernel_regmap/"/>
    <id>http://blog.miopeco.com/2015/03/23/linux_kernel_regmap/</id>
    <published>2015-03-22T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;/a&gt;&amp;#x7B80;&amp;#x4ECB;&lt;/h2&gt;&lt;p&gt;Regmap &amp;#x673A;&amp;#x5236;&amp;#x662F;&amp;#x5728; Linux 3.1 &amp;#x52A0;&amp;#x5165;&amp;#x8FDB;&amp;#x6765;&amp;#x7684;&amp;#x7279;&amp;#x6027;&amp;#x3002;&amp;#x4E3B;&amp;#x8981;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x51CF;&amp;#x5C11;&amp;#x6162;&amp;#x901F; I/O &amp;#x9A71;&amp;#x52A8;&amp;#x4E0A;&amp;#x7684;&amp;#x91CD;&amp;#x590D;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x901A;&amp;#x7528;&amp;#x7684;&amp;#x63A5;&amp;#x53E3;&amp;#x6765;&amp;#x64CD;&amp;#x4F5C;&amp;#x5E95;&amp;#x5C42;&amp;#x786C;&amp;#x4EF6;&amp;#x4E0A;&amp;#x7684;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;&amp;#x5185;&amp;#x6838;&amp;#x505A;&amp;#x7684;&amp;#x4E00;&amp;#x6B21;&amp;#x91CD;&amp;#x6784;&amp;#x3002;Regmap &amp;#x9664;&amp;#x4E86;&amp;#x80FD;&amp;#x505A;&amp;#x5230;&amp;#x7EDF;&amp;#x4E00;&amp;#x7684; I/O &amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x9A71;&amp;#x52A8;&amp;#x548C;&amp;#x786C;&amp;#x4EF6; IC &amp;#x4E4B;&amp;#x95F4;&amp;#x505A;&amp;#x4E00;&amp;#x5C42;&amp;#x7F13;&amp;#x5B58;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x80FD;&amp;#x51CF;&amp;#x5C11;&amp;#x5E95;&amp;#x5C42; I/O &amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x6B21;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x4F7F;&amp;#x7528;&amp;#x5BF9;&amp;#x6BD4;&quot;&gt;&lt;a href=&quot;#&amp;#x4F7F;&amp;#x7528;&amp;#x5BF9;&amp;#x6BD4;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4F7F;&amp;#x7528;&amp;#x5BF9;&amp;#x6BD4;&quot;&gt;&lt;/a&gt;&amp;#x4F7F;&amp;#x7528;&amp;#x5BF9;&amp;#x6BD4;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x4E86;&amp;#x89E3; Regmap &amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x7EC6;&amp;#x8282;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x5BF9;&amp;#x6BD4;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x4F20;&amp;#x7EDF;&amp;#x64CD;&amp;#x4F5C;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4E0E; Regmap &amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x5DEE;&amp;#x5F02;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;&amp;#x4F20;&amp;#x7EDF;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#&amp;#x4F20;&amp;#x7EDF;&amp;#x65B9;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4F20;&amp;#x7EDF;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;&amp;#x4F20;&amp;#x7EDF;&amp;#x65B9;&amp;#x5F0F;&lt;/h3&gt;&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x4EE5;&amp;#x4E00;&amp;#x4E2A; I2C &amp;#x8BBE;&amp;#x5907;&amp;#x4E3A;&amp;#x4F8B;&amp;#x3002;&amp;#x8BFB;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#xFF0C;&amp;#x80AF;&amp;#x5B9A;&amp;#x9700;&amp;#x8981;&amp;#x7528;&amp;#x5230; &lt;code&gt;i2c_transfer&lt;/code&gt; &amp;#x8FD9;&amp;#x6837;&amp;#x7684; I2C &amp;#x51FD;&amp;#x6570;&amp;#x3002;&amp;#x4E3A;&amp;#x4E86;&amp;#x65B9;&amp;#x4FBF;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C;&amp;#x7684;&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5728;&amp;#x8FD9;&amp;#x4E4B;&amp;#x4E0A;&amp;#x518D;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A; Wrapper&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x901A;&amp;#x8FC7;&amp;#x8C03;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A; Wrapper &amp;#x6765;&amp;#x8BFB;&amp;#x5199;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x5982;&amp;#x4E0B;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8BFB;&amp;#x53D6;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static int xxx_i2c_read_reg(struct i2c_client *client, u8 reg, u8 *val)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	struct i2c_msg msg[] = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.addr = client-&amp;gt;addr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.flags = 0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.len = 1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.buf = &amp;amp;reg,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.addr = client-&amp;gt;addr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.flags = I2C_M_RD,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.len = 1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			.buf = val,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return i2c_transfer(client-&amp;gt;adapter, msg, 2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;regmap&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#Regmap&amp;#x65B9;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;Regmap&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;Regmap&amp;#x65B9;&amp;#x5F0F;&lt;/h3&gt;&lt;p&gt;&amp;#x800C;&amp;#x5982;&amp;#x679C; regmap &amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E0A;&amp;#x9762;&amp;#x8FD9;&amp;#x79CD;&amp;#x8BFB;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x73B0;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// first step: define regmap_config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;static const struct regmap_config xxx_regmap_config = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.reg_bits = 10,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.val_bits = 14,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.max_register = 40,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.cache_type = REGCACHE_RBTREE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.volatile_reg = false,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.readable_reg = false,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// second step: initialize regmap in driver loading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;regmap = regmap_init_i2c(i2c_client, &amp;amp;xxx_regmap_config);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// third step: register operations&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;regmap_read(regmap, XXX_REG, &amp;amp;value);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#xFF0C;&amp;#x505A;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#x5C31;&amp;#x662F;&amp;#x5B9A;&amp;#x4E49; IC &amp;#x7684;&amp;#x4E00;&amp;#x4E9B;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x4FE1;&amp;#x606F;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&amp;#x4F4D;&amp;#x5BBD;&amp;#xFF0C;&amp;#x5730;&amp;#x5740;&amp;#x4F4D;&amp;#x5BBD;&amp;#xFF0C;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x603B;&amp;#x6570;&amp;#x7B49;&amp;#x3002;&amp;#x7136;&amp;#x540E;&amp;#x5728;&amp;#x9A71;&amp;#x52A8;&amp;#x52A0;&amp;#x8F7D;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x5316; Regmap&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6B63;&amp;#x5E38;&amp;#x8C03;&amp;#x7528; Regmap &amp;#x7684; API &amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9;&amp;#x6162;&amp;#x901F; I/O &amp;#x80FD;&amp;#x591F;&amp;#x4E13;&amp;#x6CE8;&amp;#x4E8E;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x5185;&amp;#x6838;&amp;#x628A; SPI, I2C &amp;#x7B49;&amp;#x603B;&amp;#x7EBF;&amp;#x64CD;&amp;#x4F5C;&amp;#x65B9;&amp;#x5F0F;&amp;#x5168;&amp;#x90E8;&amp;#x5C01;&amp;#x88C5;&amp;#x5728; Regmap &amp;#x91CC;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x9A71;&amp;#x52A8;&amp;#x82E5;&amp;#x8981;&amp;#x505A; I/O &amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528; Regmap &amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5B9E;&amp;#x73B0;&amp;#x7EC6;&amp;#x8282;&quot;&gt;&lt;a href=&quot;#&amp;#x5B9E;&amp;#x73B0;&amp;#x7EC6;&amp;#x8282;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B9E;&amp;#x73B0;&amp;#x7EC6;&amp;#x8282;&quot;&gt;&lt;/a&gt;&amp;#x5B9E;&amp;#x73B0;&amp;#x7EC6;&amp;#x8282;&lt;/h2&gt;&lt;p&gt;&amp;#x6574;&amp;#x4E2A; Regmap &amp;#x662F;&amp;#x5206;&amp;#x4E3A; 3 &amp;#x5C42;&amp;#xFF0C;&amp;#x5176;&amp;#x62D3;&amp;#x6251;&amp;#x7ED3;&amp;#x6784;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/regmap.jpg&quot; alt=&quot;Linux Regmap&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x901A;&amp;#x8FC7;&amp;#x5176;&amp;#x4E2D; 3 &amp;#x4E2A;&amp;#x6838;&amp;#x5FC3;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x6765;&amp;#x5206;&amp;#x522B;&amp;#x8BF4;&amp;#x660E;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;regmap_config&quot;&gt;&lt;a href=&quot;#regmap-config&quot; class=&quot;headerlink&quot; title=&quot;regmap_config&quot;&gt;&lt;/a&gt;regmap_config&lt;/h3&gt;&lt;p&gt;&lt;code&gt;struct regmap_config&lt;/code&gt; &amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x4EE3;&amp;#x8868;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x914D;&amp;#x7F6E;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x5728;&amp;#x505A; Regmap &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#xFF0C;&amp;#x9A71;&amp;#x52A8;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x4F20;&amp;#x7ED9; Regmap&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x7684;&amp;#x5B9A;&amp;#x4E49;&amp;#x5728; &lt;code&gt;include/linux/regmap.h&lt;/code&gt;&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x5305;&amp;#x542B;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x6570;&amp;#x91CF;&amp;#xFF0C;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x4F4D;&amp;#x5BBD;&amp;#xFF0C;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x8BFB;&amp;#x5199;&amp;#x5C5E;&amp;#x6027;&amp;#x7B49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x548C;&amp;#x9A71;&amp;#x52A8;&amp;#x5BF9;&amp;#x63A5;&amp;#x7684;&amp;#x3002;Regmap &amp;#x6839;&amp;#x636E;&amp;#x4F20;&amp;#x8FDB;&amp;#x6765;&amp;#x7684; regmap_config &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7F13;&amp;#x5B58;&amp;#x548C;&amp;#x603B;&amp;#x7EBF;&amp;#x64CD;&amp;#x4F5C;&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x9A71;&amp;#x52A8;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6B63;&amp;#x5E38;&amp;#x8C03;&amp;#x7528; &lt;code&gt;regmap_write&lt;/code&gt; &amp;#x548C; &lt;code&gt;regmap_read&lt;/code&gt; &amp;#x51FD;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;regmap_ops&quot;&gt;&lt;a href=&quot;#regmap-ops&quot; class=&quot;headerlink&quot; title=&quot;regmap_ops&quot;&gt;&lt;/a&gt;regmap_ops&lt;/h3&gt;&lt;p&gt;&lt;code&gt;struct regmap_ops&lt;/code&gt; &amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5B9A;&amp;#x4E49;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct regcache_ops {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	const char *name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	enum regcache_type type;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*init)(struct regmap *map);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*exit)(struct regmap *map);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef CONFIG_DEBUG_FS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	void (*debugfs_init)(struct regmap *map);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*read)(struct regmap *map, unsigned int reg, unsigned int *value);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*write)(struct regmap *map, unsigned int reg, unsigned int value);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*sync)(struct regmap *map, unsigned int min, unsigned int max);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	int (*drop)(struct regmap *map, unsigned int min, unsigned int max);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6700;&amp;#x65B0; Linux 4.0 &amp;#x7248;&amp;#x672C;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6709; 3 &amp;#x79CD;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x662F;&amp;#x6570;&amp;#x7EC4;&amp;#xFF08;flat&amp;#xFF09;&amp;#x3001;LZO &amp;#x538B;&amp;#x7F29;&amp;#x548C;&amp;#x7EA2;&amp;#x9ED1;&amp;#x6811;&amp;#xFF08;rbtree&amp;#xFF09;&amp;#x3002;&amp;#x6570;&amp;#x7EC4;&amp;#x597D;&amp;#x7406;&amp;#x89E3;&amp;#xFF0C;&amp;#x662F;&amp;#x6700;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x5F53;&amp;#x8BBE;&amp;#x5907;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x5F88;&amp;#x5C11;&amp;#x65F6;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x8FD9;&amp;#x79CD;&amp;#x7C7B;&amp;#x578B;&amp;#x6765;&amp;#x7F13;&amp;#x5B58;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x503C;&amp;#x3002;LZO(Lempel&amp;#x2013;Ziv&amp;#x2013;Oberhumer) &amp;#x662F; Linux &amp;#x4E2D;&amp;#x7ECF;&amp;#x5E38;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x538B;&amp;#x7F29;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;Linux &amp;#x7F16;&amp;#x8BD1;&amp;#x540E;&amp;#x5C31;&amp;#x4F1A;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7B97;&amp;#x6CD5;&amp;#x6765;&amp;#x538B;&amp;#x7F29;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7B97;&amp;#x6CD5;&amp;#x6709; 3 &amp;#x4E2A;&amp;#x7279;&amp;#x6027;&amp;#xFF1A;&amp;#x538B;&amp;#x7F29;&amp;#x5FEB;&amp;#xFF0C;&amp;#x89E3;&amp;#x538B;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x989D;&amp;#x5916;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x538B;&amp;#x7F29;&amp;#x6BD4;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x52A8;&amp;#x8C03;&amp;#x8282;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x7406;&amp;#x89E3;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x6570;&amp;#x7EC4;&amp;#x7F13;&amp;#x5B58;&amp;#xFF0C;&amp;#x5957;&amp;#x4E86;&amp;#x4E00;&amp;#x5C42;&amp;#x538B;&amp;#x7F29;&amp;#xFF0C;&amp;#x6765;&amp;#x8282;&amp;#x7EA6;&amp;#x5185;&amp;#x5B58;&amp;#x3002;&amp;#x5F53;&amp;#x8BBE;&amp;#x5907;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x6570;&amp;#x91CF;&amp;#x4E2D;&amp;#x7B49;&amp;#x65F6;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8003;&amp;#x8651;&amp;#x8FD9;&amp;#x79CD;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&amp;#x800C;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x7C7B;&amp;#x7EA2;&amp;#x9ED1;&amp;#x6811;&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x7279;&amp;#x6027;&amp;#x5C31;&amp;#x662F;&amp;#x7D22;&amp;#x5F15;&amp;#x5FEB;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5F53;&amp;#x8BBE;&amp;#x5907;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x6570;&amp;#x91CF;&amp;#x6BD4;&amp;#x8F83;&amp;#x5927;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x5BF9;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x64CD;&amp;#x4F5C;&amp;#x5EF6;&amp;#x65F6;&amp;#x8981;&amp;#x6C42;&amp;#x4F4E;&amp;#x65F6;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x8FD9;&amp;#x79CD;&amp;#x7F13;&amp;#x5B58;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7F13;&amp;#x5B58;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x662F;&amp;#x5728; Regmap &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#xFF0C;&amp;#x7531; &lt;code&gt;.cache_type = REGCACHE_RBTREE&lt;/code&gt; &amp;#x6765;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E; &lt;code&gt;regmap_read&lt;/code&gt; &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5148;&amp;#x5224;&amp;#x65AD;&amp;#x5F53;&amp;#x524D;&amp;#x7F13;&amp;#x5B58;&amp;#x662F;&amp;#x5426;&amp;#x6709;&amp;#x503C;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x68C0;&amp;#x67E5;&amp;#x662F;&amp;#x5426;&amp;#x9700;&amp;#x8981; bypass&amp;#xFF0C;&amp;#x82E5;&amp;#x6CA1;&amp;#x6709;&amp;#xFF0C;&amp;#x5219;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x4ECE;&amp;#x7F13;&amp;#x5B58;&amp;#x91CC;&amp;#x9762;&amp;#x53D6;&amp;#x503C;&amp;#xFF0C;&amp;#x8C03;&amp;#x7528; &lt;code&gt;regcache_read&lt;/code&gt; &amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x503C;&amp;#xFF0C;&amp;#x82E5;&amp;#x9700;&amp;#x8981;&amp;#x4ECE;&amp;#x786C;&amp;#x4EF6;&amp;#x4E0A;&amp;#x8BFB;&amp;#x53D6;&amp;#xFF0C;&amp;#x5219;&amp;#x8C03;&amp;#x7528;&amp;#x5177;&amp;#x4F53;&amp;#x534F;&amp;#x8BAE;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x82E5;&amp;#x662F; I2C&amp;#xFF0C;&amp;#x8C03;&amp;#x7528; &lt;code&gt;i2c_transfer&lt;/code&gt;&amp;#x3002;&amp;#x5199;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E5F;&amp;#x662F;&amp;#x5927;&amp;#x540C;&amp;#x5C0F;&amp;#x5F02;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;regmap_bus&quot;&gt;&lt;a href=&quot;#regmap-bus&quot; class=&quot;headerlink&quot; title=&quot;regmap_bus&quot;&gt;&lt;/a&gt;regmap_bus&lt;/h3&gt;&lt;p&gt;&amp;#x524D;&amp;#x9762;&amp;#x8BF4;&amp;#x7684;&amp;#x90FD;&amp;#x662F; Regmap &amp;#x6240;&amp;#x505A;&amp;#x7684;&amp;#x5C01;&amp;#x88C5;&amp;#xFF0C;&amp;#x800C;&amp;#x771F;&amp;#x6B63;&amp;#x8FDB;&amp;#x884C; I/O &amp;#x64CD;&amp;#x4F5C;&amp;#x5C31;&amp;#x662F;&amp;#x8FD9;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x5C42;&amp;#x3002;&lt;code&gt;struct regmap_bus&lt;/code&gt; &amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x603B;&amp;#x7EBF;&amp;#x4E0A;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x5C31;&amp;#x50CF;&amp;#x4E4B;&amp;#x524D;&amp;#x5BF9; &lt;code&gt;i2c_transfer&lt;/code&gt; &amp;#x6240;&amp;#x505A;&amp;#x7684;&amp;#x5C01;&amp;#x88C5;&amp;#x4E00;&amp;#x6837;&amp;#x3002;&amp;#x5176;&amp;#x5B9A;&amp;#x4E49;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct regmap_bus {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	bool fast_io;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_write write;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_gather_write gather_write;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_async_write async_write;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_reg_write reg_write;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_read read;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_reg_read reg_read;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_free_context free_context;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	regmap_hw_async_alloc async_alloc;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	u8 read_flag_mask;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	enum regmap_endian reg_format_endian_default;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	enum regmap_endian val_format_endian_default;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728; Lernel 4.0 &amp;#x4E2D;&amp;#xFF0C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x652F;&amp;#x6301;&amp;#x4E86; I2C&amp;#x3001;SPI&amp;#x3001;AC97&amp;#x3001;MMIO &amp;#x548C; SPMI &amp;#x4E94;&amp;#x79CD;&amp;#x603B;&amp;#x7EBF;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&amp;#x76F8;&amp;#x4FE1;&amp;#x5728;&amp;#x672A;&amp;#x6765;&amp;#xFF0C;&amp;#x6709;&amp;#x66F4;&amp;#x591A;&amp;#x7684;&amp;#x603B;&amp;#x7EBF;&amp;#x4F1A;&amp;#x52A0;&amp;#x8FDB;&amp;#x6765;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x4E2A;&amp;#x603B;&amp;#x7EBF;&amp;#x4E5F;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x96BE;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700; 4 &amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#xFF1A;&lt;code&gt;xxx_read&lt;/code&gt;&amp;#x3001;&lt;code&gt;xxx_write&lt;/code&gt;&amp;#x3001;&lt;code&gt;xxx_init&lt;/code&gt; &amp;#x548C; &lt;code&gt;xxx_deinit&lt;/code&gt;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x591A;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x7559;&amp;#x4E2A;&amp;#x4EFB;&amp;#x52A1;&amp;#x5728;&amp;#x8FD9;&amp;#x5427;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://lwn.net/Articles/451789/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;regmap: Generic I2C and SPI register map library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://lxr.free-electrons.com/source/include/linux/regmap.h&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;include/linux/regmap.h&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://lxr.free-electrons.com/source/drivers/base/regmap&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;drivers/base/regmap&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;Regmap 机制是在 Linux 3.1 加入进来的特性。主要目的是减少慢速 I/O 驱动上的重复逻辑，提供一种通用的接口来操作底层硬件上的寄存器。其实这就是内核做的一次重构。Regmap 除了能做到统一的 I/O 接口，还可以在驱动和硬件 IC 之间做一层缓存，从而能减少底层 I/O 的操作次数。&lt;/p&gt;
&lt;h2 id=&quot;使用对比&quot;&gt;&lt;a href=&quot;#使用对比&quot; class=&quot;headerlink&quot; title=&quot;使用对比&quot;&gt;&lt;/a&gt;使用对比&lt;/h2&gt;&lt;p&gt;在了解 Regmap 的实现细节前，我们先来对比一下，传统操作寄存器的方式，与 Regmap 之间的差异。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="regmap" scheme="http://blog.miopeco.com/tags/regmap/"/>
    
  </entry>
  
  <entry>
    <title>解析 Android 5.1 Sensor HAL</title>
    <link href="http://blog.miopeco.com/2015/03/11/sensor_hal/"/>
    <id>http://blog.miopeco.com/2015/03/11/sensor_hal/</id>
    <published>2015-03-10T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;&amp;#x9884;&amp;#x70ED;&quot;&gt;&lt;a href=&quot;#&amp;#x9884;&amp;#x70ED;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9884;&amp;#x70ED;&quot;&gt;&lt;/a&gt;&amp;#x9884;&amp;#x70ED;&lt;/h2&gt;&lt;p&gt;&amp;#x524D;&amp;#x51E0;&amp;#x5929;&amp;#x7814;&amp;#x7A76;&amp;#x4E86; Android 5.1 &amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E; Android 4.4&amp;#xFF0C;Sensor HAL &amp;#x505A;&amp;#x4E86;&amp;#x4EC0;&amp;#x4E48;&amp;#x6539;&amp;#x52A8;&amp;#x3002;&amp;#x7136;&amp;#x540E;&amp;#x5C31;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#xFF0C;&amp;#x600E;&amp;#x4E48;&amp;#x77E5;&amp;#x9053; Android 5.1 &amp;#x5BF9; Sensor HAL &amp;#x6539;&amp;#x4E86;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E1C;&amp;#x897F;&amp;#x5462;&amp;#xFF1F;&amp;#x5176;&amp;#x5B9E;&amp;#x53EA;&amp;#x8981;&amp;#x8FD0;&amp;#x884C;&amp;#x4E86;&amp;#x4E00;&amp;#x4E0B;&amp;#x5982;&amp;#x4E0B;&amp;#x547D;&amp;#x4EE4;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;diff -u /path/to/android_5.1/hardware/libhardware/include/hardware/sensors.h \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        /path/to/android_4.4/hardware/libhardware/include/hardware/sensors.h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4F30;&amp;#x8BA1;&amp;#x90FD;&amp;#x61C2;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;android-51-sensor-hal&quot;&gt;&lt;a href=&quot;#Android-5-1-Sensor-HAL&quot; class=&quot;headerlink&quot; title=&quot;Android 5.1 Sensor HAL&quot;&gt;&lt;/a&gt;Android 5.1 Sensor HAL&lt;/h2&gt;&lt;p&gt;&amp;#x597D;&amp;#xFF01;&amp;#x8FDB;&amp;#x5165;&amp;#x6B63;&amp;#x9898;&amp;#xFF01;&lt;/p&gt;
&lt;p&gt;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x770B;&amp;#x770B; Android 5.1 Sensor HAL &amp;#x5230;&amp;#x5E95; &amp;#x5F15;&amp;#x5165;&amp;#x4E86;&amp;#x54EA;&amp;#x4E9B;&amp;#x53D8;&amp;#x66F4;&amp;#xFF1F;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x66F4;&amp;#x65B0;-api-version-&amp;#x5230;-13&quot;&gt;&lt;a href=&quot;#&amp;#x66F4;&amp;#x65B0;-API-Version-&amp;#x5230;-1-3&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x66F4;&amp;#x65B0; API Version &amp;#x5230; 1.3&quot;&gt;&lt;/a&gt;&amp;#x66F4;&amp;#x65B0; API Version &amp;#x5230; 1.3&lt;/h3&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x6B21; Android 5.1 &amp;#x7684;&amp;#x66F4;&amp;#x65B0;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x5E26;&amp;#x6765;&amp;#x7684;&amp;#x5C31;&amp;#x662F; API Version &amp;#x7684;&amp;#x66F4;&amp;#x65B0;&amp;#x3002;Anroid 4.4 &amp;#x7528;&amp;#x7684;&amp;#x662F; 1.1 &amp;#x7684; API&amp;#xFF0C;&amp;#x5230;&amp;#x4E86; Android 5.1&amp;#xFF0C;&amp;#x6539;&amp;#x7528; 1.3 &amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x65B0;&amp;#x589E;-flagsensor_flag_wake_up&quot;&gt;&lt;a href=&quot;#&amp;#x65B0;&amp;#x589E;-Flag&amp;#xFF1A;SENSOR-FLAG-WAKE-UP&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x65B0;&amp;#x589E; Flag&amp;#xFF1A;SENSOR_FLAG_WAKE_UP&quot;&gt;&lt;/a&gt;&amp;#x65B0;&amp;#x589E; Flag&amp;#xFF1A;SENSOR_FLAG_WAKE_UP&lt;/h3&gt;&lt;p&gt;&amp;#x5176;&amp;#x6B21;&amp;#xFF0C;&amp;#x662F;&amp;#x589E;&amp;#x52A0;&amp;#x4E86; &lt;code&gt;SENSOR_FLAG_WAKE_UP&lt;/code&gt; &amp;#x8FD9;&amp;#x4E2A;FLAG&amp;#x3002;&amp;#x5E26;&amp;#x6709; Wake Up Flag &amp;#x7684; Sensor&amp;#xFF0C;&amp;#x5728;&amp;#x6709;&amp;#x4E8B;&amp;#x4EF6;&amp;#x4E0A;&amp;#x62A5;&amp;#xFF0C;&amp;#x6216;&amp;#x8005; FIFO &amp;#x6EE1;&amp;#x4E86;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x5524;&amp;#x9192; AP&amp;#x3002;&amp;#x800C;&amp;#x975E; Wake Up Sensor&amp;#xFF0C;&amp;#x5219;&amp;#x53EA;&amp;#x80FD;&amp;#x628A;&amp;#x6570;&amp;#x636E;&amp;#x5B58;&amp;#x5728; FIFO &amp;#x4E2D;&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x80FD;&amp;#x5524;&amp;#x9192; AP&amp;#xFF0C;&amp;#x82E5; FIFO &amp;#x6EE1;&amp;#x4E86;&amp;#xFF0C;&amp;#x5219;&amp;#x8986;&amp;#x76D6;&amp;#x3002;&amp;#x6839;&amp;#x636E; Android &amp;#x7684;&amp;#x63CF;&amp;#x8FF0;&amp;#xFF0C;&amp;#x5E26;&amp;#x6709;&amp;#x8FD9;&amp;#x4E2A; Flag &amp;#x7684; Sensor&amp;#xFF0C;&amp;#x5728;&amp;#x6570;&amp;#x636E;&amp;#x4E0A;&amp;#x62A5;&amp;#x65F6;&amp;#xFF0C;&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#x9700;&amp;#x8981;&amp;#x4FDD;&amp;#x6301;&amp;#x4E00;&amp;#x4E2A; &lt;code&gt;wake_lock&lt;/code&gt;&amp;#x3002;&amp;#x7B49; SensorService &amp;#x628A;&amp;#x6570;&amp;#x636E;&amp;#x8BFB;&amp;#x56DE;&amp;#x540E;&amp;#xFF0C;&amp;#x9A71;&amp;#x52A8;&amp;#x91CA;&amp;#x653E; &lt;code&gt;wake_lock&lt;/code&gt;&amp;#xFF0C;SensorService &amp;#x4F1A;&amp;#x4FDD;&amp;#x6301;&amp;#x4E00;&amp;#x4E2A; &lt;code&gt;wake_lock&lt;/code&gt;&amp;#xFF0C;&amp;#x8BA9;&amp;#x4E0A;&amp;#x5C42; APP &amp;#x6709;&amp;#x65F6;&amp;#x95F4;&amp;#x5904;&amp;#x7406;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E8B;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540C;&amp;#x65F6;&amp;#x5728; Sensor HAL &amp;#x8FD9;&amp;#x8FB9;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A; Sensor &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5B83;&amp;#x53EF;&amp;#x4EE5;&amp;#x540C;&amp;#x65F6;&amp;#x58F0;&amp;#x660E;&amp;#x4E24;&amp;#x4E2A; Sensor Type&amp;#xFF0C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5E26; WAKE FLAG&amp;#xFF0C;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E0D;&amp;#x5E26;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x5199; Sensor List &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x505A;&amp;#x5982;&amp;#x4E0B;&amp;#x5B9A;&amp;#x4E49;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static struct sensor_t baseSensorList[] = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;XXX Gyroscope&amp;quot;, &amp;quot;XXX&amp;quot;, 1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         SENSORS_GYROSCOPE_HANDLE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         SENSOR_TYPE_GYROSCOPE, 2000.0f, 1.0f, 0.5f, 10000, 0, 62,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;quot;android.sensor.gyroscope&amp;quot;, &amp;quot;&amp;quot;, 10000, SENSOR_FLAG_CONTINUOUS_MODE, {}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    },&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;XXX Gyroscope - Wakeup&amp;quot;, &amp;quot;XXX&amp;quot;, 1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         SENSORS_GYROSCOPE_WAKEUP_HANDLE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         SENSOR_TYPE_GYROSCOPE, 2000.0f, 1.0f, 0.5f, 10000, 0, 62,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;quot;android.sensor.gyroscope&amp;quot;, &amp;quot;&amp;quot;, 10000, SENSOR_FLAG_CONTINUOUS_MODE | SENSOR_FLAG_WAKE_UP, {}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    },&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x628A;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A; Sensor &amp;#x5F53;&amp;#x505A;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E0D;&amp;#x540C;&amp;#x7684; Sensor &amp;#x53BB;&amp;#x5B9E;&amp;#x73B0;&amp;#x5176; handler&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#xFF0C;&amp;#x4E0A;&amp;#x5C42; APP &amp;#x5728;&amp;#x7528; &lt;code&gt;SensorManger::getDefaultSensor (int type, boolean wakeUp)&lt;/code&gt; &amp;#x6765;&amp;#x83B7;&amp;#x53D6; Sensor &amp;#x65F6;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6307;&amp;#x5B9A;&amp;#x662F;&amp;#x5426;&amp;#x5E26; Wake Up Flag&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x4E00;&amp;#x5B9A;&amp;#x8981;&amp;#x614E;&amp;#x91CD;&amp;#x9009;&amp;#x62E9;&amp;#x662F;&amp;#x5426;&amp;#x5E26; Wake Up Flag&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD9;&amp;#x5BF9;&amp;#x624B;&amp;#x673A;&amp;#x529F;&amp;#x8017;&amp;#x6709;&amp;#x5F88;&amp;#x5927;&amp;#x7684;&amp;#x5F71;&amp;#x54CD;&amp;#x3002;&amp;#x4F30;&amp;#x8BA1;&amp;#x5F88;&amp;#x591A; OEM &amp;#x5382;&amp;#x5546;&amp;#x4F1A;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x4F18;&amp;#x5316;&amp;#xFF0C;&amp;#x4E0D;&amp;#x4F1A;&amp;#x4EFB;&amp;#x7531;&amp;#x4E0A;&amp;#x5C42; APP &amp;#x53BB;&amp;#x83B7;&amp;#x53D6;&amp;#x5E26; Wake Up Flag &amp;#x7684; Sensor&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;struct-sensor_t-&amp;#x65B0;&amp;#x589E;&amp;#x4E09;&amp;#x5B57;&amp;#x6BB5;&quot;&gt;&lt;a href=&quot;#struct-sensor-t-&amp;#x65B0;&amp;#x589E;&amp;#x4E09;&amp;#x5B57;&amp;#x6BB5;&quot; class=&quot;headerlink&quot; title=&quot;struct sensor_t &amp;#x65B0;&amp;#x589E;&amp;#x4E09;&amp;#x5B57;&amp;#x6BB5;&quot;&gt;&lt;/a&gt;struct sensor_t &amp;#x65B0;&amp;#x589E;&amp;#x4E09;&amp;#x5B57;&amp;#x6BB5;&lt;/h3&gt;&lt;p&gt;&amp;#x7B2C;&amp;#x4E09;&amp;#xFF0C;Android 5.1 &amp;#x5728; &lt;code&gt;struct sensor_t&lt;/code&gt; &amp;#x6DFB;&amp;#x52A0;&amp;#x4E86;3&amp;#x4E2A;&amp;#x65B0;&amp;#x7684;&amp;#x5B57;&amp;#x6BB5;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const char* stringType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const char* requiredPermission;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;uint64_t flags;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Android &amp;#x89C4;&amp;#x5B9A;&amp;#xFF0C;&amp;#x82E5; Sensor &amp;#x7684; Type &amp;#x4E0D;&amp;#x662F; Android &amp;#x6240;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x5219; stringType &amp;#x4E0D;&amp;#x80FD;&amp;#x662F; &lt;code&gt;&amp;quot;android.sensor.*&amp;quot;&lt;/code&gt;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B57;&amp;#x6BB5;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x7531;&amp;#x4E8E; Wake Up Flag &amp;#x7684;&amp;#x52A0;&amp;#x5165;&amp;#xFF0C;&amp;#x624D;&amp;#x6DFB;&amp;#x52A0;&amp;#x8FDB;&amp;#x6765;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x8868;&amp;#x793A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7C7B;&amp;#x7684; Sensor&amp;#x3002;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E; requiredPermission&amp;#xFF0C;&amp;#x6682;&amp;#x65F6;&amp;#x8FD8;&amp;#x6CA1;&amp;#x641E;&amp;#x6E05;&amp;#x695A;&amp;#x8FD9;&amp;#x4E48;&amp;#x4E2A;&amp;#x7528;&amp;#x6CD5;&amp;#x3002;flags &amp;#x5B57;&amp;#x6BB5;&amp;#x5F53;&amp;#x7136;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x653E; Sensor &amp;#x7684; Mode &amp;#x5566;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x65B0;&amp;#x589E;&amp;#x4E86;-9-&amp;#x4E2A;-sensor-type&quot;&gt;&lt;a href=&quot;#&amp;#x65B0;&amp;#x589E;&amp;#x4E86;-9-&amp;#x4E2A;-Sensor-Type&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x65B0;&amp;#x589E;&amp;#x4E86; 9 &amp;#x4E2A; Sensor Type&quot;&gt;&lt;/a&gt;&amp;#x65B0;&amp;#x589E;&amp;#x4E86; 9 &amp;#x4E2A; Sensor Type&lt;/h3&gt;&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x6539;&amp;#x52A8;&amp;#xFF0C;Android 5.1 &amp;#x6DFB;&amp;#x52A0;&amp;#x4E86;&amp;#x5F88;&amp;#x591A;&amp;#x65B0;&amp;#x7C7B;&amp;#x578B;&amp;#x7684; Sensor&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_HEART_RATE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_TILT_DETECTOR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_WAKE_GESTURE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_GLANCE_GESTURE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_PICK_UP_GESTURE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_IN_POCKET&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_ACTIVITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_FACE_DOWN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SENSOR_TYPE_SHAKE&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6BCF;&amp;#x4E2A; Sensor &amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x5C31;&amp;#x4E0D;&amp;#x8BF4;&amp;#x4E86;&amp;#x3002;&amp;#x4F46;&amp;#x6709;&amp;#x4E00;&amp;#x70B9;&amp;#x7591;&amp;#x95EE;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5B8C;&amp;#x5168;&amp;#x4E0D;&amp;#x61C2; Android &amp;#x5230;&amp;#x5E95;&amp;#x8981;&amp;#x5E72;&amp;#x561B;&amp;#x3002;&amp;#x6709;&amp;#x4E9B; Sensor&amp;#xFF0C;&amp;#x5B8C;&amp;#x5168;&amp;#x53EF;&amp;#x4EE5;&amp;#x5408;&amp;#x5E76;&amp;#x5728;&amp;#x4E00;&amp;#x8D77;&amp;#xFF0C;&amp;#x50CF; &lt;code&gt;TILT&lt;/code&gt;, &lt;code&gt;GLANCE&lt;/code&gt;, &lt;code&gt;PICK_UP&lt;/code&gt; &amp;#x548C; &lt;code&gt;SHAKE&lt;/code&gt;&amp;#x5B8C;&amp;#x5168;&amp;#x5C5E;&amp;#x4E8E; GESTURE &amp;#x8303;&amp;#x7574;&amp;#xFF0C;&lt;code&gt;IN_POCKET&lt;/code&gt;&amp;#xFF0C;&lt;code&gt;FACE_DOWN&lt;/code&gt;&amp;#xFF0C;&lt;code&gt;ACTIVITY&lt;/code&gt; &amp;#x4E5F;&amp;#x662F;&amp;#x624B;&amp;#x673A; STATE &amp;#x8303;&amp;#x7574;&amp;#x3002;&amp;#x800C; &lt;code&gt;WAKE_GESTURE&lt;/code&gt; &amp;#x66F4;&amp;#x52A0;&amp;#x6A21;&amp;#x7CCA;&amp;#xFF0C;&amp;#x628A;&amp;#x5F88;&amp;#x591A; Sensor &amp;#x5382;&amp;#x5546;&amp;#x90FD;&amp;#x641E;&amp;#x61F5;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A; &lt;code&gt;WAKE_GESUTRE&lt;/code&gt; &amp;#x597D;&amp;#x50CF;&amp;#x5305;&amp;#x542B;&amp;#x4E86;&amp;#x5176;&amp;#x4ED6;&amp;#x90A3;&amp;#x4E9B; GESTURE&amp;#x3002;&amp;#x6309;&amp;#x8FD9;&amp;#x79CD;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x4F30;&amp;#x8BA1;&amp;#x8981;&amp;#x4E0D;&amp;#x4E86;&amp;#x591A;&amp;#x4E45;&amp;#xFF0C;Android &amp;#x7684; Sensor &amp;#x7C7B;&amp;#x578B;&amp;#x5C31;&amp;#x4F1A;&amp;#x7206;&amp;#x70B8;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;预热&quot;&gt;&lt;a href=&quot;#预热&quot; class=&quot;headerlink&quot; title=&quot;预热&quot;&gt;&lt;/a&gt;预热&lt;/h2&gt;&lt;p&gt;前几天研究了 Android 5.1 相对于 Android 4.4，Sensor HAL 做了什么改动。然后就有了这篇文章。&lt;/p&gt;
&lt;p&gt;首先，怎么知道 Android 5.1 对 Sensor HAL 改了什么东西呢？其实只要运行了一下如下命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;diff -u /path/to/android_5.1/hardware/libhardware/include/hardware/sensors.h \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        /path/to/android_4.4/hardware/libhardware/include/hardware/sensors.h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;估计都懂了。&lt;/p&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.miopeco.com/categories/android/"/>
    
    
      <category term="android" scheme="http://blog.miopeco.com/tags/android/"/>
    
      <category term="sensor" scheme="http://blog.miopeco.com/tags/sensor/"/>
    
  </entry>
  
  <entry>
    <title>Linux 命令 tr 介绍</title>
    <link href="http://blog.miopeco.com/2014/09/21/linux_tr/"/>
    <id>http://blog.miopeco.com/2014/09/21/linux_tr/</id>
    <published>2014-09-20T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x6700;&amp;#x8FD1;&amp;#x5728;&amp;#x7528; &lt;code&gt;gedit&lt;/code&gt; &amp;#x6253;&amp;#x5F00;&amp;#x4E00;&amp;#x4E2A; log &amp;#x6587;&amp;#x4EF6;&amp;#x65F6;&amp;#xFF0C;&amp;#x63D0;&amp;#x793A;&amp;#x8BF4;&amp;#x6709;&amp;#x4E0D;&amp;#x80FD;&amp;#x663E;&amp;#x793A;&amp;#x7684;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x5BFC;&amp;#x81F4;&amp;#x6574;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x90FD;&amp;#x4E71;&amp;#x7801;&amp;#x3002;&amp;#x7528; &lt;code&gt;file&lt;/code&gt; &amp;#x547D;&amp;#x4EE4;&amp;#x53BB;&amp;#x67E5;&amp;#x770B;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x5C45;&amp;#x7136;&amp;#x663E;&amp;#x793A;&amp;#x4E3A;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x660E;&amp;#x660E;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7EAF;&amp;#x6587;&amp;#x672C;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x600E;&amp;#x4E48;&amp;#x4F1A;&amp;#x663E;&amp;#x793A;&amp;#x4E3A;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x6587;&amp;#x4EF6;&amp;#x5462;&amp;#xFF1F;&amp;#x4F30;&amp;#x8BA1;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x5B58;&amp;#x5728;&amp;#x5947;&amp;#x7279;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#xFF0C;&amp;#x5BFC;&amp;#x81F4;&amp;#x6574;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x89E3;&amp;#x6790;&amp;#x4E0D;&amp;#x6B63;&amp;#x5E38;&amp;#x3002;&amp;#x65E2;&amp;#x7136;&amp;#x4E00;&amp;#x5806;&amp;#x6C99;&amp;#x5B50;&amp;#x91CC;&amp;#x6DF7;&amp;#x5165;&amp;#x4E86;&amp;#x51E0;&amp;#x9897;&amp;#x77F3;&amp;#x5934;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5C31;&amp;#x8981;&amp;#x628A;&amp;#x8FD9;&amp;#x4E9B;&amp;#x77F3;&amp;#x5934;&amp;#x5254;&amp;#x9664;&amp;#x6389;&amp;#x3002;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#x547D;&amp;#x4EE4;&amp;#x53EF;&amp;#x4EE5;&amp;#x5904;&amp;#x7406;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x63A8;&amp;#x8350; &lt;code&gt;tr&lt;/code&gt;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tr&lt;/code&gt; &amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F88;&amp;#x4F20;&amp;#x7EDF;&amp;#x7684; Unix &amp;#x547D;&amp;#x4EE4;&amp;#x3002;&amp;#x672C;&amp;#x610F;&amp;#x5C31;&amp;#x662F; translate&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x66FF;&amp;#x6362;&amp;#x3001;&amp;#x5220;&amp;#x9664;&amp;#x548C;&amp;#x53BB;&amp;#x91CD;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x3002;&amp;#x5176;&amp;#x57FA;&amp;#x672C;&amp;#x683C;&amp;#x5F0F;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tr OPTION SET1 [SET2]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;&amp;#x4E24;&amp;#x4E2A; SET &amp;#x5C31;&amp;#x662F;&amp;#x7528;&amp;#x6237;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&amp;#x3002;&amp;#x5176;&amp;#x4E2D; SET1 &amp;#x662F;&amp;#x6307;&amp;#x5B9A; &lt;code&gt;tr&lt;/code&gt; &amp;#x8981;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x5B57;&amp;#x7B26;&amp;#x8303;&amp;#x56F4;&amp;#xFF0C;SET2 &amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x6307;&amp;#x5B9A;&amp;#x53BB;&amp;#x91CD;&amp;#x548C;&amp;#x66FF;&amp;#x6362;&amp;#x65F6;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x5B57;&amp;#x7B26;&amp;#x8303;&amp;#x56F4;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&amp;#x7684;&amp;#x6307;&amp;#x5B9A;&amp;#x683C;&amp;#x5F0F;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B; &lt;code&gt;tr&lt;/code&gt; &amp;#x7684; man &amp;#x6587;&amp;#x6863;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x6F14;&amp;#x793A;&amp;#x4E00;&amp;#x4E0B;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr &amp;quot;[:lower:]&amp;quot; &amp;quot;[:upper:]&amp;quot;   # out: THIS ISS AA TEST           (1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr &amp;quot;a-z&amp;quot; &amp;quot;A-Z&amp;quot;   # out: THIS ISS AA TEST               (2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr -s &amp;quot;a-zA-Z&amp;quot;   # out: thIs iS a Test               (3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr -s &amp;quot;a-zA-Z&amp;quot; &amp;quot;a-za-z&amp;quot;   # out: this is a test               (4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr -d &amp;quot;a-z&amp;quot;   # out: I SS  T                    (5)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;thIs iSS aa Test&amp;quot; | tr -cd &amp;quot;a-z\n\40&amp;quot;   # out: ths i aa est               (6)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6BCF;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x540E;&amp;#x9762;&amp;#x7684;&amp;#x6CE8;&amp;#x91CA;&amp;#x662F;&amp;#x8BE5;&amp;#x547D;&amp;#x4EE4;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x548C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x66FF;&amp;#x6362;&amp;#x5DE5;&amp;#x4F5C;&amp;#xFF0C;&amp;#x628A; SET1 &amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&amp;#x66FF;&amp;#x6362;&amp;#x6210; SET2 &amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&amp;#x3002;&amp;#x800C;&amp;#x7B2C;&amp;#x4E09;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x53BB;&amp;#x91CD;&amp;#xFF0C;&lt;code&gt;-s&lt;/code&gt; &amp;#x7684;&amp;#x610F;&amp;#x601D;&amp;#x5C31;&amp;#x662F; squeeze-repeats&amp;#x3002;&amp;#x800C;&amp;#x7B2C;&amp;#x56DB;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x6DFB;&amp;#x52A0;&amp;#x4E86; SET2 &amp;#x5B57;&amp;#x7B26;&amp;#x96C6;&amp;#xFF0C;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x8BA9; &lt;code&gt;tr&lt;/code&gt; &amp;#x5728;&amp;#x53BB;&amp;#x91CD;&amp;#x7684;&amp;#x540C;&amp;#x65F6;&amp;#xFF0C;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x66FF;&amp;#x6362;&amp;#x5DE5;&amp;#x4F5C;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;SET1 &amp;#x548C; SET2 &amp;#x7684;&amp;#x957F;&amp;#x5EA6;&amp;#x5FC5;&amp;#x987B;&amp;#x4FDD;&amp;#x6301;&amp;#x4E00;&amp;#x81F4;&amp;#xFF0C;&amp;#x4E0D;&amp;#x7136;&amp;#xFF0C; &lt;code&gt;tr&lt;/code&gt; &amp;#x5C31;&amp;#x4F1A;&amp;#x628A; SET2 &amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x91CD;&amp;#x590D;&amp;#x586B;&amp;#x5145;&amp;#xFF0C;&amp;#x591A;&amp;#x4F59;&amp;#x5B57;&amp;#x7B26;&amp;#x4F1A;&amp;#x629B;&amp;#x5F03;&amp;#xFF1B; &amp;#x4E14;&lt;code&gt;tr&lt;/code&gt; &amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;&amp;#x5148;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x66FF;&amp;#x6362;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x7528; SET2 &amp;#x505A;&amp;#x53BB;&amp;#x91CD;&amp;#x3002;&amp;#x7B2C;&amp;#x4E94;&amp;#x548C;&amp;#x7B2C;&amp;#x516D;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x505A;&amp;#x5B57;&amp;#x7B26;&amp;#x5220;&amp;#x9664;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC; &lt;code&gt;-c&lt;/code&gt; &amp;#x662F;&amp;#x7528; SET1 &amp;#x7684;&amp;#x8865;&amp;#x96C6;&amp;#x3002;&amp;#x5728;&amp;#x7B2C;&amp;#x516D;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x4E2D;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x51FA;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4FDD;&amp;#x7559;&amp;#x4E86;&amp;#x6362;&amp;#x884C;&amp;#x7B26;&amp;#x548C;&amp;#x7A7A;&amp;#x683C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;&amp;#x5BF9; &lt;code&gt;tr&lt;/code&gt; &amp;#x547D;&amp;#x4EE4;&amp;#x6709;&amp;#x4E00;&amp;#x756A;&amp;#x4E86;&amp;#x89E3;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x56DE;&amp;#x8FC7;&amp;#x5934;&amp;#x6765;&amp;#x770B;&amp;#x770B;&amp;#xFF0C;&amp;#x600E;&amp;#x4E48;&amp;#x5254;&amp;#x9664;&amp;#x4E00;&amp;#x4E2A;&amp;#x7EAF;&amp;#x6587;&amp;#x672C;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x7684;&amp;#x975E;&amp;#x5B57;&amp;#x7B26;&amp;#x5B57;&amp;#x8282;&amp;#x3002;&amp;#x6211;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tr -cd &amp;quot;\t\n\40-\176&amp;quot; &amp;amp;gt; /path/to/filename_new.log &amp;amp;lt; /path/to/filename.og&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x600E;&amp;#x4E48;&amp;#x6837;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6761;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x4F60;&amp;#x770B;&amp;#x61C2;&amp;#x4E86;&amp;#x4E48;&amp;#xFF1F;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近在用 &lt;code&gt;gedit&lt;/code&gt; 打开一个 log 文件时，提示说有不能显示的字符，导致整个文件都乱码。用 &lt;code&gt;file&lt;/code&gt; 命令去查看这个文件的类型，居然显示为二进制文件。明明是一个纯文本文件，怎么会显示为二进制文件呢？估计文件中存在奇特的字节，导致整个文件解析不正常。既然一堆沙子里混入了几颗石头，那么就要把这些石头剔除掉。有很多命令可以处理这个问题，这里我推荐 &lt;code&gt;tr&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tr&lt;/code&gt; 命令是一个很传统的 Unix 命令。本意就是 translate。也就是用来做字符替换、删除和去重的工作。其基本格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tr OPTION SET1 [SET2]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="tr" scheme="http://blog.miopeco.com/tags/tr/"/>
    
  </entry>
  
  <entry>
    <title>ADB 常见错误分析</title>
    <link href="http://blog.miopeco.com/2014/08/13/android_adb/"/>
    <id>http://blog.miopeco.com/2014/08/13/android_adb/</id>
    <published>2014-08-12T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;adb&quot;&gt;&lt;a href=&quot;#ADB&quot; class=&quot;headerlink&quot; title=&quot;ADB&quot;&gt;&lt;/a&gt;ADB&lt;/h2&gt;&lt;p&gt;ADB(Android Debug Bridge) &amp;#x662F; Google &amp;#x4E3A;&amp;#x4E86;&amp;#x8C03;&amp;#x8BD5; Android &amp;#x8BBE;&amp;#x5907;&amp;#x548C; Android &amp;#x6A21;&amp;#x62DF;&amp;#x5668;&amp;#x5B9E;&amp;#x4F8B;&amp;#x800C;&amp;#x5199;&amp;#x7684;&amp;#x8C03;&amp;#x8BD5;&amp;#x5DE5;&amp;#x5177;&amp;#x3002;&amp;#x6574;&amp;#x4E2A; ADB &amp;#x5206;&amp;#x4E3A; 3 &amp;#x4E2A;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;ADB Server&amp;#xFF0C;ADB Client &amp;#x548C; ADB Daemon(adbd)&amp;#x3002;ADB Server &amp;#x662F;&amp;#x5728;&amp;#x4E3B;&amp;#x673A;&amp;#x4E0A;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x5904;&amp;#x7406; ADB Client &amp;#x548C; ADB Daemon &amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&amp;#x5E73;&amp;#x5E38;&amp;#x6240;&amp;#x7528;&amp;#x7684; &lt;code&gt;adb kill-server&lt;/code&gt; &amp;#x5C31;&amp;#x662F;kill&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;ADB Client &amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x7EC8;&amp;#x7AEF;&amp;#x91CC;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x5904;&amp;#x7406;&amp;#x7528;&amp;#x6237;&amp;#x8F93;&amp;#x5165;&amp;#xFF0C;&amp;#x5E76;&amp;#x548C; ADB Server &amp;#x901A;&amp;#x4FE1;&amp;#x3002;&amp;#x901A;&amp;#x5E38; ADB Client &amp;#x548C; ADB Server &amp;#x4F1A;&amp;#x7F16;&amp;#x8BD1;&amp;#x5230;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6; adb&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;&amp;#x8FD0;&amp;#x884C; adb &amp;#x547D;&amp;#x4EE4;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F1A;&amp;#x4E3B;&amp;#x52A8;&amp;#x68C0;&amp;#x6D4B;&amp;#x662F;&amp;#x5426;&amp;#x6709; ADB Server &amp;#x8FD9;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x6709;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x9ED8;&amp;#x8BA4;&amp;#x540E;&amp;#x53F0;&amp;#x8FD0;&amp;#x884C; ADB Server&amp;#x3002;ADB Daemon &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD0;&amp;#x884C;&amp;#x5728; Android &amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x7684;&amp;#x5B88;&amp;#x62A4;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x548C; ADB Server &amp;#x8FDB;&amp;#x884C;&amp;#x901A;&amp;#x4FE1;&amp;#xFF0C;&amp;#x5E76;&amp;#x7ED9;&amp;#x4E3B;&amp;#x673A;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x7CFB;&amp;#x5217;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5E73;&amp;#x5E38;&amp;#x7684;&amp;#x5F00;&amp;#x53D1;&amp;#x4E2D;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x78B0;&amp;#x5230;&amp;#x4E00;&amp;#x4E9B; Android &amp;#x8BBE;&amp;#x5907;&amp;#x65E0;&amp;#x6CD5;&amp;#x901A;&amp;#x8FC7; adb &amp;#x53BB;&amp;#x8FDE;&amp;#x63A5;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x5206;&amp;#x6790;&amp;#x4E24;&amp;#x79CD;&amp;#x5E38;&amp;#x89C1;&amp;#x7684;&amp;#x8FDE;&amp;#x63A5;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;&amp;#x8BBE;&amp;#x5907;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;device-not-found&quot;&gt;&lt;a href=&quot;#&amp;#x8BBE;&amp;#x5907;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;-device-not-found&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8BBE;&amp;#x5907;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;(device not found)&quot;&gt;&lt;/a&gt;&amp;#x8BBE;&amp;#x5907;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;(device not found)&lt;/h2&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C;&amp;#x73B0;&amp;#x8C61;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x7528;USB&amp;#x628A;Android&amp;#x8BBE;&amp;#x5907;&amp;#x548C;&amp;#x4E3B;&amp;#x673A;&amp;#x8FDE;&amp;#x63A5;&amp;#x5728;&amp;#x4E00;&amp;#x8D77;&amp;#xFF0C;&amp;#x4F46;&lt;code&gt;adb devices&lt;/code&gt;&amp;#x5374;&amp;#x65E0;&amp;#x6CD5;&amp;#x6B63;&amp;#x5E38;&amp;#x8BC6;&amp;#x522B;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&lt;code&gt;lsusb&lt;/code&gt;&amp;#x547D;&amp;#x4EE4;&amp;#x5374;&amp;#x53C8;&amp;#x80FD;&amp;#x591F;&amp;#x770B;&amp;#x5230;&amp;#x8BE5;USB&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x539F;&amp;#x56E0;&amp;#x4E00;&amp;#x822C;&amp;#x662F; ADB &amp;#x4E0D;&amp;#x8BC6;&amp;#x522B;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x7684; VenderID&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x65B0;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A; &lt;code&gt;$HOME/.android/adb_usb.ini&lt;/code&gt; &amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x628A;&amp;#x6211;&amp;#x4EEC; USB &amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x7684; VenderID &amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x8BE5;&amp;#x6587;&amp;#x4EF6;&amp;#x91CC;&amp;#xFF0C;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E00;&amp;#x884C;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x8FD0;&amp;#x884C; &lt;code&gt;adb kill-server&lt;/code&gt; &amp;#x628A; ADB Server &amp;#x5E72;&amp;#x6389;&amp;#x3002;&amp;#x4E4B;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x80FD;&amp;#x591F;&amp;#x6B63;&amp;#x5E38;&amp;#x4F7F;&amp;#x7528; ADB &amp;#x8FDE;&amp;#x63A5;&amp;#x5230;&amp;#x8BE5; Android &amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5173;&amp;#x4E8E;&amp;#x8FD9;&amp;#x80CC;&amp;#x540E;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x7EC6;&amp;#x8282;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x4ECE; ADB &amp;#x5B9E;&amp;#x73B0;&amp;#x6E90;&amp;#x7801;&amp;#x4E2D;&amp;#x627E;&amp;#x5230;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x73B0;&amp;#x5728;&amp;#x624B;&amp;#x4E0A;&amp;#x6709; Android &amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; system/core/adb &amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x627E;&amp;#x5230; ADB &amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&amp;#x5728; ADB &amp;#x68C0;&amp;#x6D4B;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A; USB &amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528; transport_usb.c:is_adb_interface &amp;#x51FD;&amp;#x6570;&amp;#x3002;&amp;#x901A;&amp;#x8FC7;&amp;#x6BD4;&amp;#x5BF9;&amp;#x6BD4;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x7684; USB &amp;#x534F;&amp;#x8BAE;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;VenderID &amp;#x7B49;&amp;#x5B57;&amp;#x6BB5;&amp;#xFF0C;&amp;#x6765;&amp;#x68C0;&amp;#x6D4B;&amp;#x8BE5; USB &amp;#x8BBE;&amp;#x5907;&amp;#x662F;&amp;#x5426;&amp;#x652F;&amp;#x6301; ADB &amp;#x8FDE;&amp;#x63A5;&amp;#x3002;&amp;#x800C;&amp;#x6240;&amp;#x7528;&amp;#x7684; VenderID &amp;#x90FD;&amp;#x662F;&amp;#x5728; usb_vendors.c:usb_vendors_init &amp;#x51FD;&amp;#x6570;&amp;#x91CC;&amp;#x751F;&amp;#x6210;&amp;#x7684;&amp;#x3002;usb_venders_init &amp;#x51FD;&amp;#x6570;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x8BFB;&amp;#x53D6;&amp;#x5185;&amp;#x7F6E;&amp;#x7684; VenderID&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5224;&amp;#x65AD;&amp;#x662F;&amp;#x5426;&amp;#x5728;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x5B58;&amp;#x5728;&amp;#x4E00;&amp;#x4E2A; adb_usb.ini &amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5B58;&amp;#x5728;&amp;#xFF0C;&amp;#x5C31;&amp;#x628A;&amp;#x8BE5;&amp;#x6587;&amp;#x4EF6;&amp;#x91CC;&amp;#x7684; VenderID &amp;#x4E5F;&amp;#x52A0;&amp;#x8FDB;&amp;#x6765;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x7684; Android &amp;#x8BBE;&amp;#x5907;&amp;#x4E0D;&amp;#x5728;&amp;#x5185;&amp;#x7F6E;&amp;#x7684; VenderID &amp;#x4E4B;&amp;#x5217;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EA;&amp;#x80FD;&amp;#x5728; adb_usb.ini &amp;#x6587;&amp;#x4EF6;&amp;#x91CC;&amp;#x624B;&amp;#x52A8;&amp;#x6DFB;&amp;#x52A0;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6CA1;&amp;#x6743;&amp;#x9650;permission-denied&amp;#x6743;&amp;#x9650;&amp;#x4E0D;&amp;#x8DB3;insufficient-permission&quot;&gt;&lt;a href=&quot;#&amp;#x6CA1;&amp;#x6743;&amp;#x9650;-permission-denied-&amp;#x6743;&amp;#x9650;&amp;#x4E0D;&amp;#x8DB3;-insufficient-permission&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6CA1;&amp;#x6743;&amp;#x9650;(permission denied)/&amp;#x6743;&amp;#x9650;&amp;#x4E0D;&amp;#x8DB3;(insufficient permission)&quot;&gt;&lt;/a&gt;&amp;#x6CA1;&amp;#x6743;&amp;#x9650;(permission denied)/&amp;#x6743;&amp;#x9650;&amp;#x4E0D;&amp;#x8DB3;(insufficient permission)&lt;/h2&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x6BD4;&amp;#x8F83;&amp;#x5E38;&amp;#x89C1;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x8FD9;&amp;#x79CD;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C; ADB &amp;#x53EF;&amp;#x4EE5;&amp;#x53D1;&amp;#x73B0;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x4F46;&amp;#x7531;&amp;#x4E8E; LINUX &amp;#x7CFB;&amp;#x7EDF;&amp;#x6743;&amp;#x9650;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x65E0;&amp;#x6CD5;&amp;#x5728;&amp;#x5F53;&amp;#x524D;&amp;#x7528;&amp;#x6237;&amp;#x4E0B;&amp;#x6253;&amp;#x5F00;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&amp;#x4E8E;&amp;#x662F;&amp;#x5C31;&amp;#x6709;&amp;#x4E86;&amp;#x6CA1;&amp;#x6743;&amp;#x9650;&amp;#x7684;&amp;#x4E00;&amp;#x8BF4;&amp;#x3002;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x5176;&amp;#x5B9E;&amp;#x8DDF; ADB &amp;#x5173;&amp;#x7CFB;&amp;#x4E0D;&amp;#x5927;&amp;#xFF0C;&amp;#x89E3;&amp;#x51B3;&amp;#x601D;&amp;#x8DEF;&amp;#x4E00;&amp;#x822C;&amp;#x662F;&amp;#x7ED9;&amp;#x8BBE;&amp;#x5907;&amp;#x8282;&amp;#x70B9;&amp;#x6587;&amp;#x4EF6;&amp;#x5206;&amp;#x914D;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6743;&amp;#x9650;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x8BBE;&amp;#x7F6E; udev &amp;#x7684;&amp;#x89C4;&amp;#x5219;(/etc/udev/rules.d/)&amp;#xFF0C;&amp;#x8BA9; udev &amp;#x5728;&amp;#x53D1;&amp;#x73B0;&amp;#x8BE5;&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x81EA;&amp;#x52A8;&amp;#x5206;&amp;#x914D;&amp;#x6211;&amp;#x4EEC;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7684;&amp;#x6743;&amp;#x9650;&amp;#x3002;udev &amp;#x7684;&amp;#x89C4;&amp;#x5219;&amp;#x8BED;&amp;#x6CD5;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SUBSYSTEM==&amp;quot;usb&amp;quot;, ATTR{idVendor}==&amp;quot;18d1&amp;quot;, ATTR{idProduct}==&amp;quot;4e12&amp;quot;, MODE=&amp;quot;0600&amp;quot;, OWNER=&amp;quot;username&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7B80;&amp;#x5355;&amp;#x7C97;&amp;#x66B4;&amp;#x7684;&amp;#x7528;chmod&amp;#x547D;&amp;#x4EE4;&amp;#x4E34;&amp;#x65F6;&amp;#x6539;&amp;#x53D8; /dev/bus/usb/ &amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x8282;&amp;#x70B9;&amp;#x6743;&amp;#x9650;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x6309;&amp;#x7167;&amp;#x4E0A;&amp;#x9762;&amp;#x505A;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x4E0D;&amp;#x884C;&amp;#x3002;&amp;#x8BF7;&amp;#x628A; udev &amp;#x670D;&amp;#x52A1;&amp;#x91CD;&amp;#x542F;&amp;#xFF0C;&amp;#x628A; ADB Server &amp;#x8FDB;&amp;#x7A0B;&amp;#x91CD;&amp;#x542F;&amp;#xFF0C;&amp;#x628A; USB &amp;#x91CD;&amp;#x63D2;&amp;#x4E00;&amp;#x904D;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C;&amp;#x5C31;&amp;#x80FD;&amp;#x89E3;&amp;#x51B3;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x8FD8;&amp;#x4E0D;&amp;#x80FD;&amp;#x89E3;&amp;#x51B3;&amp;#xFF0C;&amp;#x6211;&amp;#x89C9;&amp;#x5F97;&amp;#x4F60;&amp;#x8BE5;&amp;#x68C0;&amp;#x67E5;&amp;#x4F60;&amp;#x7684; USB &amp;#x7EBF;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ADB&quot;&gt;&lt;a href=&quot;#ADB&quot; class=&quot;headerlink&quot; title=&quot;ADB&quot;&gt;&lt;/a&gt;ADB&lt;/h2&gt;&lt;p&gt;ADB(Android Debug Bridge) 是 Google 为了调试 Android 设备和 Android 模拟器实例而写的调试工具。整个 ADB 分为 3 个部分，ADB Server，ADB Client 和 ADB Daemon(adbd)。ADB Server 是在主机上运行的一个进程，用来处理 ADB Client 和 ADB Daemon 之间的通信。平常所用的 &lt;code&gt;adb kill-server&lt;/code&gt; 就是kill这个进程。ADB Client 就是我们在终端里运行的程序，用于处理用户输入，并和 ADB Server 通信。通常 ADB Client 和 ADB Server 会编译到同一个可执行文件 adb，所以在运行 adb 命令时，会主动检测是否有 ADB Server 这个进程，如果没有，就会默认后台运行 ADB Server。ADB Daemon 是一个运行在 Android 客户端的守护进程，用于和 ADB Server 进行通信，并给主机提供一系列的服务。&lt;/p&gt;
&lt;p&gt;在我们平常的开发中，可能会碰到一些 Android 设备无法通过 adb 去连接。这里分析两种常见的连接错误。&lt;/p&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.miopeco.com/categories/android/"/>
    
    
      <category term="android" scheme="http://blog.miopeco.com/tags/android/"/>
    
      <category term="adb" scheme="http://blog.miopeco.com/tags/adb/"/>
    
  </entry>
  
  <entry>
    <title>剖析触摸屏上的电容按键</title>
    <link href="http://blog.miopeco.com/2014/08/12/android_cap_touch/"/>
    <id>http://blog.miopeco.com/2014/08/12/android_cap_touch/</id>
    <published>2014-08-11T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;&amp;#x786C;&amp;#x4EF6;&amp;#x8BBE;&amp;#x8BA1;&quot;&gt;&lt;a href=&quot;#&amp;#x786C;&amp;#x4EF6;&amp;#x8BBE;&amp;#x8BA1;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x786C;&amp;#x4EF6;&amp;#x8BBE;&amp;#x8BA1;&quot;&gt;&lt;/a&gt;&amp;#x786C;&amp;#x4EF6;&amp;#x8BBE;&amp;#x8BA1;&lt;/h2&gt;&lt;p&gt;&amp;#x5F53;&amp;#x524D;&amp;#xFF0C;&amp;#x79FB;&amp;#x52A8;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E0A;&amp;#x7684;&amp;#x6309;&amp;#x952E;&amp;#x5927;&amp;#x90E8;&amp;#x5206;&amp;#x90FD;&amp;#x662F;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x3002;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x57FA;&amp;#x672C;&amp;#x539F;&amp;#x7406;&amp;#x8DDF;&amp;#x7535;&amp;#x5BB9;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;&amp;#x611F;&amp;#x77E5;&amp;#x88AB;&amp;#x89E6;&amp;#x6478;&amp;#x65F6;&amp;#xFF0C;&amp;#x7535;&amp;#x6781;&amp;#x4E4B;&amp;#x95F4;&amp;#x7535;&amp;#x5BB9;&amp;#x503C;&amp;#x7684;&amp;#x53D8;&amp;#x5316;&amp;#xFF0C;&amp;#x6765;&amp;#x5224;&amp;#x65AD;&amp;#x5F53;&amp;#x524D;&amp;#x662F;&amp;#x5426;&amp;#x6709;&amp;#x89E6;&amp;#x6478;&amp;#x52A8;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/p-cap-button.jpg&quot; alt=&quot;c-cap button&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x629B;&amp;#x5F00;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#xFF0C;&amp;#x5E02;&amp;#x9762;&amp;#x4E0A;&amp;#x5927;&amp;#x90E8;&amp;#x5206;&amp;#x72EC;&amp;#x7ACB;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x8BBE;&amp;#x8BA1;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;RC&amp;#x4E32;&amp;#x8054;&amp;#x7535;&amp;#x8DEF;(&amp;#x5982;&amp;#x56FE;1)&amp;#xFF0C;VCC&amp;#x4E00;&amp;#x7AEF;&amp;#x4E0D;&amp;#x65AD;&amp;#x53D1;&amp;#x51FA;&amp;#x626B;&amp;#x63CF;&amp;#x8109;&amp;#x51B2;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7535;&amp;#x8DEF;&amp;#x4E2D;&amp;#x7535;&amp;#x5BB9;C1&amp;#x91CD;&amp;#x590D;&amp;#x5145;&amp;#x653E;&amp;#x7535;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x5728;A&amp;#x70B9;&amp;#x5F15;&amp;#x8D77;&amp;#x7535;&amp;#x538B;&amp;#x53D8;&amp;#x5316;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x6709;&amp;#x89E6;&amp;#x6478;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5F15;&amp;#x8D77;&amp;#x7535;&amp;#x5BB9;&amp;#x503C;&amp;#x589E;&amp;#x52A0;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x5F15;&amp;#x8D77;&amp;#x5145;&amp;#x653E;&amp;#x7535;&amp;#x5468;&amp;#x671F;&amp;#x53D8;&amp;#x957F;&amp;#x3002;&amp;#x82E5;&amp;#x628A;&amp;#x6709;&amp;#x89E6;&amp;#x6478;&amp;#x65F6;&amp;#xFF0C;&amp;#x7535;&amp;#x5BB9;C1&amp;#x5145;&amp;#x653E;&amp;#x7535;&amp;#x5468;&amp;#x671F;&amp;#x4E3A;T1&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;&amp;#x89E6;&amp;#x6478;&amp;#x65F6;&amp;#xFF0C;&amp;#x5468;&amp;#x671F;&amp;#x4E3A;T0&amp;#x3002;&amp;#x5219;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T1 &amp;gt; T0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECE;&amp;#x800C;&amp;#x80FD;&amp;#x591F;&amp;#x5224;&amp;#x65AD;&amp;#x51FA;&amp;#xFF0C;&amp;#x5F53;&amp;#x524D;&amp;#x662F;&amp;#x5426;&amp;#x6709;&amp;#x89E6;&amp;#x6478;&amp;#x52A8;&amp;#x4F5C;&amp;#x3002;&amp;#x8FD9;&amp;#x79CD;&amp;#x8BBE;&amp;#x8BA1;&amp;#x5728;&amp;#x5F53;&amp;#x524D;&amp;#x666E;&amp;#x901A;&amp;#x5BB6;&amp;#x7535;&amp;#x63A7;&amp;#x5236;&amp;#x9762;&amp;#x677F;&amp;#x4E0A;&amp;#x5F88;&amp;#x5E38;&amp;#x89C1;&amp;#xFF0C;&amp;#x8010;&amp;#x7528;&amp;#xFF0C;&amp;#x4E0D;&amp;#x6613;&amp;#x635F;&amp;#x574F;&amp;#xFF0C;&amp;#x8BBE;&amp;#x8BA1;&amp;#x7B80;&amp;#x5355;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x56DE;&amp;#x5230;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5927;&amp;#x73AF;&amp;#x5883;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x57FA;&amp;#x672C;&amp;#x539F;&amp;#x7406;&amp;#x7684;&amp;#x76F8;&amp;#x4F3C;&amp;#x6027;&amp;#xFF0C;&amp;#x73B0;&amp;#x6709;&amp;#x7684;&amp;#x6309;&amp;#x952E;&amp;#x8BBE;&amp;#x8BA1;&amp;#x90FD;&amp;#x6CA1;&amp;#x6709;&amp;#x7528;&amp;#x72EC;&amp;#x7ACB;&amp;#x7684;&amp;#x626B;&amp;#x63CF;&amp;#x7535;&amp;#x8DEF;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x4ECE;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x91CC;&amp;#xFF0C;&amp;#x62C9;&amp;#x51FA;&amp;#x4E00;&amp;#x6761;&amp;#x9A71;&amp;#x52A8;&amp;#x901A;&amp;#x9053;&amp;#x7528;&amp;#x4F5C;&amp;#x6309;&amp;#x952E;&amp;#x516C;&amp;#x5171;&amp;#x7AEF;(VCC&amp;#x811A;)&amp;#xFF0C;&amp;#x5E76;&amp;#x628A;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x53E6;&amp;#x4E00;&amp;#x7AEF;(A&amp;#x811A;)&amp;#x8FDE;&amp;#x63A5;&amp;#x5230;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x7684;&amp;#x611F;&amp;#x5E94;&amp;#x901A;&amp;#x9053;&amp;#x4E0A;&amp;#x3002;&amp;#x4ECE;&amp;#x800C;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x91CC;&amp;#x6269;&amp;#x5C55;&amp;#x51FA;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#xFF0C;&amp;#x5E76;&amp;#x7531;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x63A7;&amp;#x5236;IC&amp;#x6765;&amp;#x68C0;&amp;#x6D4B;&amp;#x6309;&amp;#x952E;&amp;#x662F;&amp;#x5426;&amp;#x88AB;&amp;#x89E6;&amp;#x6478;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x91CC;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x79CD;&amp;#x6269;&amp;#x5C55;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x662F;&amp;#x5B8C;&amp;#x5168;&amp;#x6CA1;&amp;#x6709;&amp;#x6309;&amp;#x952E;&amp;#x3002;&amp;#x76F4;&amp;#x63A5;&amp;#x628A;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x5E55;&amp;#x7684;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;(&amp;#x4E00;&amp;#x822C;&amp;#x662F;&amp;#x5E95;&amp;#x90E8;&amp;#xFF0C;30-40&amp;#x9AD8;&amp;#x5EA6;)&amp;#x7528;&amp;#x4F5C;&amp;#x6309;&amp;#x952E;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x5E76;&amp;#x5728;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x63A7;&amp;#x5236;IC&amp;#x7684;&amp;#x56FA;&amp;#x4EF6;&amp;#x91CC;&amp;#x5B9A;&amp;#x4E49;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6309;&amp;#x952E;&amp;#x533A;&amp;#x57DF;&amp;#x3002;&amp;#x5F53;&amp;#x89E6;&amp;#x6478;&amp;#x70B9;&amp;#x843D;&amp;#x5165;&amp;#x8FD9;&amp;#x4E2A;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x63A7;&amp;#x5236;IC&amp;#x5C31;&amp;#x628A;&amp;#x8FD9;&amp;#x6B21;&amp;#x89E6;&amp;#x6478;&amp;#x5F53;&amp;#x505A;&amp;#x6309;&amp;#x952E;&amp;#x52A8;&amp;#x4F5C;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x53EB;&amp;#x505A;&amp;#x865A;&amp;#x62DF;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#xFF0C;&amp;#x4E0A;&amp;#x9762;&amp;#x4ECB;&amp;#x7ECD;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x53EB;&amp;#x505A;&amp;#x72EC;&amp;#x7ACB;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x3002;&amp;#x865A;&amp;#x62DF;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x597D;&amp;#x5904;&amp;#x5C31;&amp;#x662F;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x5728;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x91CC;&amp;#x690D;&amp;#x5165;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x611F;&amp;#x5E94;&amp;#x7535;&amp;#x6781;&amp;#xFF0C;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x5236;&amp;#x4F5C;&amp;#x5382;&amp;#x5546;&amp;#x53EA;&amp;#x9700;&amp;#x5728;&amp;#x4E1D;&amp;#x5370;&amp;#x5DE5;&amp;#x5E8F;&amp;#x9636;&amp;#x6BB5;&amp;#xFF0C;&amp;#x5728;&amp;#x89C4;&amp;#x5B9A;&amp;#x7684;&amp;#x533A;&amp;#x57DF;&amp;#x5370;&amp;#x4E0A;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x6309;&amp;#x952E;&amp;#x5F62;&amp;#x72B6;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x8F6F;&amp;#x4EF6;&amp;#x5904;&amp;#x7406;&amp;#x57FA;&amp;#x4E8E;android&quot;&gt;&lt;a href=&quot;#&amp;#x8F6F;&amp;#x4EF6;&amp;#x5904;&amp;#x7406;-&amp;#x57FA;&amp;#x4E8E;Android&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8F6F;&amp;#x4EF6;&amp;#x5904;&amp;#x7406;(&amp;#x57FA;&amp;#x4E8E;Android)&quot;&gt;&lt;/a&gt;&amp;#x8F6F;&amp;#x4EF6;&amp;#x5904;&amp;#x7406;(&amp;#x57FA;&amp;#x4E8E;Android)&lt;/h2&gt;&lt;p&gt;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x4E0A;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x548C;&amp;#x72EC;&amp;#x7ACB;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x5171;&amp;#x6027;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x662F;&amp;#x4E24;&amp;#x8005;&amp;#x90FD;&amp;#x662F;&amp;#x7531;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x63A7;&amp;#x5236;IC&amp;#x6765;&amp;#x63A7;&amp;#x5236;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5176;&amp;#x5F80;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#x4E0A;&amp;#x62A5;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x683C;&amp;#x5F0F;&amp;#x4E5F;&amp;#x662F;&amp;#x7531;&amp;#x63A7;&amp;#x5236;IC&amp;#x51B3;&amp;#x5B9A;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h4 id=&quot;&amp;#x61D2;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#&amp;#x61D2;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x61D2;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;&amp;#x61D2;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&lt;/h4&gt;&lt;p&gt;&amp;#x63A7;&amp;#x5236;IC&amp;#x5BF9;&amp;#x6309;&amp;#x952E;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x4E5F;&amp;#x5206;&amp;#x4E3A;&amp;#x4E24;&amp;#x79CD;&amp;#xFF0C;&amp;#x4E00;&amp;#x79CD;&amp;#x662F;&amp;#x61D2;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x90FD;&amp;#x4E0D;&amp;#x505A;&amp;#xFF0C;&amp;#x628A;&amp;#x6309;&amp;#x952E;&amp;#x5F53;&amp;#x505A;&amp;#x89E6;&amp;#x6478;&amp;#x4E00;&amp;#x6837;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x4E0A;&amp;#x62A5;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7ED9;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#xFF0C;&amp;#x628A;&amp;#x6309;&amp;#x952E;&amp;#x89E3;&amp;#x6790;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5B8C;&amp;#x5168;&amp;#x63A8;&amp;#x7ED9;&amp;#x4E0A;&amp;#x5C42;&amp;#x8F6F;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x79CD;&amp;#x6A21;&amp;#x5F0F;&amp;#x4E0B;&amp;#xFF0C;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x7684;&amp;#x9A71;&amp;#x52A8;&amp;#x91CC;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x4E5F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x505A;&amp;#x4EC0;&amp;#x4E48;&amp;#x6309;&amp;#x952E;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x7EE7;&amp;#x7EED;&amp;#x628A;&amp;#x89E6;&amp;#x6478;&amp;#x5750;&amp;#x6807;&amp;#x5F80;Android&amp;#x4E0A;&amp;#x5C42;&amp;#x4F20;&amp;#x9012;&amp;#x3002;&amp;#x4E00;&amp;#x822C;&amp;#x4F1A;&amp;#x63D0;&amp;#x524D;&amp;#x5728;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#x5B9A;&amp;#x4E49;&amp;#x597D;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6309;&amp;#x952E;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x5E76;&amp;#x628A;&amp;#x8BE5;&amp;#x914D;&amp;#x7F6E;&amp;#x4FE1;&amp;#x606F;&amp;#x901A;&amp;#x8FC7;linux kernel&amp;#x7684;sysfs&amp;#x66B4;&amp;#x9732;&amp;#x7ED9;&amp;#x4E0A;&amp;#x5C42;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//&amp;#x6309;&amp;#x952E;&amp;#x6570;&amp;#x91CF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define TPD_KEY_COUNT   4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&amp;#x6309;&amp;#x952E;&amp;#x4E2D;&amp;#x5FC3;&amp;#x5750;&amp;#x6807;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define key_1           60,850&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define key_2           180,850&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define key_3           300,850&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define key_4           420,850&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&amp;#x6309;&amp;#x952E;&amp;#x7C7B;&amp;#x578B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define TPD_KEYS        {KEY_BACK, KEY_HOME, KEY_MENU, KEY_SEARCH}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&amp;#x6309;&amp;#x952E;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E2A;&amp;#x6570;&amp;#x5B57;&amp;#x5206;&amp;#x522B;&amp;#x8868;&amp;#x793A;&amp;#xFF1A;{X_CENTER, Y_CENTER, X_RANGE, Y_RANGE}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define TPD_KEYS_DIM    {{key_1,50,30},{key_2,50,30},{key_3,50,30},{key_4,50,30}}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5728;Android Native&amp;#x5C42;&amp;#xFF0C;frameworks/base/services/input/EventHub.cpp:loadVirtualKeyMapLocked&amp;#x4F1A;&amp;#x53BB;&amp;#x8BFB;&amp;#x53D6;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6309;&amp;#x952E;&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5B9A;&amp;#x4E49;&amp;#x5728;&amp;#x6E90;&amp;#x6587;&amp;#x4EF6;frameworks/base/libs/androidfw/VirtualKeyMap.cpp&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x5728;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x90FD;&amp;#x628A;&amp;#x6309;&amp;#x952E;&amp;#x89E3;&amp;#x6790;&amp;#x5DE5;&amp;#x4F5C;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9;&amp;#x4E0A;&amp;#x5C42;&amp;#x3002;&amp;#x5F53;&amp;#x624B;&amp;#x673A;&amp;#x5904;&amp;#x4E8E;factory mode&amp;#x548C;recovery mode&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;Android&amp;#x4E0A;&amp;#x5C42;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FD0;&amp;#x884C;&amp;#x8D77;&amp;#x6765;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#x8FD8;&amp;#x662F;&amp;#x5F97;&amp;#x505A;&amp;#x6309;&amp;#x952E;&amp;#x89E3;&amp;#x6790;&amp;#x5DE5;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x597D;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#&amp;#x597D;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x597D;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;&amp;#x597D;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&lt;/h3&gt;&lt;p&gt;&amp;#x89E6;&amp;#x63A7;IC&amp;#x7684;&amp;#x53E6;&amp;#x4E00;&amp;#x79CD;&amp;#x6A21;&amp;#x5F0F;&amp;#x662F;&amp;#x201C;&amp;#x597D;&amp;#x4EBA;&amp;#x6A21;&amp;#x5F0F;&amp;#x201D;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x6A21;&amp;#x5F0F;&amp;#x4E0B;&amp;#xFF0C;&amp;#x89E6;&amp;#x63A7;IC&amp;#x4F1A;&amp;#x4E13;&amp;#x95E8;&amp;#x5206;&amp;#x914D;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x6807;&amp;#x5FD7;&amp;#x4F4D;&amp;#x7ED9;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7535;&amp;#x5BB9;&amp;#x6309;&amp;#x952E;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x6807;&amp;#x793A;&amp;#x5F53;&amp;#x524D;&amp;#x6309;&amp;#x952E;&amp;#x72B6;&amp;#x6001;&amp;#x3002;&amp;#x9A71;&amp;#x52A8;&amp;#x5C42;&amp;#x8BFB;&amp;#x5230;&amp;#x8FD9;&amp;#x4E2A;&amp;#x72B6;&amp;#x6001;&amp;#x540E;&amp;#xFF0C;&amp;#x4E5F;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x5229;&amp;#x7528;input_report_key&amp;#x4E0A;&amp;#x62A5;keyevent&amp;#x7ED9;Android&amp;#x4E0A;&amp;#x5C42;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7ED3;&amp;#x8BED;&quot;&gt;&lt;a href=&quot;#&amp;#x7ED3;&amp;#x8BED;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7ED3;&amp;#x8BED;&quot;&gt;&lt;/a&gt;&amp;#x7ED3;&amp;#x8BED;&lt;/h2&gt;&lt;p&gt;&amp;#x5F53;&amp;#x7136;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x53EA;&amp;#x662F;&amp;#x6B63;&amp;#x5E38;&amp;#x6D41;&amp;#x7A0B;&amp;#x4E0B;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E9B;&amp;#x6709;&amp;#x7279;&amp;#x6B8A;&amp;#x9700;&amp;#x6C42;&amp;#x7684;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x9700;&amp;#x8981;&amp;#x89E6;&amp;#x63A7;IC&amp;#x56FA;&amp;#x4EF6;&amp;#x3001;&amp;#x89E6;&amp;#x6478;&amp;#x5C4F;&amp;#x9A71;&amp;#x52A8;&amp;#x548C;Android&amp;#x4E0A;&amp;#x5C42;&amp;#x4E09;&amp;#x8005;&amp;#x76F8;&amp;#x4E92;&amp;#x914D;&amp;#x5408;&amp;#xFF0C;&amp;#x5904;&amp;#x7406;&amp;#x60C5;&amp;#x51B5;&amp;#x4E5F;&amp;#x548C;&amp;#x8FD9;&amp;#x91CC;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x4E0D;&amp;#x4E00;&amp;#x6837;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;硬件设计&quot;&gt;&lt;a href=&quot;#硬件设计&quot; class=&quot;headerlink&quot; title=&quot;硬件设计&quot;&gt;&lt;/a&gt;硬件设计&lt;/h2&gt;&lt;p&gt;当前，移动终端上的按键大部分都是电容按键。电容按键的基本原理跟电容触摸屏是一样的，都是感知被触摸时，电极之间电容值的变化，来判断当前是否有触摸动作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/media/images/p-cap-button.jpg&quot; alt=&quot;c-cap button&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.miopeco.com/categories/android/"/>
    
    
      <category term="android" scheme="http://blog.miopeco.com/tags/android/"/>
    
      <category term="touchscreen" scheme="http://blog.miopeco.com/tags/touchscreen/"/>
    
  </entry>
  
  <entry>
    <title>在LINUX终端和VIM下复制粘贴</title>
    <link href="http://blog.miopeco.com/2014/07/21/paste_terminal_vim/"/>
    <id>http://blog.miopeco.com/2014/07/21/paste_terminal_vim/</id>
    <published>2014-07-20T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728; GUI &amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5F88;&amp;#x81EA;&amp;#x7531;&amp;#x7684;&amp;#x590D;&amp;#x5236;&amp;#x7C98;&amp;#x8D34;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x5728;&amp;#x5B57;&amp;#x7B26;&amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4E0D;&amp;#x5F97;&amp;#x4E0D;&amp;#x7528;&amp;#x9F20;&amp;#x6807;&amp;#x9009;&amp;#x5B9A;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5355;&amp;#x51FB;&amp;#x53F3;&amp;#x5065;&amp;#xFF0C;&amp;#x9009;&amp;#x62E9;&amp;#x590D;&amp;#x5236;&amp;#xFF0C;&amp;#x518D;&amp;#x5230;&amp;#x522B;&amp;#x5904;&amp;#x53BB; Ctrl-v&amp;#x3002;&amp;#x5E76;&amp;#x4E14;&amp;#x5BF9;&amp;#x4E8E;&amp;#x90A3;&amp;#x4E9B;&amp;#x7528;&amp;#x6CA1;&amp;#x6709;&amp;#x914D;&amp;#x7F6E;&amp;#x8FC7;&amp;#x7684; VIM &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;VIM &amp;#x7684;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x548C; X Window &amp;#x7684;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x8FD8;&amp;#x4E0D;&amp;#x5171;&amp;#x4EAB;&amp;#x3002;&amp;#x8FD9;&amp;#x5728;&amp;#x7801;&amp;#x5B57;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x611F;&amp;#x89C9;&amp;#x975E;&amp;#x5E38;&amp;#x4E0D;&amp;#x6D41;&amp;#x7545;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x5C1D;&amp;#x8BD5;&amp;#x89E3;&amp;#x51B3;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x5F97;&amp;#x8BA9; VIM &amp;#x548C; X Window &amp;#x5171;&amp;#x4EAB;&amp;#x4E00;&amp;#x4E2A;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x50CF;&amp;#x5728; GUI &amp;#x754C;&amp;#x9762;&amp;#x4E0B;&amp;#x4E00;&amp;#x6837;&amp;#x53BB;&amp;#x590D;&amp;#x5236;&amp;#x7C98;&amp;#x8D34;&amp;#x4E86;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684; VIM &amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6; .vimrc &amp;#x91CC;&amp;#x6DFB;&amp;#x52A0;&amp;#x8FD9;&amp;#x4E48;&amp;#x4E00;&amp;#x884C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set clipboard=unamedplus&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x884C;&amp;#x914D;&amp;#x7F6E;&amp;#x7684;&amp;#x610F;&amp;#x601D;&amp;#x662F;&amp;#x8BA9; VIM &amp;#x628A; &lt;code&gt;+&lt;/code&gt; &amp;#x8FD9;&amp;#x4E2A;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;(&amp;#x7C98;&amp;#x8D34;&amp;#x677F;)&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;&amp;#x5E73;&amp;#x5E38; yank &amp;#x548C; p &amp;#x64CD;&amp;#x4F5C;&amp;#x7684;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF0C;&amp;#x800C; &lt;code&gt;+&lt;/code&gt; &amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x5728; VIM &amp;#x91CC;&amp;#x5C31;&amp;#x662F;&amp;#x4EE3;&amp;#x8868; X Window &amp;#x7684;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x8BA9; VIM &amp;#x548C; X Window &amp;#x5171;&amp;#x4EAB;&amp;#x4E00;&amp;#x4E2A;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF0C;&amp;#x518D;&amp;#x4E5F;&amp;#x4E0D;&amp;#x7528;&amp;#x62C5;&amp;#x5FC3; VIM &amp;#x91CC;&amp;#x590D;&amp;#x5236;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#xFF0C;&amp;#x4E0D;&amp;#x80FD;&amp;#x5728; VIM &amp;#x5916;&amp;#x53BB;&amp;#x7C98;&amp;#x8D34;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x4E0B;&amp;#x8F7D;&amp;#x7684;&amp;#x662F;&amp;#x57FA;&amp;#x672C; VIM &amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x6309;&amp;#x7167;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x662F;&amp;#x65E0;&amp;#x6CD5;&amp;#x5B9E;&amp;#x73B0;&amp;#x9884;&amp;#x671F;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x7684;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A; VIM &amp;#x57FA;&amp;#x672C;&amp;#x7248;&amp;#x9ED8;&amp;#x8BA4;&amp;#x4E0D;&amp;#x652F;&amp;#x6301; X Window &amp;#x7684;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4F60;&amp;#x5F97;&amp;#x5B89;&amp;#x88C5; VIM &amp;#x5B8C;&amp;#x5168;&amp;#x7248;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x5DE8;&amp;#x578B;&amp;#x7248;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x6267;&amp;#x884C;&amp;#x5982;&amp;#x4E0B;&amp;#x547D;&amp;#x4EE4;&amp;#x53BB;&amp;#x5224;&amp;#x65AD;&amp;#x4F60;&amp;#x7684; VIM &amp;#x662F;&amp;#x5426;&amp;#x652F;&amp;#x6301; X Window &amp;#x7684;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim --version | grep clipboard&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C; clipboard &amp;#x548C; xterm_clipboard &amp;#x5E26;&amp;#x6709;&amp;#x52A0;&amp;#x53F7;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5C31;&amp;#x8868;&amp;#x793A;&amp;#x652F;&amp;#x6301;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x51CF;&amp;#x53F7;&amp;#x5C31;&amp;#x8868;&amp;#x793A;&amp;#x4E0D;&amp;#x652F;&amp;#x6301;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; Ubuntu &amp;#x4E0B;&amp;#x9762;&amp;#xFF0C;&amp;#x4F60;&amp;#x5E94;&amp;#x8BE5;&amp;#x5B89;&amp;#x88C5; vim-gnome&amp;#xFF0C;&amp;#x800C;&amp;#x5728; fedora &amp;#x4E0B;&amp;#x9762;&amp;#xFF0C;&amp;#x4F60;&amp;#x9700;&amp;#x8981;&amp;#x5B89;&amp;#x88C5; vim-X11&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x90FD;&amp;#x505A;&amp;#x5B8C;&amp;#x540E;&amp;#xFF0C;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0; VIM &amp;#x5728;&amp;#x6BCF;&amp;#x6B21;&amp;#x9000;&amp;#x51FA;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x90FD;&amp;#x4F1A;&amp;#x6E05;&amp;#x7A7A;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x60F3;&amp;#x8981;&amp;#x7684;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; VIM &amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x91CC;&amp;#x6DFB;&amp;#x52A0;&amp;#x4E0B;&amp;#x9762;&amp;#x4E00;&amp;#x884C;&amp;#x914D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x6765;&amp;#x8BA9; VIM &amp;#x5728;&amp;#x9000;&amp;#x51FA;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4FDD;&amp;#x7559;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x4E2D;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;autocmd VimLeave * call system(&amp;quot;xsel -ib&amp;quot;, getreg(&amp;apos;+&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x914D;&amp;#x7F6E;&amp;#x5176;&amp;#x5B9E;&amp;#x5C31;&amp;#x662F;&amp;#x5728; VIM &amp;#x6BCF;&amp;#x6B21;&amp;#x9000;&amp;#x51FA;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x8FD0;&amp;#x884C; xsel &amp;#x547D;&amp;#x4EE4;&amp;#x6765;&amp;#x628A;&lt;code&gt;+&lt;/code&gt;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668;&amp;#x4E2D;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x4E2A;&amp;#x914D;&amp;#x7F6E;&amp;#x8981;&amp;#x6C42;&amp;#x4F60;&amp;#x5B89;&amp;#x88C5; xsel&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#xFF0C;&amp;#x5047;&amp;#x8BBE;&amp;#x6211;&amp;#x4EEC;&amp;#x4ECE; VIM &amp;#x4E2D; yank &amp;#x4E00;&amp;#x4E9B;&amp;#x5185;&amp;#x5BB9;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x9000;&amp;#x51FA; VIM&amp;#xFF0C;&amp;#x7C98;&amp;#x8D34;&amp;#x5230;&amp;#x7EC8;&amp;#x7AEF;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x4E0A;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x80FD;&amp;#x8FD8;&amp;#x662F;&amp;#x5F97;&amp;#x62FF;&amp;#x8D77;&amp;#x9F20;&amp;#x6807;&amp;#xFF0C;&amp;#x53F3;&amp;#x952E;&amp;#x7C98;&amp;#x8D34;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x5728;&amp;#x5927;&amp;#x591A;&amp;#x6570; terminal &amp;#x4E2D;&amp;#x90FD;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x5FEB;&amp;#x6377;&amp;#x952E;&amp;#xFF1A; Ctrl-Shift-v&amp;#xFF0C;&amp;#x628A;&amp;#x5185;&amp;#x5BB9;&amp;#x7C98;&amp;#x8D34;&amp;#x5230;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x4E2D;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x89E3;&amp;#x51B3;&amp;#x4E86;&amp;#x5728;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E0B;&amp;#x9762;&amp;#x7C98;&amp;#x8D34;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x80FD;&amp;#x6709;&amp;#x4EBA;&amp;#x4F1A;&amp;#x95EE;&amp;#xFF0C;&amp;#x5728;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E0B;&amp;#x9762;&amp;#x590D;&amp;#x5236;&amp;#x600E;&amp;#x4E48;&amp;#x529E;&amp;#xFF1F;&amp;#x8FD9;&amp;#x4E2A;&amp;#xFF0C;&amp;#x6682;&amp;#x65F6;&amp;#x8FD8;&amp;#x6CA1;&amp;#x6709;&amp;#x627E;&amp;#x5230;&amp;#x5F88;&amp;#x6EE1;&amp;#x610F;&amp;#x7684;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在 GUI 界面下，我们可以很自由的复制粘贴。但是在字符界面下，我们不得不用鼠标选定，然后单击右健，选择复制，再到别处去 Ctrl-v。并且对于那些用没有配置过的 VIM 来说，VIM 的粘贴板和 X Window 的粘贴板还不共享。这在码字的过程中，感觉非常不流畅。下面，我们就尝试解决这个问题。&lt;/p&gt;
&lt;p&gt;首先我们得让 VIM 和 X Window 共享一个粘贴板，这样我们就可以像在 GUI 界面下一样去复制粘贴了。我们可以在自己的 VIM 配置文件 .vimrc 里添加这么一行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set clipboard=unamedplus&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="vim" scheme="http://blog.miopeco.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>批量清除条件编译代码</title>
    <link href="http://blog.miopeco.com/2014/04/01/unifdef/"/>
    <id>http://blog.miopeco.com/2014/04/01/unifdef/</id>
    <published>2014-03-31T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x8FD9;&amp;#x51E0;&amp;#x5929;&amp;#x5728;&amp;#x5DE5;&amp;#x4F5C;&amp;#x4E2D;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5728;&amp;#x4E00;&amp;#x4E2A;&amp;#x5927;&amp;#x4ED3;&amp;#x5E93;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6E05;&amp;#x9664;&amp;#x6240;&amp;#x6709; C &amp;#x4EE3;&amp;#x7801;&amp;#x91CC;&amp;#x7684;&amp;#x67D0;&amp;#x4E2A;&amp;#x6761;&amp;#x4EF6;&amp;#x7F16;&amp;#x8BD1;&amp;#x3002;&amp;#x5C31;&amp;#x50CF;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static struct xxx xxx_name {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef CONFIG_XXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .is_XXX = 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .is_XXX = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;&amp;#x628A;&amp;#x4EE3;&amp;#x7801;&amp;#x9884;&amp;#x5904;&amp;#x7406;&amp;#x4E00;&amp;#x822C;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x53C8;&amp;#x4E0D;&amp;#x80FD;&amp;#x4FEE;&amp;#x6539;&amp;#x5176;&amp;#x4ED6;&amp;#x5730;&amp;#x65B9;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x89E3;&amp;#x51B3;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x624B;&amp;#x52A8;&amp;#x6E05;&amp;#x9664;&amp;#x5F53;&amp;#x7136;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7684;&amp;#x3002;&amp;#x4F46;&amp;#x8FD9;&amp;#x80AF;&amp;#x5B9A;&amp;#x4E0D;&amp;#x662F;&amp;#x8FD9;&amp;#x7BC7; FAQ &amp;#x8981;&amp;#x8868;&amp;#x8FBE;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#x3002;&amp;#x91CD;&amp;#x590D;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x5F97;&amp;#x4EA4;&amp;#x7ED9;&amp;#x673A;&amp;#x5668;&amp;#x6765;&amp;#x5B8C;&amp;#x6210;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x8981;&amp;#x501F;&amp;#x52A9;&amp;#x5DE5;&amp;#x5177;&amp;#x5566;&amp;#x3002;&amp;#x6211;&amp;#x60F3;&amp;#x5230;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5DE5;&amp;#x5177;&amp;#x5C31;&amp;#x662F; &lt;code&gt;sed&lt;/code&gt; &amp;#x3002;&amp;#x901A;&amp;#x8FC7;&amp;#x5339;&amp;#x914D;&amp;#x6761;&amp;#x4EF6;&amp;#x7F16;&amp;#x8BD1;&amp;#x6307;&amp;#x4EE4;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x505A;&amp;#x5220;&amp;#x9664;&amp;#x52A8;&amp;#x4F5C;&amp;#x3002;&amp;#x6211;&amp;#x7528;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;find . -type f | xargs sed -i &amp;apos;/^#ifdef\ CONFIG_XXXX$/,/^#endif$/{d}&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x53EF;&amp;#x4EE5;&amp;#x5904;&amp;#x7406;&amp;#x4E00;&amp;#x822C;&amp;#x7684;&amp;#x6761;&amp;#x4EF6;&amp;#x7F16;&amp;#x8BD1;&amp;#x6307;&amp;#x4EE4;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5E76;&amp;#x4E0D;&amp;#x80FD;&amp;#x5904;&amp;#x7406;&amp;#x5E26; &lt;code&gt;#ifndef&lt;/code&gt; &amp;#xFF0C; &lt;code&gt;#else&lt;/code&gt; &amp;#x548C; &amp;#x6761;&amp;#x4EF6;&amp;#x7F16;&amp;#x8BD1;&amp;#x6307;&amp;#x4EE4;&amp;#x5D4C;&amp;#x5957;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x3002;&amp;#x5C31;&amp;#x50CF;&amp;#x8FD9;&amp;#x6837;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#ifndef CONFIG_XXXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// there are some codes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef CONFIG_XXX1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// code...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// code...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x60F3;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x590D;&amp;#x6742;&amp;#x7684; &lt;code&gt;sed&lt;/code&gt; &amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x89E3;&amp;#x51B3;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x66F4;&amp;#x503E;&amp;#x5411;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A;&amp;#x66F4;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x5DE5;&amp;#x5177;&amp;#xFF1A;&lt;code&gt;unifdef&lt;/code&gt;&amp;#x3002;&amp;#x4EE5; Ubuntu &amp;#x4E3A;&amp;#x4F8B;&amp;#xFF0C;&amp;#x5B89;&amp;#x88C5;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt-get install unifdef&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x5B83;&amp;#x7406;&amp;#x89E3;&amp;#x4E3A;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A; C/C++ &amp;#x7684;&amp;#x9884;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x3002;&amp;#x5B83;&amp;#x80FD;&amp;#x591F;&amp;#x975E;&amp;#x5E38;&amp;#x7B80;&amp;#x6D01;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x4E0A;&amp;#x9762;&amp;#x63D0;&amp;#x5230;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5355;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FD9;&amp;#x6837;&amp;#x7528;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;unifdef -K -U CONFIG_XXXX /path/to/file&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;-K &amp;#x662F;&amp;#x9632;&amp;#x6B62; unifdef &amp;#x5904;&amp;#x7406;&amp;#x4E00;&amp;#x4E9B;&amp;#x5E26;&amp;#x5E38;&amp;#x6570;&amp;#x7684;&amp;#x6761;&amp;#x4EF6;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982; &lt;code&gt;#if 0&lt;/code&gt;&amp;#x3002;-U &amp;#x5C31;&amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x67D0;&amp;#x4E2A;&amp;#x5B8F;&amp;#x662F; undefined&amp;#x3002;&lt;/p&gt;
&lt;p&gt;OK&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x77E5;&amp;#x9053;&amp;#x7528;&amp;#x4EC0;&amp;#x4E48;&amp;#x5DE5;&amp;#x5177;&amp;#x6765;&amp;#x505A;&amp;#x8FD9;&amp;#x4EF6;&amp;#x4E8B;&amp;#x4E86;&amp;#x3002;&amp;#x90A3;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A; Linux Kernel &amp;#x6E90;&amp;#x7801;&amp;#x4ED3;&amp;#x5E93;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x626B;&amp;#x63CF;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x5E76;&amp;#x627E;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x5B8F;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9; unifdef &amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#x3002;&amp;#x6211;&amp;#x7528;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filelist=`find . -name *.c -o -name *.h`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmpfile=`mktemp`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for file in $filelist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unifdef -K -U CONFIG_RECOVERY_KERNEL $file &amp;gt; $tmpfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cmp --silent $file $tmpfile || cp $tmpfile $file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -f tmpfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8D76;&amp;#x5FEB;&amp;#x5C1D;&amp;#x8BD5;&amp;#x4E00;&amp;#x4E0B;&amp;#x5427; :)&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这几天在工作中，需要在一个大仓库中，清除所有 C 代码里的某个条件编译。就像这样的代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static struct xxx xxx_name &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef CONFIG_XXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .is_XXX = 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .is_XXX = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这就相当于把代码预处理一般，但是又不能修改其他地方。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="条件编译" scheme="http://blog.miopeco.com/tags/%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91/"/>
    
      <category term="unifdef" scheme="http://blog.miopeco.com/tags/unifdef/"/>
    
  </entry>
  
  <entry>
    <title>Linux 系统调用</title>
    <link href="http://blog.miopeco.com/2013/09/12/linux_syscall/"/>
    <id>http://blog.miopeco.com/2013/09/12/linux_syscall/</id>
    <published>2013-09-11T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x662F;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5185;&amp;#x6838;&amp;#x63D0;&amp;#x4F9B;&amp;#x7ED9;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x4E00;&amp;#x7CFB;&amp;#x5217;API&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5E94;&amp;#x7528;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x6765;&amp;#x8BF7;&amp;#x6C42;&amp;#x64CD;&amp;#x4F5C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5185;&amp;#x6838;&amp;#x7BA1;&amp;#x7406;&amp;#x7684;&amp;#x8D44;&amp;#x6E90;[1]&amp;#x3002;&amp;#x672C;&amp;#x6587;&amp;#x5C1D;&amp;#x8BD5;&amp;#x5206;&amp;#x6790;&amp;#x5728;Linux&amp;#x4E0B;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x4F7F;&amp;#x7528;linux&amp;#x5185;&amp;#x6838;&amp;#x7ED9;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;API&amp;#xFF0C;&amp;#x5E76;&amp;#x5206;&amp;#x6790;&amp;#x5176;&amp;#x5B9E;&amp;#x73B0;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002; &lt;/p&gt;
&lt;h2 id=&quot;&amp;#x4E00;-&amp;#x7528;&amp;#x6237;&amp;#x6001;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#x3001;&amp;#x7528;&amp;#x6237;&amp;#x6001;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E00;&amp;#x3001;&amp;#x7528;&amp;#x6237;&amp;#x6001;&quot;&gt;&lt;/a&gt;&amp;#x4E00;&amp;#x3001;&amp;#x7528;&amp;#x6237;&amp;#x6001;&lt;/h2&gt;&lt;p&gt;&amp;#x4E0D;&amp;#x7BA1;&amp;#x6211;&amp;#x4EEC;&amp;#x662F;&amp;#x6253;&amp;#x5F00;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x63A5;&amp;#x6536;&amp;#x4E00;&amp;#x4E2A;socket&amp;#x5305;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x83B7;&amp;#x53D6;&amp;#x5F53;&amp;#x524D;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x8C03;&amp;#x7528;&amp;#x5185;&amp;#x6838;&amp;#x7ED9;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;API&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;strace&amp;#x8FD9;&amp;#x4E2A;&amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x6765;&amp;#x8DDF;&amp;#x8E2A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x51FD;&amp;#x6570;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x547D;&amp;#x4EE4;&amp;#x201D;strace whoami&amp;#x201D;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#x7ED3;&amp;#x679C;&amp;#xFF1A;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;execve(&amp;quot;/usr/bin/whoami&amp;quot;, [&amp;quot;whoami&amp;quot;], [/* 65 vars */]) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brk(0)                                  = 0x100f000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access(&amp;quot;/etc/ld.so.nohwcap&amp;quot;, F_OK)      = -1 ENOENT (No such file or directory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f8398cb2000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;open(&amp;quot;/usr/lib/locale/locale-archive&amp;quot;, O_RDONLY|O_CLOEXEC) = 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fstat(3, {st_mode=S_IFREG|0644, st_size=7212544, ...}) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mmap(NULL, 7212544, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f8397ff2000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;close(3)                                = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;geteuid()                               = 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;open(&amp;quot;/etc/passwd&amp;quot;, O_RDONLY|O_CLOEXEC) = 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lseek(3, 0, SEEK_CUR)                   = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;whoami&amp;#x9996;&amp;#x5148;&amp;#x8C03;&amp;#x7528;getuid&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5F53;&amp;#x524D;&amp;#x6709;&amp;#x6548;&amp;#x7528;&amp;#x6237;ID&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6253;&amp;#x5F00;&amp;#x201D;/etc/passwd&amp;#x201D;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5229;&amp;#x7528;&amp;#x4E4B;&amp;#x524D;&amp;#x83B7;&amp;#x53D6;&amp;#x5230;&amp;#x7684;&amp;#x7528;&amp;#x6237;ID&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7528;&amp;#x6237;&amp;#x540D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x6253;&amp;#x5370;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E0A;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5C31;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;execve, open, geteuid, read, write&amp;#x7B49;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5C31;&amp;#x610F;&amp;#x5473;&amp;#x7740;&amp;#x4E00;&amp;#x6B21;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x6001;&amp;#x7684;&amp;#x5207;&amp;#x6362;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x90FD;&amp;#x4F1A;&amp;#x548C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x4EE5;geteuid&amp;#x8FD9;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF0C;&amp;#x6765;&amp;#x8DDF;&amp;#x8E2A;&amp;#x6574;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5173;&amp;#x7CFB;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x81EA;&amp;#x5DF1;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E00;&amp;#x4E2A;&amp;#x8C03;&amp;#x7528;geteuid&amp;#x7684;&amp;#x5C0F;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x4EE3;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;sys/types.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main(void)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;current uid: %dn&amp;quot;, geteuid());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7F16;&amp;#x8BD1;&amp;#x6267;&amp;#x884C;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x8FD9;&amp;#x91CC;&amp;#x5F97;&amp;#x5230;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x662F;1000&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x5F53;&amp;#x524D;&amp;#x7528;&amp;#x6237;id&amp;#x4E3A;1000&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x67E5;&amp;#x770B;/usr/include/unistd.h&amp;#x5934;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x77E5;&amp;#x9053;geteuid&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728;libc&amp;#x4E2D;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5148;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x4E00;&amp;#x4E0B;libc&amp;#x8FD9;&amp;#x4E2A;&amp;#x5E93;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5199;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x6765;&amp;#x4ECE;&amp;#x4E00;&amp;#x4E2A;&amp;#x5171;&amp;#x4EAB;&amp;#x5E93;&amp;#x4E2D;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#file: dfunc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;########################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Global function&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;########################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;$1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show_usage()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;This is a script to disassemble specified function in a shared library.&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;Author: WEN Pingbo wengpingbo@gmail.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;Date: 2013/09/11&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;Usage: ./dfunc [-f function name] [-l library path] [-c shift number]&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	echo &amp;quot;Note: sometimes, you should using -c to disassemble more bytes because of alignments.&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;########################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Global function&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;########################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# default value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func_name=&amp;quot;fexecve&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target=&amp;quot;/lib/x86_64-linux-gnu/libc-2.15.so&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;caliberation=&amp;quot;0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ -n &amp;quot;$1&amp;quot; ] &amp;amp;&amp;amp; [ &amp;quot;$1&amp;quot; == &amp;quot;-h&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	show_usage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	exit 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# parse the argument&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arg_ok=&amp;quot;0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while [ -n &amp;quot;$1&amp;quot; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ &amp;quot;$1&amp;quot; == &amp;quot;-f&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	arg_ok=&amp;quot;1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if [ -n &amp;quot;$1&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	   	func_name=&amp;quot;$1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ &amp;quot;$1&amp;quot; == &amp;quot;-l&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	arg_ok=&amp;quot;1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if [ -n &amp;quot;$1&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		target=&amp;quot;$1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ &amp;quot;$1&amp;quot; == &amp;quot;-c&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	arg_ok=&amp;quot;1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if [ -n &amp;quot;$1&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		caliberation=&amp;quot;$1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ &amp;quot;$arg_ok&amp;quot; == &amp;quot;0&amp;quot; ] &amp;amp;&amp;amp; shift&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;arg_ok=&amp;quot;0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;offset=`readelf -s &amp;quot;$target&amp;quot; | grep &amp;quot; &amp;quot;$func_name&amp;quot;&amp;quot; | awk &amp;apos;{print $3}&amp;apos;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ -z &amp;quot;$offset&amp;quot; ] &amp;amp;&amp;amp; error &amp;quot;&amp;quot;$func_name&amp;quot; not found...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;offset=$(($offset + $caliberation))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# convert dec to hex&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;offset=`echo &amp;quot;obase=16; ibase=10; &amp;quot;$offset&amp;quot;&amp;quot; | bc`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;begin=`nm -D &amp;quot;$target&amp;quot; | grep &amp;quot; &amp;quot;$func_name&amp;quot;$&amp;quot; | awk &amp;apos;{print $1}&amp;apos;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end=`echo &amp;quot;obase=16; ibase=16; ${begin^^} + ${offset^^}&amp;quot; | bc`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;objdump -d --start-address=0x&amp;quot;$begin&amp;quot; --stop-address=0x&amp;quot;$end&amp;quot; &amp;quot;$target&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD0;&amp;#x884C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./dfunc -f geteuid&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x6307;&amp;#x4EE4;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mov    $0x6b,%eax&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;syscall&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;retq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5148;&amp;#x628A; 0x6b &amp;#x653E;&amp;#x5230;&amp;#x5BC4;&amp;#x5B58;&amp;#x5668; eax &amp;#x4E2D;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5C31;&amp;#x6267;&amp;#x884C;&amp;#x4E00;&amp;#x4E2A; syscall &amp;#x7684;&amp;#x6307;&amp;#x4EE4;&amp;#x3002;&amp;#x6700;&amp;#x540E;&amp;#x662F;&amp;#x8FD4;&amp;#x56DE;&amp;#x6307;&amp;#x4EE4;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;syscall &amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x6307;&amp;#x4EE4;&amp;#xFF1F;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684; syscall &amp;#x6307;&amp;#x4EE4;&amp;#x5C31;&amp;#x662F;&amp;#x5728; x86 &amp;#x67B6;&amp;#x6784;&amp;#x4E0B;&amp;#xFF0C;&amp;#x4E13;&amp;#x95E8;&amp;#x4E3A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x51C6;&amp;#x5907;&amp;#x7684;&amp;#x6307;&amp;#x4EE4;&amp;#xFF08;SYSCALL/SYSENTER and SYSRET/SYSEXIT&amp;#xFF09;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x90A3; 0x6b &amp;#x53C8;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&amp;#x8FD9;&amp;#x662F;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x53F7;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x533A;&amp;#x5206;&amp;#x5176;&amp;#x4ED6;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x662F;&amp;#x770B;&amp;#x5230;&amp;#x4E86;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x771F;&amp;#x771F;&amp;#x5B9E;&amp;#x73B0;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; glibc &amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#x4E2D;&amp;#x627E;&amp;#x5230;[2]&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x5728;glibc&amp;#x4E2D;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x53BB;&amp;#x5B9E;&amp;#x73B0;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x5BF9;&amp;#x4E0D;&amp;#x540C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x7684; wrapper&amp;#x3002;&amp;#x5728; sysdeps/unix/sysv/linux/syscalls.list &amp;#x4E0B;&amp;#xFF0C;&amp;#x5C31;&amp;#x5217;&amp;#x51FA;&amp;#x4E86;linux&amp;#x4E0B;&amp;#x9762;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x90E8;&amp;#x5206;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# File name Caller  Syscall name    Args    Strong name Weak names&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;getegid     -   getegid     Ei: __getegid   getegid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;geteuid     -   geteuid     Ei: __geteuid   geteuid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;getpgid     -   getpgid     i:i __getpgid   getpgid&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x6307;&amp;#x5B9A;&amp;#x4E86;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5185;&amp;#x90E8;&amp;#x5B9E;&amp;#x73B0;&amp;#x51FD;&amp;#x6570;&amp;#x540D;&amp;#xFF0C;&amp;#x4EE5;&amp;#x53CA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x540D;&amp;#x3002;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1; glibc &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;syscalls.list &amp;#x6587;&amp;#x4EF6;&amp;#x4F1A;&amp;#x88AB; sysdep/unix/make-syscalls.sh &amp;#x811A;&amp;#x672C;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x4F1A;&amp;#x5229;&amp;#x7528; sysdeps/unix/syscall-template.S &amp;#x8FD9;&amp;#x4E2A;&amp;#x6A21;&amp;#x677F;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6765;&amp;#x751F;&amp;#x6210;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528; wrapper &amp;#x7684;&amp;#x6C47;&amp;#x7F16;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x751F;&amp;#x6210;&amp;#x6211;&amp;#x4EEC;&amp;#x521A;&amp;#x624D;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x7684;&amp;#x90A3;&amp;#x6837;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;[3]&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x77E5;&amp;#x9053; geteuid() &amp;#x51FD;&amp;#x6570;&amp;#x6700;&amp;#x540E;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; syscall &amp;#x6307;&amp;#x4EE4;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x80FD;&amp;#x4E0D;&amp;#x80FD;&amp;#x8DF3;&amp;#x8FC7; glibc &amp;#x7684; wrapper&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528; linux &amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5462;&amp;#xFF1F;&amp;#x5728;&amp;#x4EE5;&amp;#x524D;&amp;#x7684;&amp;#x8001;&amp;#x7248;&amp;#x672C;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#xFF0C;&amp;#x786E;&amp;#x5B9E;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86; _syscall&amp;#xFF0C;_syscall0 &amp;#x7B49;&amp;#x5B8F;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x73B0;&amp;#x5728;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6CA1;&amp;#x6709;&amp;#x4E86;&amp;#x3002;&amp;#x53EA;&amp;#x4FDD;&amp;#x7559;&amp;#x4E86; glibc &amp;#x4E2D;&amp;#x7ED9;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684; syscall &amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5176;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x5728; /usr/include/unistd.h &amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#xFF0C;&amp;#x539F;&amp;#x578B;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;extern long int syscall (long int __sysno, ...) __THROW;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;syscall&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x548C;&amp;#x4E4B;&amp;#x524D;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x4EE3;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define _GNU_SOURCE         /* See feature_test_macros(7) */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;sys/syscall.h&amp;gt;   /* For SYS_xxx definitions */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main(void)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;current uid: %dn&amp;quot;, syscall(107));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;107&amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x521A;&amp;#x624D;&amp;#x5728;&amp;#x53CD;&amp;#x6C47;&amp;#x7F16;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#x770B;&amp;#x5230;&amp;#x7684;0x6b&amp;#x3002;&amp;#x800C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x4E5F;&amp;#x5728;&amp;#x5934;&amp;#x6587;&amp;#x4EF6;/usr/include/asm/unistd_64.h&amp;#x4E2D;&amp;#x627E;&amp;#x5230;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x4EEC;&amp;#x5305;&amp;#x542B;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x201D;syscall(__NR_geteuid)&amp;#x201D;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x548C;&amp;#x4E4B;&amp;#x524D;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x66F4;&amp;#x76F4;&amp;#x89C2;&amp;#x4E00;&amp;#x70B9;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x4EEC;&amp;#x60F3;&amp;#x5B8C;&amp;#x5168;&amp;#x8DF3;&amp;#x8FC7;glibc&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A;&amp;#x6C47;&amp;#x7F16;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BITS 64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;section .text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;global _start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_start:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mov rax,107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	syscall ;invoke geteuid()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mov rdi,0 ;return value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mov rax,60 ; _exit syscall&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	syscall&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x5982;&amp;#x4E0B;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x6765;&amp;#x7F16;&amp;#x8BD1;&amp;#x6267;&amp;#x884C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nasm -f elf64 test.asm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ld -s -o test test.o&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;strace ./test&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8C03;&amp;#x7528;&amp;#x8F93;&amp;#x51FA;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x80FD;&amp;#x901A;&amp;#x8FC7;strace&amp;#x6765;&amp;#x8DDF;&amp;#x8E2A;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x8FD0;&amp;#x884C;&amp;#x540E;&amp;#xFF0C;&amp;#x8F93;&amp;#x51FA;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;execve(&amp;quot;./test&amp;quot;, [&amp;quot;./test&amp;quot;], [/* 66 vars */]) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;geteuid()                               = 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_exit(0)                                = ?&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7; syscall &amp;#x8C03;&amp;#x7528;&amp;#x4E86; geteuid &amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E86;&amp;#x6B63;&amp;#x786E;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x662F; 64 &amp;#x4F4D;&amp;#x7684;&amp;#x7248;&amp;#x672C;&amp;#xFF0C;32 &amp;#x4F4D;&amp;#x7684; linux &amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x53F7;&amp;#x548C; 64 &amp;#x4F4D;&amp;#x7684;&amp;#x662F;&amp;#x4E0D;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; /usr/include/asm/unistd_32.h &amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x53F7;&amp;#x3002;&amp;#x5E76;&amp;#x4E14; 32 &amp;#x4F4D;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x7528; int 0x80 &amp;#x8F6F;&amp;#x4EF6;&amp;#x4E2D;&amp;#x65AD;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x5206;&amp;#x53D1;&amp;#xFF0C;&amp;#x800C; 64 &amp;#x4F4D;&amp;#x662F;&amp;#x901A;&amp;#x8FC7; syscall &amp;#x6307;&amp;#x4EE4;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x7684;&amp;#x3002; &lt;/p&gt;
&lt;h2 id=&quot;&amp;#x4E8C;-&amp;#x5185;&amp;#x6838;&amp;#x6001;&quot;&gt;&lt;a href=&quot;#&amp;#x4E8C;&amp;#x3001;&amp;#x5185;&amp;#x6838;&amp;#x6001;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E8C;&amp;#x3001;&amp;#x5185;&amp;#x6838;&amp;#x6001;&quot;&gt;&lt;/a&gt;&amp;#x4E8C;&amp;#x3001;&amp;#x5185;&amp;#x6838;&amp;#x6001;&lt;/h2&gt;&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x77E5;&amp;#x9053;&amp;#x4E86;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7A0B;&amp;#x5E8F;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x8C03;&amp;#x7528; linux &amp;#x5185;&amp;#x6838;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x771F;&amp;#x771F;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x5374;&amp;#x662F;&amp;#x5728; kernel &amp;#x4E2D;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x8FDB;&amp;#x5165; kernel &amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x6765;&amp;#x5206;&amp;#x6790;&amp;#x5177;&amp;#x4F53;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD8;&amp;#x8981;&amp;#x5F80; kernel &amp;#x4E2D;&amp;#x6DFB;&amp;#x52A0;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x8FD8;&amp;#x662F;&amp;#x4EE5; geteuid &amp;#x4E3A;&amp;#x4F8B;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x524D;&amp;#x7684; linux kernel &amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x662F;&amp;#x5728; arch/$(arch)/kernel/syscall_table.S &amp;#x6587;&amp;#x4EF6;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5728; 3.2 &amp;#x4EE5;&amp;#x540E;&amp;#xFF0C;&amp;#x5C31;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6539;&amp;#x53D8;&amp;#x4E86;&amp;#xFF0C;&amp;#x76F8;&amp;#x5173; patch &amp;#x53EF;&amp;#x4EE5;&amp;#x5230; lkml.org &amp;#x4E2D;&amp;#x627E;&amp;#x5230;[4]&amp;#x3002;x86 &amp;#x4E0B;&amp;#x6700;&amp;#x65B0;&amp;#x7684; syscall &amp;#x5B9A;&amp;#x4E49;&amp;#x5728;arch/x86/syscalls &amp;#x4E2D;&amp;#x3002;&amp;#x5176;&amp;#x4E2D;&amp;#x7684; syscall_64.tbl &amp;#x5C31;&amp;#x662F; 64 &amp;#x4F4D;&amp;#x4E0B;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x8868;&amp;#xFF0C;&amp;#x90E8;&amp;#x5206;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;106 common  setgid          sys_setgid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107 common  geteuid         sys_geteuid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108 common  getegid         sys_getegid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109 common  setpgid         sys_setpgid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110 common  getppid         sys_getppid&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x53D1;&amp;#x73B0; geteuid &amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x53F7;&amp;#x548C;&amp;#x4E4B;&amp;#x524D;&amp;#x662F;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#x3002;&amp;#x800C;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7; syscallhdr.sh &amp;#x548C;syscalltbl.sh &amp;#x4E24;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x8BFB;&amp;#x5165;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x8868;&amp;#xFF0C;&amp;#x6765;&amp;#x751F;&amp;#x6210;unistd_64.h&amp;#x548C;&amp;#x5176;&amp;#x4ED6;&amp;#x5934;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x800C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x521A;&amp;#x624D;&amp;#x5728;&amp;#x7CFB;&amp;#x7EDF;&amp;#x91CC;&amp;#x770B;&amp;#x5230;&amp;#x7684;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7; syscall_64.tbl &amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;geteuid&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x51FD;&amp;#x6570;&amp;#x662F;sys_geteuid&amp;#x3002;&amp;#x800C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x662F;&amp;#x5728;kernel/sys.c &amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6E90;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SYSCALL_DEFINE0(geteuid)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /* Only we change this so SMP safe */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return from_kuid_munged(current_user_ns(), current_euid());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D; SYSCALL_DEFINE0 &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B8F;&amp;#xFF0C;0&amp;#x4EE3;&amp;#x8868;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x4E0D;&amp;#x5E26;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&amp;#x8FD9;&amp;#x4E9B;&amp;#x5B8F;&amp;#x7684;&amp;#x5B9A;&amp;#x4E49;&amp;#x5728;include/linux/syscalls.h&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x77E5;&amp;#x9053;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5229;&amp;#x7528;kernel&amp;#x7ED9;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;SYSCALL_DEFINEn&amp;#x5B8F;&amp;#x6765;&amp;#x6DFB;&amp;#x52A0;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5E76;&amp;#x628A;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;syscall_64.tbl&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6BCF;&amp;#x6B21;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x3002;&amp;#x6E90;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SYSCALL_DEFINE1(mysyscall, char __user *, str)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char tmp[] = &amp;quot;strings from kernel&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if(copy_to_user(str, tmp, 19))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -EFAULT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x51FD;&amp;#x6570; mysyscall &amp;#x5E26;&amp;#x4E00;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6CE8;&amp;#x610F;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x4E2D;&amp;#x95F4;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x9017;&amp;#x53F7;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;syscall_64.tbl&amp;#x4E2D;&amp;#x6DFB;&amp;#x52A0;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;313 common    finit_module        sys_finit_module&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;314 common    mysyscall           sys_mysyscall&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x7F16;&amp;#x8BD1;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x5236;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#xFF0C;&amp;#x5E76;&amp;#x52A0;&amp;#x8F7D;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5185;&amp;#x6838;&amp;#x3002;&amp;#x7136;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x6765;&amp;#x8C03;&amp;#x7528;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x5199;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x6E90;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define _GNU_SOURCE         /* See feature_test_macros(7) */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;sys/syscall.h&amp;gt;   /* For SYS_xxx definitions */ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main(void)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	char str[19];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	syscall(314, str);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;str: %sn&amp;quot;, str);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD0;&amp;#x884C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x4F60;&amp;#x5E94;&amp;#x8BE5;&amp;#x4F1A;&amp;#x770B;&amp;#x5230; &amp;#x201C;str: strings from kernel&amp;#x201D;&amp;#x3002; &lt;/p&gt;
&lt;h2 id=&quot;&amp;#x4E09;-&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x52A0;&amp;#x901F;&quot;&gt;&lt;a href=&quot;#&amp;#x4E09;&amp;#x3001;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x52A0;&amp;#x901F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E09;&amp;#x3001;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x52A0;&amp;#x901F;&quot;&gt;&lt;/a&gt;&amp;#x4E09;&amp;#x3001;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x52A0;&amp;#x901F;&lt;/h2&gt;&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E94;&amp;#x8BE5;&amp;#x5F88;&amp;#x6E05;&amp;#x695A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x662F;&amp;#x600E;&amp;#x6837;&amp;#x4ECE;&amp;#x7528;&amp;#x6237;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4F20;&amp;#x9012;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#x7684;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x77E5;&amp;#x9053;&amp;#xFF0C;&amp;#x4ECE;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x9677;&amp;#x5165;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x6001;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x6602;&amp;#x8D35;&amp;#x7684;&amp;#x5207;&amp;#x6362;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C06;&amp;#x4F1A;&amp;#x4E25;&amp;#x91CD;&amp;#x62D6;&amp;#x6162;&amp;#x6574;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x8BBE;&amp;#x8BA1;&amp;#x521D;&amp;#x8877;&amp;#x5C31;&amp;#x662F;&amp;#x505A;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x95E8;&amp;#x536B;&amp;#xFF0C;&amp;#x53EA;&amp;#x8BA9;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8BBF;&amp;#x95EE;&amp;#x5B83;&amp;#x5E94;&amp;#x8BE5;&amp;#x8BBF;&amp;#x95EE;&amp;#x7684;&amp;#x8D44;&amp;#x6E90;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x662F;&amp;#x65E0;&amp;#x5BB3;&amp;#x7684;(&amp;#x6BD4;&amp;#x5982;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;&amp;#x65F6;&amp;#x95F4;)&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x80FD;&amp;#x591F;&amp;#x8BA9;&amp;#x8FD9;&amp;#x4E9B;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x5B58;&amp;#x5728;&amp;#x4E8E;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x4F1A;&amp;#x6781;&amp;#x5927;&amp;#x7684;&amp;#x51CF;&amp;#x5C11;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x6001;&amp;#x7684;&amp;#x5207;&amp;#x6362;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x63D0;&amp;#x9AD8;&amp;#x7CFB;&amp;#x7EDF;&amp;#x6027;&amp;#x80FD;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;Linux kernel &amp;#x4E2D;&amp;#xFF0C;&amp;#x6709; vdso &amp;#x548C; vsyscall &amp;#x7684;&amp;#x673A;&amp;#x5236;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x52A0;&amp;#x901F;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x4E24;&amp;#x8005;&amp;#x7684;&amp;#x57FA;&amp;#x672C;&amp;#x539F;&amp;#x7406;&amp;#x90FD;&amp;#x662F;&amp;#x628A;&amp;#x4E00;&amp;#x4E9B;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x653E;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E13;&amp;#x95E8;&amp;#x7684; page &amp;#x4E2D;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A; page &amp;#x6620;&amp;#x5C04;&amp;#x5230;&amp;#x7528;&amp;#x6237;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E0D;&amp;#x7528;&amp;#x5207;&amp;#x6362;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x6001;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8C03;&amp;#x7528;&amp;#x8FD9;&amp;#x4E9B;&amp;#x51FD;&amp;#x6570;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x7528;ldd&amp;#x67E5;&amp;#x770B;&amp;#x4EFB;&amp;#x610F;&amp;#x4E00;&amp;#x4E2A;&amp;#x52A8;&amp;#x6001;&amp;#x94FE;&amp;#x63A5;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x5E93;&amp;#x4F9D;&amp;#x8D56;&amp;#xFF0C;&amp;#x4F60;&amp;#x5C06;&amp;#x4F1A;&amp;#x53D1;&amp;#x53D1;&amp;#x73B0;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#x90FD;&amp;#x4F1A;&amp;#x4F9D;&amp;#x8D56;&amp;#x4E00;&amp;#x4E2A;linux-{vdso, gate}.so.1&amp;#x7684;&amp;#x5E93;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5E93;&amp;#x5374;&amp;#x6CA1;&amp;#x6709;&amp;#x4EFB;&amp;#x4F55;&amp;#x6587;&amp;#x4EF6;&amp;#x4E0E;&amp;#x4E4B;&amp;#x60F3;&amp;#x5173;&amp;#x8054;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x201D;ldd /bin/true&amp;#x201D;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;=&amp;gt;  (0x00007fff4e78e000)&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;libc.so.6 =&amp;amp;gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f01864b2000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/lib64/ld-linux-x86-64.so.2 (0x00007f0186894000)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;linux-vdso.so.1&amp;#x5C31;&amp;#x662F;&amp;#x4E4B;&amp;#x524D;&amp;#x6240;&amp;#x8BF4;&amp;#x7684;vdso&amp;#x673A;&amp;#x5236;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5E93;&amp;#x662F;&amp;#x5185;&amp;#x6838;&amp;#x865A;&amp;#x62DF;&amp;#x7684;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6620;&amp;#x5C04;&amp;#x5230;&amp;#x6240;&amp;#x6709;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&amp;#x4F60;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x67E5;&amp;#x770B;/proc/self/maps&amp;#x67E5;&amp;#x770B;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x201D;cat /proc/self/maps&amp;#x201D;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;00400000-0040b000 r-xp 00000000 08:03 22020229                           /bin/cat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0060a000-0060b000 r--p 0000a000 08:03 22020229                           /bin/cat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0060b000-0060c000 rw-p 0000b000 08:03 22020229                           /bin/cat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02267000-02288000 rw-p 00000000 00:00 0                                  [heap]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7fff31ccc000-7fff31ced000 rw-p 00000000 00:00 0                          [stack]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7fff31df2000-7fff31df3000 r-xp 00000000 00:00 0                          [vdso]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;vdso&amp;#x548C;vsyscall&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x3002;&amp;#x9700;&amp;#x8981;&amp;#x6307;&amp;#x51FA;&amp;#x7684;&amp;#x662F;vdso&amp;#x548C;vsyscall&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x7684;&amp;#x533A;&amp;#x522B;&amp;#x662F;vdso&amp;#x6620;&amp;#x5C04;&amp;#x5230;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x662F;&amp;#x968F;&amp;#x673A;&amp;#x7684;&amp;#xFF0C;&amp;#x800C;vsyscall&amp;#x786E;&amp;#x5B9E;&amp;#x56FA;&amp;#x5B9A;&amp;#x7684;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD0;&amp;#x884C;&amp;#x591A;&amp;#x6B21;&amp;#x201D;cat /proc/self/maps&amp;#x201D;&amp;#x6765;&amp;#x6BD4;&amp;#x8F83;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;vsyscall&amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x662F;&amp;#x56FA;&amp;#x5B9A;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x7ED9;&amp;#x5185;&amp;#x6838;&amp;#x7559;&amp;#x4E0B;&amp;#x4E00;&amp;#x4E2A;&amp;#x5DE8;&amp;#x5927;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x6EA2;&amp;#x51FA;&amp;#x6F0F;&amp;#x6D1E;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;&amp;#x6700;&amp;#x65B0;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#xFF0C;vsyscall&amp;#x5DF2;&amp;#x7ECF;&amp;#x9010;&amp;#x6E10;&amp;#x5E9F;&amp;#x9664;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x4F60;&amp;#x8FD8;&amp;#x662F;&amp;#x80FD;&amp;#x5728;&amp;#x5F88;&amp;#x591A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#xFF0C;&amp;#x770B;&amp;#x5230;&amp;#x4E24;&amp;#x8005;&amp;#x7684;&amp;#x5171;&amp;#x5B58;&amp;#xFF0C;&amp;#x8FD9;&amp;#x53EA;&amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x5411;&amp;#x540E;&amp;#x517C;&amp;#x5BB9;&amp;#x7F62;&amp;#x4E86;&amp;#x3002;&amp;#x5E76;&amp;#x4E14;&amp;#x6700;&amp;#x65B0;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#xFF0C;vsyscall&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6CA1;&amp;#x6709;&amp;#x4EFB;&amp;#x4F55;&amp;#x6307;&amp;#x4EE4;&amp;#x4E86;&amp;#xFF0C;&amp;#x53D6;&amp;#x4EE3;&amp;#x7684;&amp;#x662F;&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;trap&amp;#xFF0C;&amp;#x5F53;&amp;#x4EE5;&amp;#x524D;&amp;#x7684;&amp;#x8001;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8C03;&amp;#x7528;vsyscall&amp;#x91CC;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F1A;&amp;#x88AB;&amp;#x5BFC;&amp;#x5411;&amp;#x5230;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x5728;&amp;#x8BFB;&amp;#x53D6;vsyscall&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x53D1;&amp;#x73B0;&amp;#x91CC;&amp;#x9762;&amp;#x662F;&amp;#x7A7A;&amp;#x7684;[5]&amp;#x3002; &lt;/p&gt;
&lt;p&gt;vdso&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728;arch/x86/vdso&amp;#x4E2D;&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x7684;vdso.lds.S&amp;#x5C31;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x5177;&amp;#x4F53;&amp;#x52A0;&amp;#x901F;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x4F60;&amp;#x751A;&amp;#x81F3;&amp;#x53EF;&amp;#x4EE5;&amp;#x5F80;vdso&amp;#x6DFB;&amp;#x52A0;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x6DFB;&amp;#x52A0;&amp;#x65B9;&amp;#x6CD5;&amp;#x89C1;&amp;#x8FD9;&amp;#x91CC;[6]&amp;#x3002; &lt;/p&gt;
&lt;h2 id=&quot;reference&quot;&gt;&lt;a href=&quot;#REFERENCE&quot; class=&quot;headerlink&quot; title=&quot;REFERENCE&quot;&gt;&lt;/a&gt;REFERENCE&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;System Call: &lt;a href=&quot;http://en.wikipedia.org/wiki/System_calls&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://en.wikipedia.org/wiki/System_calls&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Glibc Wrapper: &lt;a href=&quot;https://sourceware.org/glibc/wiki/SyscallWrappers&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://sourceware.org/glibc/wiki/SyscallWrappers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Syscall: &lt;a href=&quot;http://www.ibm.com/developerworks/library/l-system-calls/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.ibm.com/developerworks/library/l-system-calls/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Kernel Syscalltbl: &lt;a href=&quot;https://lkml.org/lkml/2011/11/17/388&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://lkml.org/lkml/2011/11/17/388&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;vsyscall vs vdso: &lt;a href=&quot;http://lwn.net/Articles/446528/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://lwn.net/Articles/446528/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Customize vdso: &lt;a href=&quot;http://www.linuxjournal.com/content/creating-vdso-colonels-other-chicken&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.linuxjournal.com/content/creating-vdso-colonels-other-chicken&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;系统调用是系统内核提供给用户态程序的一系列API，这样应用程序就可以通过系统调用来请求操作系统内核管理的资源[1]。本文尝试分析在Linux下是如何使用linux内核给我们提供的API，并分析其实现过程。 &lt;/p&gt;
&lt;h2 id=&quot;一、用户态&quot;&gt;&lt;a href=&quot;#一、用户态&quot; class=&quot;headerlink&quot; title=&quot;一、用户态&quot;&gt;&lt;/a&gt;一、用户态&lt;/h2&gt;&lt;p&gt;不管我们是打开一个文件，接收一个socket包，还是获取当前进程信息，都需要调用内核给我们提供的API。这里，我们可以通过strace这个工具，来跟踪一个程序调用的系统函数。比如下面是命令”strace whoami”的输出结果：&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="syscall" scheme="http://blog.miopeco.com/tags/syscall/"/>
    
  </entry>
  
  <entry>
    <title>利用 QEMU 模拟嵌入式系统制作全过程</title>
    <link href="http://blog.miopeco.com/2013/08/31/linux_qemu_arm/"/>
    <id>http://blog.miopeco.com/2013/08/31/linux_qemu_arm/</id>
    <published>2013-08-30T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#xFF0C;&amp;#x5C06;&amp;#x4ECB;&amp;#x7ECD;&amp;#x5982;&amp;#x4F55;&amp;#x7528; QEMU &amp;#x6765;&amp;#x642D;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x57FA;&amp;#x4E8E; ARM &amp;#x7684;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F; Linux &amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x901A;&amp;#x8FC7;&amp;#x8BE5;&amp;#x6587;&amp;#x7AE0;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B66;&amp;#x4E60;&amp;#x5230;&amp;#x5982;&amp;#x4F55;&amp;#x914D;&amp;#x7F6E; Kernel&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x4EA4;&amp;#x53C9;&amp;#x7F16;&amp;#x8BD1; Kernel&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x914D;&amp;#x7F6E; busybox &amp;#x5E76;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x5236;&amp;#x4F5C; initramfs&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x5236;&amp;#x4F5C;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x5B9A;&amp;#x5236;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684; uboot&amp;#xFF0C;&amp;#x5982;&amp;#x4F55;&amp;#x901A;&amp;#x8FC7; uboot &amp;#x5411; kernel &amp;#x4F20;&amp;#x9012;&amp;#x53C2;&amp;#x6570;&amp;#x7B49;&amp;#x3002;&amp;#x5F00;&amp;#x59CB;&amp;#x5E72;&amp;#x6D3B;&amp;#xFF01;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x73AF;&amp;#x5883;&amp;#x642D;&amp;#x5EFA;&quot;&gt;&lt;a href=&quot;#&amp;#x73AF;&amp;#x5883;&amp;#x642D;&amp;#x5EFA;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x73AF;&amp;#x5883;&amp;#x642D;&amp;#x5EFA;&quot;&gt;&lt;/a&gt;&amp;#x73AF;&amp;#x5883;&amp;#x642D;&amp;#x5EFA;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x5B9E;&amp;#x73B0;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x642D;&amp;#x5EFA;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x73AF;&amp;#x5883;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x5047;&amp;#x8BBE;&amp;#x4F60;&amp;#x7684;&amp;#x4E3B;&amp;#x673A;&amp;#x4E0A;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6709; gcc &amp;#x672C;&amp;#x5730;&amp;#x7F16;&amp;#x8BD1;&amp;#x73AF;&amp;#x5883;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD0;&amp;#x884C; Ubuntu 12.10&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x5E76;&amp;#x4E0D;&amp;#x5F71;&amp;#x54CD;&amp;#x5728;&amp;#x5176;&amp;#x4ED6;&amp;#x7684; linux &amp;#x5E73;&amp;#x53F0;&amp;#x4E0A;&amp;#x8FDB;&amp;#x884C;&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x4FEE;&amp;#x6539;&amp;#x4E00;&amp;#x4E0B;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4E0B;&amp;#x8F7D;&amp;#x4E00;&amp;#x4E2A; ARM &amp;#x4EA4;&amp;#x53C9;&amp;#x5DE5;&amp;#x5177;&amp;#x94FE;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x7F51;&amp;#x4E0A;&amp;#x4E0B;&amp;#x8F7D;&amp;#x6E90;&amp;#x7801;&amp;#x81EA;&amp;#x5DF1;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E0B;&amp;#x8F7D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x7F16;&amp;#x8BD1;&amp;#x597D;&amp;#x7684;&amp;#x5DE5;&amp;#x5177;&amp;#x94FE;&amp;#x3002;&amp;#x5728;&amp;#x5DE5;&amp;#x5177;&amp;#x94FE;&amp;#x4E2D;&amp;#x6709;&amp;#x57FA;&amp;#x672C;&amp;#x7684; ARM &amp;#x7F16;&amp;#x8BD1;&amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;gcc, gdb, addr2line, nm, objcopy, objdump &amp;#x7B49;&amp;#x3002;&amp;#x53EF;&amp;#x80FD;&amp;#x4F60;&amp;#x4F1A;&amp;#x95EE;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x5DE5;&amp;#x5177;&amp;#x672C;&amp;#x673A;&amp;#x4E0D;&amp;#x662F;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6709;&amp;#x4E86;&amp;#x4E48;&amp;#xFF1F;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x51FA;&amp;#x610F;&amp;#x5916;&amp;#xFF0C;&amp;#x6211;&amp;#x60F3;&amp;#x4F60;&amp;#x7684;&amp;#x4E3B;&amp;#x673A;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F; x86 &amp;#x67B6;&amp;#x6784;&amp;#x7684;&amp;#x3002;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x67B6;&amp;#x6784;&amp;#xFF0C;&amp;#x6709;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x6307;&amp;#x4EE4;&amp;#x96C6;&amp;#xFF0C;&amp;#x4F60;&amp;#x4E0D;&amp;#x80FD;&amp;#x62FF;&amp;#x4E00;&amp;#x4E2A; x86 &amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#x653E;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A; ARM &amp;#x673A;&amp;#x5668;&amp;#x4E0A;&amp;#x6267;&amp;#x884C;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4E2A;&amp;#x80FD;&amp;#x591F;&amp;#x5728; x86 &amp;#x67B6;&amp;#x6784;&amp;#x4E0A;&amp;#x751F;&amp;#x6210; ARM &amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684; GCC &amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x3002;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#x9884;&amp;#x5148;&amp;#x7F16;&amp;#x8BD1;&amp;#x597D;&amp;#x7684; ARM &amp;#x5DE5;&amp;#x5177;&amp;#x94FE;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F; &lt;a href=&quot;https://sourcery.mentor.com/GNUToolchain/release2449&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CodeSourcery&lt;/a&gt; &amp;#x3002;&amp;#x66F4;&amp;#x591A;&amp;#x5173;&amp;#x4E8E; toolchain &amp;#x7684;&amp;#x4FE1;&amp;#x606F;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; &lt;a href=&quot;http://elinux.org/Toolchains&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;elinux.org&lt;/a&gt; &amp;#x627E;&amp;#x5230; &amp;#x3002;&amp;#x4E0B;&amp;#x8F7D;&amp;#x4E0B;&amp;#x6765;&amp;#x540E;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x89E3;&amp;#x538B;&amp;#xFF0C;&amp;#x653E;&amp;#x5230;&amp;#x67D0;&amp;#x4E2A;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x914D;&amp;#x7F6E;&amp;#x4E00;&amp;#x4E0B; PATH &amp;#x73AF;&amp;#x5883;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x914D;&amp;#x7F6E;&amp;#x7684;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export PATH=~/arm-2013.05/bin:$PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x914D;&amp;#x7F6E;&amp;#x5B8C; ARM &amp;#x4EA4;&amp;#x53C9;&amp;#x5DE5;&amp;#x5177;&amp;#x94FE;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4E0B;&amp;#x8F7D;&amp;#x4E00;&amp;#x4E9B;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x5E76;&amp;#x5B89;&amp;#x88C5;&amp;#x4E00;&amp;#x4E9B;&amp;#x8F6F;&amp;#x4EF6;&amp;#x3002;&lt;br&gt;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install qemu&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install qemu qemu-kvm qemu-kvm-extras qemu-user qemu-system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install mkimage tool&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install uboot-mkimage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install git&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# prepare related directory&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -pv ~/armsource/{kernel,uboot,ramfs,busybox}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# download latest kernel stable code to kernel dir&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; http://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git ~/armsource/kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# download latest u-boot code to uboot dir&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; git://git.denx.de/u-boot.git ~/armsource/uboot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# download latest busybox code to busybox dir&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; git://busybox.net/busybox.git ~/armsource/busybox&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;&amp;#x914D;&amp;#x7F6E;-kernel&quot;&gt;&lt;a href=&quot;#&amp;#x914D;&amp;#x7F6E;-Kernel&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x914D;&amp;#x7F6E; Kernel&quot;&gt;&lt;/a&gt;&amp;#x914D;&amp;#x7F6E; Kernel&lt;/h2&gt;&lt;p&gt;&amp;#x73AF;&amp;#x5883;&amp;#x642D;&amp;#x5EFA;&amp;#x5B8C;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x6B63;&amp;#x5F0F;&amp;#x8FDB;&amp;#x5165;&amp;#x4E3B;&amp;#x9898;&amp;#x4E86;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x914D;&amp;#x7F6E; kernel &amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x5E76;&amp;#x7528; qemu &amp;#x8FD0;&amp;#x884C;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684; kernel&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x80FD;&amp;#x591F;&amp;#x5BF9;&amp;#x6211;&amp;#x4EEC;&amp;#x7684; kernel &amp;#x8FDB;&amp;#x884C;&amp;#x6D4B;&amp;#x8BD5;&amp;#xFF0C;&amp;#x5E76;&amp;#x505A;&amp;#x51FA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4FEE;&amp;#x6539;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FDB;&amp;#x5165; kernel &amp;#x6E90;&amp;#x7801;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x627E;&amp;#x6700;&amp;#x65B0;&amp;#x7684; kernel &amp;#x7A33;&amp;#x5B9A;&amp;#x7248;&amp;#x672C;&amp;#x3002;&amp;#x5728;&amp;#x5199;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x6700;&amp;#x65B0;&amp;#x7684;&amp;#x7A33;&amp;#x5B9A;&amp;#x7248;&amp;#x672C;&amp;#x662F; 3.10.10&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; git &amp;#x5207;&amp;#x6362;&amp;#x5230; 3.10.10&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x6211;&amp;#x4EEC;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x9700;&amp;#x8981;&amp;#x8FD0;&amp;#x884C;&amp;#x5728; ARM &amp;#x4E0A;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5E94;&amp;#x8BE5;&amp;#x5230; arch/arm/configs &amp;#x4E0B;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x6211;&amp;#x4EEC;&amp;#x8BBE;&amp;#x5907;&amp;#x7684; kernel &amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x6CA1;&amp;#x6709;&amp;#x5B9E;&amp;#x9645;&amp;#x610F;&amp;#x4E49;&amp;#x4E0A;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x7528; qemu &amp;#x6A21;&amp;#x62DF;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5E94;&amp;#x8BE5;&amp;#x9009;&amp;#x62E9; qemu &amp;#x80FD;&amp;#x591F;&amp;#x6A21;&amp;#x62DF;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x9009;&amp;#x62E9;&amp;#x5E38;&amp;#x7528;&amp;#x7684; versatile_defconfig&amp;#x3002;&lt;br&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ~/armsource/kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# checkout a tag and create a branch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout v3.10.10 -b linux-3.10.10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create .config file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make versatile_defconfig ARCH=arm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x914D;&amp;#x7F6E;&amp;#x5B8C;&amp;#x4E86;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x7F16;&amp;#x8BD1;&amp;#x4E86;&amp;#x3002;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x591A;&amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6765;&amp;#x52A0;&amp;#x901F;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x7528;&amp;#x591A;&amp;#x5C11;&amp;#x4E2A;&amp;#x5C31;&amp;#x8981;&amp;#x770B;&amp;#x4F60;&amp;#x4E3B;&amp;#x673A;&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x7528; 12 &amp;#x4E2A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;make -j12 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4EA4;&amp;#x53C9;&amp;#x7F16;&amp;#x8BD1;&amp;#x73AF;&amp;#x5883;&amp;#x6CA1;&amp;#x6709;&amp;#x914D;&amp;#x7F6E;&amp;#x597D;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x4F1A;&amp;#x63D0;&amp;#x793A;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684; gcc &amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC; -j12 &amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x7F16;&amp;#x8BD1;&amp;#x7EBF;&amp;#x7A0B;&amp;#x4E3A; 12 &amp;#x4E2A;&amp;#xFF0C;ARCH &amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x76EE;&amp;#x6807;&amp;#x67B6;&amp;#x6784;&amp;#x4E3A; arm&amp;#xFF0C;&amp;#x6240;&amp;#x7528;&amp;#x7684;&amp;#x4EA4;&amp;#x53C9;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668; arm-none-linux-gnueabi-&amp;#x3002;&lt;/p&gt;
&lt;p&gt;OK&amp;#xFF0C;Kernel &amp;#x5DF2;&amp;#x7ECF;&amp;#x7F16;&amp;#x8BD1;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x7528; qemu &amp;#x628A;&amp;#x5B83;&amp;#x8DD1;&amp;#x8D77;&amp;#x6765;&amp;#x3002;&amp;#x5173;&amp;#x4E8E; qemu &amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x8BF7;&amp;#x770B; &lt;a href=&quot;http://qemu.weilnetz.de/qemu-doc.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;qemu&lt;/a&gt; &amp;#x7684;&amp;#x5B98;&amp;#x65B9;&amp;#x6587;&amp;#x6863;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x76F4;&amp;#x63A5;&amp;#x7ED9;&amp;#x51FA;&amp;#x547D;&amp;#x4EE4;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qemu-system-arm -M versatilepb -kernel arch/arm/boot/zImage -nographic&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC; -M &amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x6A21;&amp;#x62DF;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x8BBE;&amp;#x5907;&amp;#x578B;&amp;#x53F7;&amp;#xFF0C;versatile &amp;#x7CFB;&amp;#x5217;&amp;#x7684; pb &amp;#x7248;&amp;#x672C;&amp;#xFF0C;-kernel &amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x662F;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#xFF0C;-nographic &amp;#x662F;&amp;#x628A; qemu &amp;#x8F93;&amp;#x51FA;&amp;#x76F4;&amp;#x63A5;&amp;#x5BFC;&amp;#x5411;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x7EC8;&amp;#x7AEF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x597D;&amp;#xFF0C;&amp;#x547D;&amp;#x4EE4;&amp;#x6210;&amp;#x529F;&amp;#x6267;&amp;#x884C;&amp;#x4E86;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x597D;&amp;#x50CF;&amp;#x6CA1;&amp;#x6709;&amp;#x4EFB;&amp;#x4F55;&amp;#x6709;&amp;#x6548;&amp;#x8F93;&amp;#x51FA;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7; C-a x &amp;#x6765;&amp;#x9000;&amp;#x51FA; qemu&amp;#x3002;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684; kernel &amp;#x597D;&amp;#x50CF;&amp;#x4E0D;&amp;#x600E;&amp;#x4E48;&amp;#x597D;&amp;#x4F7F;&amp;#xFF0C;&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x80AF;&amp;#x5B9A;&amp;#x6709;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x6253;&amp;#x5F00; .config &amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x53D1;&amp;#x73B0;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9; kernel &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x6CA1;&amp;#x6709;&amp;#x6307;&amp;#x5B9A; console&amp;#xFF0C;&amp;#x96BE;&amp;#x602A;&amp;#x6CA1;&amp;#x6709;&amp;#x8F93;&amp;#x51FA;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4F4D;&amp;#x5230; CMDLINE&amp;#xFF0C;&amp;#x5E76;&amp;#x52A0;&amp;#x5165; console &amp;#x53C2;&amp;#x6570;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_CMDLINE=&amp;quot;console=ttyAMA0 root=/dev/ram0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4FDD;&amp;#x5B58; .config&amp;#xFF0C;&amp;#x91CD;&amp;#x65B0;&amp;#x7F16;&amp;#x8BD1; kernel&amp;#xFF0C;&amp;#x5E76;&amp;#x7528; qemu &amp;#x52A0;&amp;#x8F7D;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x7EC8;&amp;#x4E8E;&amp;#x6709;&amp;#x8F93;&amp;#x51FA;&amp;#x4E86;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x51FA;&amp;#x610F;&amp;#x5916;&amp;#xFF0C;kernel &amp;#x5E94;&amp;#x8BE5;&amp;#x4F1A;&amp;#x505C;&amp;#x5728;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x8DF3;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A; panic&amp;#x3002;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x4F1A;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF1F;&amp;#x56E0;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x538B;&amp;#x6839;&amp;#x5C31;&amp;#x6CA1;&amp;#x6709;&amp;#x7ED9;&amp;#x5B83;&amp;#x4F20;&amp;#x9012;&amp;#x8FC7;&amp;#xFF0C;&amp;#x5F53;&amp;#x7136;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x73B0;&amp;#x5728;&amp;#x662F;&amp;#x4E0D;&amp;#x662F;&amp;#x5E94;&amp;#x8BE5;&amp;#x5236;&amp;#x4F5C;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E86;&amp;#x3002;&amp;#x5148;&amp;#x522B;&amp;#x6025;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9;&amp;#x540E;&amp;#x9762;&amp;#x7684;&amp;#x8DEF;&amp;#x597D;&amp;#x8D70;&amp;#x4E00;&amp;#x70B9;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD9;&amp;#x91CC;&amp;#x8FD8;&amp;#x9700;&amp;#x5BF9;&amp;#x5185;&amp;#x6838;&amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x4E9B;&amp;#x914D;&amp;#x7F6E;&amp;#x3002;&amp;#x9996;&amp;#x5148;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x7528; ARM EABI &amp;#x53BB;&amp;#x7F16;&amp;#x8BD1; kernel&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x624D;&amp;#x80FD;&amp;#x8BA9; kernel &amp;#x8FD0;&amp;#x884C;&amp;#x6211;&amp;#x4EEC;&amp;#x4EA4;&amp;#x53C9;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#x90FD;&amp;#x662F;&amp;#x7528; gnueabi &amp;#x7684;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B; &lt;a href=&quot;http://en.wikipedia.org/wiki/Application_binary_interface&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wikipedia&lt;/a&gt; &amp;#x76F8;&amp;#x5173;&amp;#x9875;&amp;#x9762;&amp;#xFF0C;&amp;#x4F60;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x4E3A;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x7684; ABI&amp;#x3002;&amp;#x5176;&amp;#x6B21;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x628A;&amp;#x5BF9; kernel module &amp;#x7684;&amp;#x652F;&amp;#x6301;&amp;#x53BB;&amp;#x6389;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x9A71;&amp;#x52A8;&amp;#x90FD;&amp;#x7F16;&amp;#x8BD1;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x91CC;&amp;#xFF0C;&amp;#x65B9;&amp;#x4FBF;&amp;#x6211;&amp;#x4EEC;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x52A0;&amp;#x8F7D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x7136;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x80FD; kernel &amp;#x7684; debug &amp;#x9009;&amp;#x9879;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8C03;&amp;#x8BD5;&amp;#x5185;&amp;#x6838;&amp;#x4E86;&amp;#xFF0C;&amp;#x5E76;&amp;#x6253;&amp;#x5370;&amp;#x5F88;&amp;#x591A;&amp;#x8C03;&amp;#x8BD5;&amp;#x4FE1;&amp;#x606F;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x518D;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x6211;&amp;#x4E4B;&amp;#x524D;&amp;#x5199;&amp;#x7684;&amp;#x5173;&amp;#x4E8E; kernel &amp;#x8C03;&amp;#x8BD5;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x603B;&amp;#x7ED3;&amp;#x8D77;&amp;#x6765;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E00;&amp;#x6B21;&amp;#x6211;&amp;#x4EEC;&amp;#x5BF9; .config &amp;#x505A;&amp;#x4E86;&amp;#x5982;&amp;#x4E0B;&amp;#x4FEE;&amp;#x6539;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# CONFIG_MODULES is not set&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_AEABI=y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_OABI_COMPAT=y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_PRINTK_TIME=y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_EARLY_PRINTK=y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_CMDLINE=&amp;quot;earlyprintk console=ttyAMA0 root=/dev/ram0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;&amp;#x901A;&amp;#x8FC7;busybox&amp;#x5236;&amp;#x4F5C;initramfs&amp;#x955C;&amp;#x50CF;&quot;&gt;&lt;a href=&quot;#&amp;#x901A;&amp;#x8FC7;busybox&amp;#x5236;&amp;#x4F5C;initramfs&amp;#x955C;&amp;#x50CF;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x901A;&amp;#x8FC7;busybox&amp;#x5236;&amp;#x4F5C;initramfs&amp;#x955C;&amp;#x50CF;&quot;&gt;&lt;/a&gt;&amp;#x901A;&amp;#x8FC7;busybox&amp;#x5236;&amp;#x4F5C;initramfs&amp;#x955C;&amp;#x50CF;&lt;/h2&gt;&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x6CE8;&amp;#x610F;&amp;#x5230;&amp;#x4E86;&amp;#x4E4B;&amp;#x524D;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9; kernel &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; &lt;code&gt;root=/dev/ram0&lt;/code&gt; &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&amp;#x6CA1;&amp;#x9519;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;&amp;#x7ED9; kernel &amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;kernel &amp;#x68C0;&amp;#x67E5;&amp;#x5230;&amp;#x8FD9;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5230;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x52A0;&amp;#x8F7D;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x6267;&amp;#x884C;&amp;#x5176;&amp;#x4E2D;&amp;#x7684; init &amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x51FA;&amp;#x73B0;&amp;#x521A;&amp;#x624D;&amp;#x90A3;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x5C31;&amp;#x662F;&amp;#x8BA9; kernel &amp;#x6302;&amp;#x8F7D;&amp;#x6211;&amp;#x4EEC;&amp;#x7684; ramfs &amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5728;&amp;#x6267;&amp;#x884C; init &amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x8C03;&amp;#x7528; busybox &amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A; shell&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EF;&amp;#x7528;&amp;#x7684; shell &amp;#x6765;&amp;#x548C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8FDB;&amp;#x884C;&amp;#x4EA4;&amp;#x4E92;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6574;&amp;#x4E2A; ramfs &amp;#x4E2D;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; busybox &amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;a href=&quot;http://www.ibm.com/developerworks/library/l-busybox/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;busybox&lt;/a&gt; &amp;#x5C31;&amp;#x50CF;&amp;#x662F;&amp;#x4E00;&amp;#x628A;&amp;#x745E;&amp;#x58EB;&amp;#x519B;&amp;#x5200;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x5F88;&amp;#x591A; linux &amp;#x4E0B;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;(&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;cp, rm, whoami &amp;#x7B49;)&amp;#x5168;&amp;#x90E8;&amp;#x96C6;&amp;#x6210;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x8FD9;&amp;#x4E3A;&amp;#x5236;&amp;#x4F5C;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5F88;&amp;#x5927;&amp;#x7684;&amp;#x4FBF;&amp;#x5229;&amp;#xFF0C;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x4E0D;&amp;#x7528;&amp;#x5355;&amp;#x72EC;&amp;#x7F16;&amp;#x8BD1;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x8981;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x8FD8;&amp;#x4E0D;&amp;#x7528;&amp;#x8003;&amp;#x8651;&amp;#x5E93;&amp;#x7684;&amp;#x4F9D;&amp;#x8D56;&amp;#x5173;&amp;#x7CFB;&amp;#x3002;&amp;#x57FA;&amp;#x672C;&amp;#x4E0A;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x5236;&amp;#x4F5C;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x7684;&amp;#x9996;&amp;#x9009;&amp;#x5C31;&amp;#x662F; busybox&amp;#x3002;&lt;/p&gt;
&lt;p&gt;busybox &amp;#x4E5F;&amp;#x662F;&amp;#x91C7;&amp;#x7528; Kconfig &amp;#x6765;&amp;#x7BA1;&amp;#x7406;&amp;#x914D;&amp;#x7F6E;&amp;#x9009;&amp;#x9879;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x914D;&amp;#x7F6E;&amp;#x548C;&amp;#x7F16;&amp;#x8BD1; busybox &amp;#x548C; kernel &amp;#x6CA1;&amp;#x6709;&amp;#x591A;&amp;#x5927;&amp;#x533A;&amp;#x522B;&amp;#x3002;busybox &amp;#x5F88;&amp;#x7075;&amp;#x6D3B;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x7531;&amp;#x53D6;&amp;#x820D;&amp;#x4F60;&amp;#x60F3;&amp;#x8981;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x6DFB;&amp;#x52A0;&amp;#x4F60;&amp;#x81EA;&amp;#x5DF1;&amp;#x5199;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1; busybox &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x7B80;&amp;#x5355;&amp;#x7701;&amp;#x4E8B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD9;&amp;#x91CC;&amp;#x91C7;&amp;#x7528;&amp;#x9759;&amp;#x6001;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x4E0D;&amp;#x7528;&amp;#x4E3A; busybox &amp;#x51C6;&amp;#x5907;&amp;#x5176;&amp;#x4ED6; libc&amp;#xFF0C;ld &amp;#x7B49;&amp;#x4F9D;&amp;#x8D56;&amp;#x5E93;&amp;#x4E86;&amp;#x3002;&lt;br&gt;&amp;#x5177;&amp;#x4F53;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/armsource/busybox&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# using stable version 1.21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout origin/1_21_stable -b busybox-1.21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# using default configure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make defconfig ARCH=arm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# compile busybox in static&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make menuconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make -j12 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7F16;&amp;#x8BD1;&amp;#x5B8C;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x5F97;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A; busybox &amp;#x9759;&amp;#x6001;&amp;#x94FE;&amp;#x63A5;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4E2A; init &amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5C06;&amp;#x662F; kernel &amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x7528;&amp;#x6237;&amp;#x6001;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5B83;&amp;#x6765;&amp;#x4EA7;&amp;#x751F;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EF;&amp;#x4EA4;&amp;#x4E92;&amp;#x7684; shell&amp;#x3002;&amp;#x5728;&amp;#x684C;&amp;#x9762;&amp;#x7EA7;&amp;#x522B;&amp;#x7684; linux &amp;#x53D1;&amp;#x884C;&amp;#x7248;&amp;#x672C;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7684; init &amp;#x7A0B;&amp;#x5E8F;&amp;#x4E00;&amp;#x822C;&amp;#x662F; System V init(&amp;#x4F20;&amp;#x7EDF;&amp;#x7684; init)&amp;#xFF0C;upstart(ubuntu)&amp;#xFF0C;systemd(fedora) &amp;#x7B49;&amp;#x3002;busybox &amp;#x4E5F;&amp;#x5E26;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; init &amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x60F3;&amp;#x81EA;&amp;#x5DF1;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A;&amp;#x3002;&amp;#x65E2;&amp;#x7136;&amp;#x81EA;&amp;#x5DF1;&amp;#x5199;&amp;#xFF0C;&amp;#x90A3;&amp;#x6709;&amp;#x4E24;&amp;#x79CD;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x7528; C&amp;#x548C; libc &amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x5199;&amp;#x4E00;&amp;#x4E2A; shell &amp;#x811A;&amp;#x672C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x9009;&amp;#x62E9;&amp;#x540E;&amp;#x8005;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;###########################################################&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;## THis is a init script for initrd/initramfs ##&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;## Author: WEN Pingbo &amp;lt;wpb@meizu.com&amp;gt; ##&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;## Date: 2013/08/17 16:27:34 CST ##&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;###########################################################&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=&amp;quot;/bin:/sbin:/usr/bin:/usr/sbin&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ ! -f &amp;quot;/bin/busybox&amp;quot; ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;cat not find busybox in /bin dir, exit&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUSYBOX=&amp;quot;/bin/busybox&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;build root filesystem...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX --install -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ ! -d /proc ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;/proc dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mkdir /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;mount proc fs...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mount -t proc proc /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ ! -d /dev ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;/dev dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mkdir /dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# echo &amp;quot;mount tmpfs in /dev...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# $BUSYBOX mount -t tmpfs dev /dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mkdir -p /dev/pts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;mount devpts...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mount -t devpts devpts /dev/pts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ ! -d /sys ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;/sys dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mkdir /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;mount sys fs...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mount -t sysfs sys /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;/sbin/mdev&amp;quot; &amp;gt; /proc/sys/kernel/hotplug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;populate the dev dir...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX mdev -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;drop to shell...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$BUSYBOX sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;exit 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x4FDD;&amp;#x5B58;&amp;#x5728; &lt;code&gt;~/armsource&lt;/code&gt; &amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7; busybox &amp;#x2013;install -s &amp;#x6765;&amp;#x6784;&amp;#x5EFA;&amp;#x57FA;&amp;#x672C;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x6302;&amp;#x8F7D;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5C31;&amp;#x8C03;&amp;#x7528; busybox &amp;#x81EA;&amp;#x5E26;&amp;#x7684; shell&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x7F16;&amp;#x8BD1;&amp;#x597D;&amp;#x4E86; busybox&amp;#xFF0C;&amp;#x5E76;&amp;#x51C6;&amp;#x5907;&amp;#x597D;&amp;#x4E86;&amp;#x76F8;&amp;#x5E94;&amp;#x7684; init &amp;#x811A;&amp;#x672C;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x8003;&amp;#x8651;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x7ED3;&amp;#x6784;&amp;#x4E86;&amp;#x3002;kenel &amp;#x652F;&amp;#x6301;&amp;#x5F88;&amp;#x591A;&amp;#x79CD;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;ext4, ext3, ext2, cramfs, nfs, jffs2, reiserfs &amp;#x7B49;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5305;&amp;#x62EC;&amp;#x4E00;&amp;#x4E9B;&amp;#x4F2A;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;: sysfs, proc, ramfs &amp;#x7B49;&amp;#x3002;&amp;#x800C;&amp;#x5728; kernel &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5B8C;&amp;#x6210;&amp;#x540E;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5C1D;&amp;#x8BD5;&amp;#x6302;&amp;#x8F7D;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B83;&amp;#x6240;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x7ED3;&amp;#x6784;&amp;#x6807;&amp;#x51C6;&amp;#x662F; FHS&amp;#xFF0C;&amp;#x7531;&amp;#x4E00;&amp;#x4E9B; kernel &amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x5236;&amp;#x5B9A;&amp;#xFF0C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B; &lt;a href=&quot;http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wikipedia&lt;/a&gt; &amp;#x76F8;&amp;#x5173;&amp;#x9875;&amp;#x9762;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x5236;&amp;#x4F5C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#x7684; ramfs&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x53EA;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; busybox &amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x6CA1;&amp;#x5FC5;&amp;#x8981;&amp;#x8FC7;&amp;#x591A;&amp;#x7684;&amp;#x8003;&amp;#x8651;&amp;#x4EC0;&amp;#x4E48;&amp;#x6807;&amp;#x51C6;&amp;#x3002;&amp;#x53EA;&amp;#x9700;&amp;#x4E00;&amp;#x4E9B;&amp;#x5FC5;&amp;#x987B;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x7ED3;&amp;#x6784;&amp;#x5C31; OK&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x7ED3;&amp;#x6784;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2502;   &amp;#x251C;&amp;#x2500;&amp;#x2500; busybox&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2502;   &amp;#x2514;&amp;#x2500;&amp;#x2500; sh -&amp;gt; busybox&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2502;   &amp;#x2514;&amp;#x2500;&amp;#x2500; console&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; etc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2502;   &amp;#x2514;&amp;#x2500;&amp;#x2500; init.d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2502;   &amp;#x2514;&amp;#x2500;&amp;#x2500; rcS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; sbin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2514;&amp;#x2500;&amp;#x2500; usr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x251C;&amp;#x2500;&amp;#x2500; bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x2514;&amp;#x2500;&amp;#x2500; sbin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x5982;&amp;#x4E0B;&amp;#x547D;&amp;#x4EE4;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/armsource/ramfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -pv bin dev etc/init.d sbin user/{bin,sbin}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp ~/armsource/busybox/busybox bin/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln -s busybox bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mknod -m 644 dev/console c 5 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp ~/armsource/init .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;touch etc/init.d/rcS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod +x bin/busybox etc/init.d/rcS init&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x6709;&amp;#x4E86;&amp;#x57FA;&amp;#x672C;&amp;#x7684; initramfs&amp;#xFF0C;&amp;#x4E07;&amp;#x4E8B;&amp;#x5177;&amp;#x5907;&amp;#x4E86;&amp;#xFF0C;&amp;#x5C31;&amp;#x5DEE;&amp;#x70B9;&amp;#x4E1C;&amp;#x98CE;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E1C;&amp;#x98CE;&amp;#x5C31;&amp;#x662F;&amp;#x600E;&amp;#x6837;&amp;#x5236;&amp;#x4F5C; intramfs &amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x5E76;&amp;#x8BA9; kernel &amp;#x52A0;&amp;#x8F7D;&amp;#x5B83;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; kernel &amp;#x6587;&amp;#x6863;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5BF9; &lt;a href=&quot;http://wiki.sourcemage.org/HowTo(2f&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;initramfs&lt;/a&gt;Initramfs.html) &amp;#x548C; &lt;a href=&quot;http://www.ibm.com/developerworks/library/l-initrd/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;initrd&lt;/a&gt; &amp;#x6709;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;&amp;#x8BF4;&amp;#x660E;&amp;#x3002;initramfs &amp;#x5176;&amp;#x5B9E;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7528; gzip &amp;#x538B;&amp;#x7F29;&amp;#x7684; cpio &amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A; initramfs &amp;#x76F4;&amp;#x63A5;&amp;#x96C6;&amp;#x6210;&amp;#x5230; kernel &amp;#x91CC;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x5355;&amp;#x72EC;&amp;#x52A0;&amp;#x8F7D; initramfs&amp;#x3002;&amp;#x5728; kernel &amp;#x6E90;&amp;#x7801;&amp;#x7684; scripts &amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#xFF0C;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A; gen_initramfs_list.sh &amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x4E13;&amp;#x95E8;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x751F;&amp;#x6210; initramfs &amp;#x955C;&amp;#x50CF;&amp;#x548C; initramfs list &amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x5982;&amp;#x4E0B;&amp;#x65B9;&amp;#x5F0F;&amp;#x81EA;&amp;#x52A8;&amp;#x751F;&amp;#x6210; initramfs &amp;#x955C;&amp;#x50CF;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sh scripts/gen_initramfs_list.sh -o ramfs.gz ~/armsource/ramfs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x4FEE;&amp;#x6539; kernel &amp;#x7684; .config &amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x6765;&amp;#x5305;&amp;#x542B;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_INITRAMFS_SOURCE=&amp;quot;ramfs.gz&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x91CD;&amp;#x65B0;&amp;#x7F16;&amp;#x8BD1;&amp;#x540E;&amp;#xFF0C;kernel &amp;#x5C31;&amp;#x81EA;&amp;#x52A8;&amp;#x96C6;&amp;#x6210;&amp;#x4E86;&amp;#x4F60;&amp;#x5236;&amp;#x4F5C;&amp;#x7684; ramfs.gz&amp;#xFF0C;&amp;#x5E76;&amp;#x4F1A;&amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5B8C;&amp;#x6210;&amp;#x540E;&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x4EA7;&amp;#x751F;&amp;#x4E00;&amp;#x4E2A; shell&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528; gen_initramfs_list.sh &amp;#x811A;&amp;#x672C;&amp;#x751F;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x5217;&amp;#x8868;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x7136;&amp;#x540E; CONFIG_INITRAMFS_SOURCE &amp;#x4E2D;&amp;#x6307;&amp;#x5B9A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5217;&amp;#x8868;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x4F60;&amp;#x505A;&amp;#x7684;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x81EA;&amp;#x52A8;&amp;#x96C6;&amp;#x6210;&amp;#x5230; kernel &amp;#x91CC;&amp;#x9762;&amp;#x3002;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sh scripts/gen_initramfs_list.sh ~/armsource/ramfs &amp;gt; initramfs_list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x914D;&amp;#x7F6E;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CONFIG_INITRAMFS_SOURCE=&amp;quot;initramfs_list&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x91CC;&amp;#x5E76;&amp;#x4E0D;&amp;#x6253;&amp;#x7B97;&amp;#x8FD9;&amp;#x4E48;&amp;#x505A;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x624B;&amp;#x52A8;&amp;#x5236;&amp;#x4F5C; initramfs &amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5916;&amp;#x90E8;&amp;#x52A0;&amp;#x8F7D;&amp;#x3002;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/armsource/ramfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;find . | cpio -o -H newc | gzip -9 &amp;gt; ramfs.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x9009;&amp;#x9879; -H &amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x6307;&amp;#x5B9A;&amp;#x751F;&amp;#x6210;&amp;#x7684;&amp;#x683C;&amp;#x5F0F;&lt;/p&gt;
&lt;p&gt;&amp;#x624B;&amp;#x52A8;&amp;#x751F;&amp;#x6210; ramfs.gz &amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; qemu &amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x4E86;&amp;#xFF0C;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qemu-system-arm -M versatilepb -kernel arch/arm/boot/zImage -nographic -initrd ramfs.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8D77;&amp;#x6765;&amp;#x4E86;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x6B63;&amp;#x786E;&amp;#x6267;&amp;#x884C;&amp;#x4E86;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5DF1;&amp;#x5199;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x8FDB;&amp;#x5165;&amp;#x4E86; shell &amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x91CC;&amp;#x9762;&amp;#x6267;&amp;#x884C;&amp;#x57FA;&amp;#x672C;&amp;#x5E38;&amp;#x7528;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x3002;&amp;#x662F;&amp;#x4E0D;&amp;#x662F;&amp;#x6709;&amp;#x70B9;&amp;#x5C0F;&amp;#x5174;&amp;#x594B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x914D;&amp;#x7F6E;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&quot;&gt;&lt;a href=&quot;#&amp;#x914D;&amp;#x7F6E;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x914D;&amp;#x7F6E;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&quot;&gt;&lt;/a&gt;&amp;#x914D;&amp;#x7F6E;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/h2&gt;&lt;p&gt;&amp;#x4E0D;&amp;#x662F;&amp;#x5DF2;&amp;#x7ECF;&amp;#x914D;&amp;#x7F6E;&amp;#x4E86;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x52A0;&amp;#x8F7D;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8FD8;&amp;#x9700;&amp;#x8981;&amp;#x5207;&amp;#x6362;&amp;#x5462;&amp;#xFF1F;&amp;#x53EF;&amp;#x80FD;&amp;#x4F60;&amp;#x8FD8;&amp;#x6C89;&amp;#x6D78;&amp;#x5728;&amp;#x521A;&amp;#x624D;&amp;#x7684;&amp;#x5C0F;&amp;#x5174;&amp;#x594B;&amp;#x91CC;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x5F88;&amp;#x4E0D;&amp;#x5E78;&amp;#x7684;&amp;#x544A;&amp;#x8BC9;&amp;#x4F60;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x5236;&amp;#x4F5C;&amp;#x7684;&amp;#x5C0F; linux &amp;#x7CFB;&amp;#x7EDF;&amp;#x8FD8;&amp;#x4E0D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B8C;&amp;#x5168;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x6CA1;&amp;#x6709;&amp;#x5B8C;&amp;#x6210;&amp;#x57FA;&amp;#x672C;&amp;#x7684;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#xFF0C;&amp;#x5C3D;&amp;#x7BA1;&amp;#x770B;&amp;#x4E0A;&amp;#x53BB;&amp;#x597D;&amp;#x50CF;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B8C;&amp;#x6210;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; linux &amp;#x4E2D; initramfs &amp;#x548C; initrd &amp;#x53EA;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7528;&amp;#x4E8E;&amp;#x7CFB;&amp;#x7EDF;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7684;&amp;#x5C0F;&amp;#x578B;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x901A;&amp;#x5E38;&amp;#x7528;&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x4E00;&amp;#x4E9B;&amp;#x7B2C;&amp;#x4E09;&amp;#x65B9;&amp;#x7684;&amp;#x9A71;&amp;#x52A8;&amp;#x3002;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x9A71;&amp;#x52A8;&amp;#x5462;&amp;#xFF1F;&amp;#x56E0;&amp;#x4E3A;&amp;#x7531;&amp;#x4E8E;&amp;#x7248;&amp;#x6743;&amp;#x534F;&amp;#x8BAE;&amp;#x7684;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8981;&amp;#x628A;&amp;#x9A71;&amp;#x52A8;&amp;#x653E;&amp;#x5230; kernel &amp;#x91CC;&amp;#xFF0C;&amp;#x610F;&amp;#x5473;&amp;#x7740;&amp;#x4F60;&amp;#x5FC5;&amp;#x987B;&amp;#x8981;&amp;#x5F00;&amp;#x653E;&amp;#x6E90;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x6709;&amp;#x4E9B;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4E00;&amp;#x4E9B;&amp;#x5546;&amp;#x4E1A;&amp;#x516C;&amp;#x53F8;&amp;#x4E0D;&amp;#x60F3;&amp;#x5F00;&amp;#x6E90;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x90A3;&amp;#x5B83;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x628A;&amp;#x9A71;&amp;#x52A8;&amp;#x653E;&amp;#x5230; initramfs &amp;#x6216;&amp;#x8005; initrd&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x65E2;&amp;#x4E0D;&amp;#x8FDD;&amp;#x80CC; kernel &amp;#x7248;&amp;#x6743;&amp;#x534F;&amp;#x8BAE;&amp;#xFF0C;&amp;#x53C8;&amp;#x8FBE;&amp;#x5230;&amp;#x4E0D;&amp;#x5F00;&amp;#x6E90;&amp;#x7684;&amp;#x76EE;&amp;#x7684;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x5728;&amp;#x6B63;&amp;#x5E38;&amp;#x7684; linux &amp;#x53D1;&amp;#x884C;&amp;#x7248;&amp;#x672C;&amp;#x4E2D;&amp;#xFF0C;kernel &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5B8C;&amp;#x6210;&amp;#x540E;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5148;&amp;#x6302;&amp;#x8F7D; initramfs/initrd&amp;#xFF0C;&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x5176;&amp;#x4ED6;&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x5E76;&amp;#x505A;&amp;#x4E00;&amp;#x4E9B;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x8BBE;&amp;#x7F6E;&amp;#x3002;&amp;#x7136;&amp;#x540E;&amp;#x624D;&amp;#x4F1A;&amp;#x6302;&amp;#x8F7D;&amp;#x771F;&amp;#x771F;&amp;#x7684;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x4E00;&amp;#x4E2A; switch_root &amp;#x6765;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x6267;&amp;#x884C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x4E2A; init &amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D;&amp;#x5404;&amp;#x79CD;&amp;#x7528;&amp;#x6237;&amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2D;&amp;#x95F4;&amp;#xFF0C;linux kernel &amp;#x8DF3;&amp;#x4E86;&amp;#x4E24;&amp;#x4E0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x4ED6;&amp;#x4EEC;&amp;#x8DF3;&amp;#x4E86;&amp;#x4E24;&amp;#x4E0B;&amp;#xFF0C;&amp;#x90A3;&amp;#x6211;&amp;#x4EEC;&amp;#x4E5F;&amp;#x8DF3;&amp;#x4E24;&amp;#x4E0B;&amp;#x3002;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E0B;&amp;#x5DF2;&amp;#x7ECF;&amp;#x8DF3;&amp;#x4E86;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x662F;&amp;#x5236;&amp;#x4F5C;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x4FEE;&amp;#x6539; initramfs &amp;#x4E2D;&amp;#x7684; init &amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x6765;&amp;#x6302;&amp;#x8F7D;&amp;#x6211;&amp;#x4EEC;&amp;#x7269;&amp;#x7406;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5E76;&amp;#x5207;&amp;#x6362; root &amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x6267;&amp;#x884C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684; init&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x7701;&amp;#x4E8B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x628A;&amp;#x539F;&amp;#x5148;&amp;#x7684; initramfs &amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x590D;&amp;#x5236;&amp;#x4E00;&amp;#x4EFD;&amp;#xFF0C;&amp;#x5F53;&amp;#x4F5C;&amp;#x7269;&amp;#x7406;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x662F;&amp;#x6A21;&amp;#x62DF;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x5229;&amp;#x7528; dd &amp;#x6765;&amp;#x751F;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x78C1;&amp;#x76D8;&amp;#x955C;&amp;#x50CF;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dd if=/dev/zero of=~/armsource/hda.img bs=1 count=10M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkfs -t ext2 hda.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mount hda.img /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp -r ~/armsource/ramfs/* /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;umount /mnt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837; hda.img &amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x5236;&amp;#x4F5C;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;ext2 &amp;#x683C;&amp;#x5F0F;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4FEE;&amp;#x6539;&amp;#x539F;&amp;#x5148;&amp;#x5728; initramfs &amp;#x4E2D;&amp;#x7684; init &amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x8BA9;&amp;#x5176;&amp;#x901A;&amp;#x8FC7; busybox &amp;#x7684; switch_root &amp;#x529F;&amp;#x80FD;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x5728;&amp;#x5207;&amp;#x6362;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x65F6;&amp;#xFF0C;&amp;#x4E0D;&amp;#x80FD;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528; busybox &amp;#x7684; switch_root&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x9700;&amp;#x8981;&amp;#x901A;&amp;#x8FC7; exec &amp;#x6765;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x624D;&amp;#x80FD;&amp;#x8BA9;&amp;#x6700;&amp;#x7EC8;&amp;#x7684; init &amp;#x8FDB;&amp;#x7A0B; pid &amp;#x4E3A; 1&amp;#x3002;&lt;br&gt;&amp;#x4FEE;&amp;#x6539;&amp;#x540E;&amp;#x7684; init &amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;###########################################################&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;## THis is a init script for initrd/initramfs ##&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;## Author: WEN Pingbo &amp;lt;wpb@meizu.com&amp;gt; ##&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;## Date: 2013/08/17 16:27:34 CST ##&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;###########################################################&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=&lt;span class=&quot;string&quot;&gt;&amp;quot;/bin:/sbin:/usr/bin:/usr/sbin&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;/bin/busybox&amp;quot;&lt;/span&gt; ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;cat not find busybox in /bin dir, exit&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUSYBOX=&lt;span class=&quot;string&quot;&gt;&amp;quot;/bin/busybox&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;build root filesystem...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; --install &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /proc ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;/proc dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mkdir /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;mount proc fs...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mount -t proc proc /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;/dev dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mkdir /dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# echo &amp;quot;mount tmpfs in /dev...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# $BUSYBOX mount -t tmpfs dev /dev&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mkdir -p /dev/pts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;mount devpts...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mount -t devpts devpts /dev/pts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /sys ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;/sys dir not exist, create it...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mkdir /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;mount sys fs...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mount -t sysfs sys /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;/sbin/mdev&amp;quot;&lt;/span&gt; &amp;gt; /proc/sys/kernel/hotplug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;populate the dev dir...&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mdev &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;dev filesystem is ok now, log all in kernel kmsg&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;you can add some third part driver in this phase...&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;begin switch root directory to sd card&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mkdir /newroot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ ! -b &lt;span class=&quot;string&quot;&gt;&amp;quot;/dev/mmcblk0&amp;quot;&lt;/span&gt; ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;can not find /dev/mmcblk0, please make sure the sd \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;card is attached correctly!&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;drop to shell&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mount /dev/mmcblk0 /newroot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-eq&lt;/span&gt; 0 ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;mount root file system successfully...&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;failed to mount root file system, drop to shell&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# the root file system is mounted, clean the world for new root file system&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt; &amp;gt; /proc/sys/kernel/hotplug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; umount &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; umount &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; umount &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /dev/pts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# $BUSYBOX umount -f /dev&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;enter new root...&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; switch_root -c /dev/console /newroot /init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;enter new root file system failed, drop to shell&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /dev/kmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; mount -t proc proc /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$BUSYBOX&lt;/span&gt; sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; qemu &amp;#x6765;&amp;#x6302;&amp;#x8F7D; hda.img&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD9;&amp;#x91CC;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8BBE;&amp;#x5907;&amp;#x865A;&amp;#x62DF;&amp;#x4E3A; sd &amp;#x5361;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E0A;&amp;#x9762;&amp;#x7684; init &amp;#x811A;&amp;#x672C;&amp;#x6302;&amp;#x8F7D;&amp;#x7269;&amp;#x7406;&amp;#x6839;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x65F6;&amp;#xFF0C;&amp;#x662F;&amp;#x627E; /dev/mmcblk0 &amp;#x4E86;&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qemu-system-arm -M versatilepb -kernel arch/arm/boot/zImage -nographic -initrd ramfs.gz -sd hda.img&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x51FA;&amp;#x610F;&amp;#x5916;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#x8FD9;&amp;#x4E2A;&amp;#x81EA;&amp;#x5DF1;&amp;#x505A;&amp;#x7684; linux &amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x8C03;&amp;#x7528;&amp;#x4E24;&amp;#x4E2A; init &amp;#x811A;&amp;#x672C;&amp;#xFF0C;&amp;#x8DF3;&amp;#x5230;&amp;#x6700;&amp;#x7EC8;&amp;#x7684; hda.img &amp;#x4E0A;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x914D;&amp;#x7F6E;-uboot&amp;#x52A0;&amp;#x8F7D;-kernel&quot;&gt;&lt;a href=&quot;#&amp;#x914D;&amp;#x7F6E;-Uboot&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D;-Kernel&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x914D;&amp;#x7F6E; Uboot&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D; Kernel&quot;&gt;&lt;/a&gt;&amp;#x914D;&amp;#x7F6E; Uboot&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D; Kernel&lt;/h2&gt;&lt;p&gt;&amp;#x53EF;&amp;#x80FD;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x4F60;&amp;#x89C9;&amp;#x5F97;&amp;#xFF0C;&amp;#x7EC8;&amp;#x4E8E;&amp;#x628A;&amp;#x6574;&amp;#x4E2A;&amp;#x6D41;&amp;#x7A0B;&amp;#x8D70;&amp;#x4E86;&amp;#x4E00;&amp;#x904D;&amp;#x4E86;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5DEE;&amp;#x4E00;&amp;#x73AF;&amp;#x3002;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x662F;&amp;#x901A;&amp;#x8FC7; qemu &amp;#x6765;&amp;#x76F4;&amp;#x63A5;&amp;#x52A0;&amp;#x8F7D;&amp;#x6211;&amp;#x4EEC;&amp;#x7684; kernel&amp;#xFF0C;initramfs &amp;#x548C;&amp;#x7269;&amp;#x7406;&amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5728;&amp;#x771F;&amp;#x771F;&amp;#x7684;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x52A0;&amp;#x8F7D;&amp;#x8FC7;&amp;#x7A0B;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x4F60;&amp;#x597D;&amp;#x597D;&amp;#x8003;&amp;#x8651;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x5728;&amp;#x8FD9;&amp;#x4E00;&amp;#x8282;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x501F;&amp;#x52A9; uboot &amp;#x6765;&amp;#x6A21;&amp;#x62DF;&amp;#x52A0;&amp;#x8F7D;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x662F;&amp;#x8BA9; uboot &amp;#x6765;&amp;#x52A0;&amp;#x8F7D; kernel&amp;#xFF0C;initramfs&amp;#xFF0C;&amp;#x5E76;&amp;#x8BC6;&amp;#x522B; qemu &amp;#x865A;&amp;#x62DF;&amp;#x7684; sd &amp;#x5361;&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7; tftp &amp;#x6765;&amp;#x5411; uboot &amp;#x4F20;&amp;#x9012; kernel &amp;#x548C; initramfs &amp;#x955C;&amp;#x50CF;&amp;#x3002;&amp;#x65E2;&amp;#x7136;&amp;#x8981;&amp;#x4F9D;&amp;#x9760; uboot &amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x7CFB;&amp;#x7EDF;&amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x9700;&amp;#x8981;&amp;#x6309;&amp;#x7167; uboot &amp;#x7684;&amp;#x955C;&amp;#x50CF;&amp;#x683C;&amp;#x5F0F;&amp;#x5236;&amp;#x4F5C;&amp;#x52A0;&amp;#x8F7D;&amp;#x7684;&amp;#x955C;&amp;#x50CF;&amp;#x3002;&amp;#x800C; mkimage &amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5E72;&amp;#x8FD9;&amp;#x6D3B;&amp;#x7684;&amp;#x3002;&amp;#x5728;&amp;#x5236;&amp;#x4F5C; uboot &amp;#x955C;&amp;#x50CF;&amp;#x65F6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x6307;&amp;#x5B9A;&amp;#x955C;&amp;#x50CF;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x52A0;&amp;#x8F7D;&amp;#x5730;&amp;#x5740;&amp;#xFF0C;&amp;#x6267;&amp;#x884C;&amp;#x5730;&amp;#x5740;&amp;#x7B49;&amp;#xFF0C;&amp;#x5236;&amp;#x4F5C; uboot &amp;#x7248;&amp;#x7684; initramfs &amp;#x547D;&amp;#x4EE4;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkimage -A arm -O linux -T ramdisk -C none -a 0x00808000 -e 0x00808000 -n ramdisk -d ramfs.gz ramfs-uboot.img # &amp;lt;1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;-a &amp;#x548C; -e &amp;#x5206;&amp;#x522B;&amp;#x662F;&amp;#x6307;&amp;#x5B9A;&amp;#x52A0;&amp;#x8F7D;&amp;#x5B9A;&amp;#x5236;&amp;#x548C;&amp;#x6267;&amp;#x884C;&amp;#x5730;&amp;#x5740;&lt;/p&gt;
&lt;p&gt;&amp;#x800C; kernel &amp;#x7684; uboot &amp;#x7248;&amp;#x5C31;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x8FD9;&amp;#x4E48;&amp;#x624B;&amp;#x52A8;&amp;#x751F;&amp;#x6210;&amp;#x4E86;&amp;#xFF0C;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1; kernel &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; make uImage &amp;#x6765;&amp;#x5236;&amp;#x4F5C; uboot &amp;#x683C;&amp;#x5F0F;&amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x52A0;&amp;#x8F7D;&amp;#x5730;&amp;#x5740;&amp;#x662F; 0x00008000&amp;#xFF0C;&amp;#x4F60;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; LOADADDR &amp;#x6307;&amp;#x5B9A;&amp;#x4F60;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x52A0;&amp;#x8F7D;&amp;#x5730;&amp;#x5740;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x7528;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x955C;&amp;#x50CF;&amp;#x51C6;&amp;#x5907;&amp;#x597D;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x628A;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x955C;&amp;#x50CF;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5728;&amp;#x7528; tftp &amp;#x4F20;&amp;#x8F93;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x80FD;&amp;#x591F;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x955C;&amp;#x50CF;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x5047;&amp;#x8BBE;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230; ~/armsource/tftp &amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x4E00;&amp;#x6B65;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4EA4;&amp;#x53C9;&amp;#x7F16;&amp;#x8BD1; uboot &amp;#x3002;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5BF9; uboot &amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x4E9B;&amp;#x914D;&amp;#x7F6E;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F; versatilepb&amp;#xFF0C;&amp;#x5B83;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x5728; include/configs/versatile.h&amp;#x4E2D;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5BF9;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x7684;&amp;#x4FEE;&amp;#x6539;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define CONFIG_ARCH_VERSATILE_QEMU&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define CONFIG_INITRD_TAG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define CONFIG_SYS_PROMPT &amp;quot;myboard &amp;gt; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define CONFIG_BOOTCOMMAND \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;sete ipaddr 10.0.2.15;&amp;quot;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;sete serverip 10.0.2.2;&amp;quot;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;set bootargs &amp;apos;console=ttyAMA0,115200 root=/dev/mmcblk0&amp;apos;;&amp;quot;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;tftpboot 0x00007fc0 uImage;&amp;quot;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;tftpboot 0x00807fc0 ramfs-uboot.img;&amp;quot;\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;bootm 0x7fc0 0x807fc0&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ARCH_VERSATILE_QEMU &amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9; uboot &amp;#x4E3A;&amp;#x4E86;&amp;#x9002;&amp;#x5E94; qemu &amp;#x505A;&amp;#x4E00;&amp;#x4E9B;&amp;#x914D;&amp;#x7F6E;&amp;#x4E0A;&amp;#x7684;&amp;#x8C03;&amp;#x6574;&lt;/li&gt;
&lt;li&gt;INITRD_TAG &amp;#x662F;&amp;#x8BA9; uboot &amp;#x901A;&amp;#x8FC7; tag_list &amp;#x7ED9; kernel &amp;#x4F20;&amp;#x9012; initramfs &amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x6709;&amp;#x8FD9;&amp;#x4E2A;&amp;#x914D;&amp;#x7F6E;&amp;#x9009;&amp;#x9879;&amp;#xFF0C;kernel &amp;#x662F;&amp;#x627E;&amp;#x4E0D;&amp;#x5230; uboot &amp;#x4F20;&amp;#x7ED9;&amp;#x4ED6;&amp;#x7684; initramfs&lt;/li&gt;
&lt;li&gt;SYS_PROMPT &amp;#x662F;&amp;#x6307;&amp;#x5B9A; uboot &amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x63D0;&amp;#x793A;&amp;#x7B26;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x6307;&amp;#x5B9A;&amp;#x4F60;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x540D;&amp;#x5B57;&lt;/li&gt;
&lt;li&gt;BOOTCOMMAND &amp;#x662F;&amp;#x6307;&amp;#x5B9A; uboot &amp;#x8D77;&amp;#x6765;&amp;#x540E;&amp;#xFF0C;&amp;#x81EA;&amp;#x52A8;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x662F;&amp;#x8BA9; uboot &amp;#x81EA;&amp;#x52A8;&amp;#x8BBE;&amp;#x7F6E;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684; ip &amp;#x548C; tftp &amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x7684; ip&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x8BBE;&amp;#x5B9A;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9; kernel &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x4E09;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x662F;&amp;#x628A; kernel &amp;#x955C;&amp;#x50CF;&amp;#x548C; initramfs &amp;#x955C;&amp;#x50CF;&amp;#x88C5;&amp;#x8F7D;&amp;#x8FDB;&amp;#x6765;&amp;#xFF0C;&amp;#x5E76;&amp;#x4ECE;&amp;#x5185;&amp;#x5B58;&amp;#x6307;&amp;#x5B9A;&amp;#x5730;&amp;#x5740;&amp;#x5F00;&amp;#x59CB;&amp;#x6267;&amp;#x884C;&amp;#x6307;&amp;#x4EE4;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x8FD9;&amp;#x4E9B;&amp;#x547D;&amp;#x4EE4;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728; uboot &amp;#x8D77;&amp;#x6765;&amp;#x540E;&amp;#xFF0C;&amp;#x81EA;&amp;#x5DF1;&amp;#x8F93;&amp;#x5165;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#xFF1A;&amp;#x5728;&amp;#x8BBE;&amp;#x7F6E; uboot &amp;#x7684; ip &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4E00;&amp;#x5B9A;&amp;#x8981;&amp;#x548C; qemu &amp;#x7ED9;&amp;#x5B9A;&amp;#x7684; ip &amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684; qemu &amp;#x5185;&amp;#x90E8;&amp;#x81EA;&amp;#x5E26;&amp;#x7684; tftp &amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684; ip &amp;#x548C; qemu &amp;#x5185;&amp;#x90E8; tftp &amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x7684; ip &amp;#x5728;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;&amp;#x7F51;&amp;#x6BB5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;uboot &amp;#x914D;&amp;#x7F6E;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x5982;&amp;#x4E0B;&amp;#x547D;&amp;#x4EE4;&amp;#x6765;&amp;#x7F16;&amp;#x8BD1; uboot:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;make versatilepb_config ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make -j12 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x4EC0;&amp;#x4E48;&amp;#x9519;&amp;#x8BEF;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x751F;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A; u-boot &amp;#x955C;&amp;#x50CF;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; qemu &amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x5B83;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo qemu-system-arm -M versatilepb -kernel u-boot -m 256M -net nic -net user,tftp=~/armsource/tftp -sd hda.img -nographic&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x547D;&amp;#x4EE4;&amp;#x6267;&amp;#x884C;&amp;#x540E;&amp;#xFF0C;&amp;#x4F60;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x548C;&amp;#x4E4B;&amp;#x524D;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x52A0;&amp;#x8F7D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x7ECF;&amp;#x8FC7;&amp;#x4E24;&amp;#x6B21;&amp;#x8DF3;&amp;#x8F6C;&amp;#xFF0C;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x7684; sd &amp;#x5361;&amp;#x4E0A;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7ED3;&amp;#x8BED;&quot;&gt;&lt;a href=&quot;#&amp;#x7ED3;&amp;#x8BED;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7ED3;&amp;#x8BED;&quot;&gt;&lt;/a&gt;&amp;#x7ED3;&amp;#x8BED;&lt;/h2&gt;&lt;p&gt;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6700;&amp;#x7EC8;&amp;#x5B8C;&amp;#x6210;&amp;#x4E86; qemu &amp;#x2013; &amp;gt; uboot &amp;#x2013;&amp;gt; kernel &amp;#x2013;&amp;gt; initramfs &amp;#x2013;&amp;gt; hda.img &amp;#x8FD9;&amp;#x4E00;&amp;#x8FC7;&amp;#x7A0B; &lt;a href=&quot;http://elinux.org/Virtual_Development_Board&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;1&lt;/a&gt;&amp;#x3002;&amp;#x800C;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x5236;&amp;#x4F5C;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x751A;&amp;#x81F3;&amp;#x4E00;&amp;#x4E2A;&amp;#x684C;&amp;#x9762;&amp;#x53D1;&amp;#x884C;&amp;#x7248;&amp;#x672C;&amp;#x7684;&amp;#x57FA;&amp;#x672C;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x770B;&amp;#x5B8C;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x540E;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5BF9;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5FF5;&amp;#x5FF5;&amp;#x4E0D;&amp;#x5FD8;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x5EFA;&amp;#x8BAE;&amp;#x4F60;&amp;#x4E70;&amp;#x4E00;&amp;#x5757;&amp;#x5F00;&amp;#x53D1;&amp;#x677F;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x771F;&amp;#x771F;&amp;#x8D70;&amp;#x4E00;&amp;#x904D;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x6BD5;&amp;#x7ADF;&amp;#x8FD9;&amp;#x662F;&amp;#x7528; qemu &amp;#x6A21;&amp;#x62DF;&amp;#x7684;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6709;&amp;#x5F88;&amp;#x591A; open source hardware project(Arduino, Beagle Board, Cubieboard&amp;#xFF0C;Odroid&amp;#xFF0C;PandaBoard&amp;#xFF0C;Raspberry Pi)&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x8D2D;&amp;#x4E70;&amp;#x4ED6;&amp;#x4EEC;&amp;#x7684;&amp;#x677F;&amp;#x5B50;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x79FB;&amp;#x690D;&amp;#x4EFB;&amp;#x4F55;&amp;#x81EA;&amp;#x5DF1;&amp;#x559C;&amp;#x6B22;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x662F; open source&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x83B7;&amp;#x53D6;&amp;#x5230;&amp;#x5F88;&amp;#x591A;&amp;#x8D44;&amp;#x6599;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x6709;&amp;#x793E;&amp;#x533A;&amp;#x652F;&amp;#x6301;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这篇文章，将介绍如何用 QEMU 来搭建一个基于 ARM 的嵌入式 Linux 系统。通过该文章，你可以学习到如何配置 Kernel，如何交叉编译 Kernel，如何配置 busybox 并编译，如何制作 initramfs，如何制作根文件系统，如何定制自己的 uboot，如何通过 uboot 向 kernel 传递参数等。开始干活！&lt;/p&gt;
&lt;h2 id=&quot;环境搭建&quot;&gt;&lt;a href=&quot;#环境搭建&quot; class=&quot;headerlink&quot; title=&quot;环境搭建&quot;&gt;&lt;/a&gt;环境搭建&lt;/h2&gt;&lt;p&gt;在实现我们的目标之前，我们需要搭建自己的工作环境。在这里，假设你的主机上已经有 gcc 本地编译环境，并运行 Ubuntu 12.10。但是这并不影响在其他的 linux 平台上进行，只要修改一下对应的命令就可以了。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.miopeco.com/categories/linux/"/>
    
      <category term="qemu" scheme="http://blog.miopeco.com/categories/linux/qemu/"/>
    
    
      <category term="linux" scheme="http://blog.miopeco.com/tags/linux/"/>
    
      <category term="qemu" scheme="http://blog.miopeco.com/tags/qemu/"/>
    
      <category term="arm" scheme="http://blog.miopeco.com/tags/arm/"/>
    
  </entry>
  
  <entry>
    <title>11.8-const</title>
    <link href="http://blog.miopeco.com/2013/08/13/c-faq.const/"/>
    <id>http://blog.miopeco.com/2013/08/13/c-faq.const/</id>
    <published>2013-08-12T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;const &amp;#x5173;&amp;#x952E;&amp;#x5B57;&amp;#x7528;&amp;#x6765;&amp;#x4FEE;&amp;#x9970;&amp;#x4E00;&amp;#x4E2A;&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x4F7F;&amp;#x5176;&amp;#x6210;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EA;&amp;#x8BFB;&amp;#x5BF9;&amp;#x8C61;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const int n=10;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F; const &amp;#x6240;&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x5E76;&amp;#x4E0D;&amp;#x7B49;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A;&amp;#x5E38;&amp;#x91CF;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x3002;const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD0;&amp;#x884C;&amp;#x65F6;&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x800C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5E38;&amp;#x91CF;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7F16;&amp;#x8BD1;&amp;#x65F6;&amp;#x5BF9;&amp;#x8C61;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x6765;&amp;#x89E3;&amp;#x91CA;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x7528; const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x6574;&amp;#x6570;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E00;&amp;#x4E2A;&amp;#x6570;&amp;#x7EC4;&amp;#x662F;&amp;#x4E0D;&amp;#x884C;&amp;#x7684;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int a[n]; //error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;const &amp;#x603B;&amp;#x662F;&amp;#x4FEE;&amp;#x9970;&amp;#x79BB;&amp;#x5B83;&amp;#x6700;&amp;#x8FD1;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const char *p;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;char const *p;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;char * const p;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x548C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x4E2A;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x662F; char &amp;#x548C; *&amp;#xFF0C;&amp;#x90FD;&amp;#x8868;&amp;#x793A;&amp;#x6307;&amp;#x9488; p &amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EA;&amp;#x8BFB;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E; p &amp;#x672C;&amp;#x8EAB;&amp;#xFF0C;&amp;#x786E;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x88AB;&amp;#x6539;&amp;#x53D8;&amp;#x7684;&amp;#x3002;&amp;#x800C;&amp;#x7B2C; 3 &amp;#x4E2A; const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x662F;&amp;#x6307;&amp;#x9488; p &amp;#x672C;&amp;#x8EAB;&amp;#xFF0C;&amp;#x8868;&amp;#x793A;&amp;#x6307;&amp;#x9488; p &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EA;&amp;#x8BFB;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E; p &amp;#x6240;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x662F;&amp;#x53EF;&amp;#x4FEE;&amp;#x6539;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x548C;&amp;#x590D;&amp;#x6742;&amp;#x6307;&amp;#x9488;&amp;#x58F0;&amp;#x660E;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;&amp;#x4F9D;&amp;#x9760;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x7684;&amp;#x7ED3;&amp;#x5408;&amp;#x6027;&amp;#x6765;&amp;#x5224;&amp;#x65AD; const &amp;#x662F;&amp;#x4FEE;&amp;#x9970;&amp;#x90A3;&amp;#x4E2A;&amp;#x5BF9;&amp;#x8C61;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5F53;&amp;#x4F60;&amp;#x7528; const &amp;#x4FEE;&amp;#x9970;&amp;#x4E00;&amp;#x4E2A;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x548C;&amp;#x666E;&amp;#x901A;&amp;#x7C7B;&amp;#x578B;&amp;#x662F;&amp;#x6CA1;&amp;#x6709;&amp;#x533A;&amp;#x522B;&amp;#x7684;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define x_ptr int *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;typedef y_ptr int *;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x4F60;&amp;#x8FDB;&amp;#x884C;&amp;#x5982;&amp;#x4E0B;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const x_ptr x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const y_ptr y;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A; const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x662F;x&amp;#x6240;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x6574;&amp;#x6570;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; x_ptr &amp;#x53EA;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B8F;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x5B8F;&amp;#x662F;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x65F6;&amp;#x5C31;&amp;#x786E;&amp;#x5B9A;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x58F0;&amp;#x660E;&amp;#x548C; &lt;code&gt;const int *x;&lt;/code&gt; &amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x7B2C;&amp;#x4E8C;&amp;#x4E2A; const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x5374;&amp;#x662F; y&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x662F; y&amp;#x6240;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x6574;&amp;#x6570;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; y_ptr &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7528;&amp;#x6237;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&amp;#x8FD9;&amp;#x5C31;&amp;#x50CF;&amp;#x4F60;&amp;#x5728;&amp;#x58F0;&amp;#x660E;&amp;#x57FA;&amp;#x672C;&amp;#x7C7B;&amp;#x578B;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x65F6;&amp;#x5019; &lt;code&gt;const int y&lt;/code&gt; &amp;#x4E00;&amp;#x6837;&amp;#xFF0C;const &amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x662F; y&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;const 关键字用来修饰一个对象，使其成为一个只读对象。比如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const int n=10;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是 const 所修饰的对象并不等于一个常量表达式。const 修饰的对象是一个运行时对象，而一个常量表达式是一个编译时对象。所以这也可以用来解释为什么用 const 修饰的整数来初始化一个数组是不行的。比如:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int a[n]; //error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
  <entry>
    <title>10.20-宏</title>
    <link href="http://blog.miopeco.com/2013/08/13/c-faq.macro_intro/"/>
    <id>http://blog.miopeco.com/2013/08/13/c-faq.macro_intro/</id>
    <published>2013-08-12T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728; C &amp;#x8BED;&amp;#x8A00;&amp;#x4E2D;&amp;#x3002;&amp;#x5B8F;&amp;#x5206;&amp;#x4E3A;&amp;#x4E24;&amp;#x79CD;&amp;#xFF1A;&amp;#x5BF9;&amp;#x8C61;&amp;#x5F0F;&amp;#x5B8F;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x5B8F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x8C61;&amp;#x5F0F;&amp;#x5B8F;&amp;#x5C31;&amp;#x662F;&amp;#x4E0D;&amp;#x5E26;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x5B8F;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x4E9B;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x66FF;&amp;#x6362;&amp;#x3002;&amp;#x800C;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x5B8F;&amp;#x662F;&amp;#x5E26;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x5B8F;&amp;#xFF0C;&amp;#x5916;&amp;#x8868;&amp;#x770B;&amp;#x4E0A;&amp;#x53BB;&amp;#x5C31;&amp;#x50CF;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x3002;&lt;br&gt;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define TEST &amp;quot;this is a test&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define PRINT(int) printf(&amp;quot;PRINT: %d&amp;quot;, int)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x5B8F;&amp;#x8FD8;&amp;#x652F;&amp;#x6301;&amp;#x53D8;&amp;#x957F;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define debug(...)   fprintf(stderr, __VA_ARGS__)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B8F;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7; #undef &amp;#x6765;&amp;#x5220;&amp;#x9664;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B8F;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#undef debug&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x5B8F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF1A;# &amp;#x548C; ##&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x628A;&amp;#x7D27;&amp;#x8DDF;&amp;#x8BE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x53D8;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;-&amp;#x6BD4;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x5B8F;&quot;&gt;&lt;a href=&quot;#&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x628A;&amp;#x7D27;&amp;#x8DDF;&amp;#x8BE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x53D8;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x5B8F;&amp;#xFF1A;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x628A;&amp;#x7D27;&amp;#x8DDF;&amp;#x8BE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x53D8;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x5B8F;&amp;#xFF1A;&quot;&gt;&lt;/a&gt;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x628A;&amp;#x7D27;&amp;#x8DDF;&amp;#x8BE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x53D8;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x5B8F;&amp;#xFF1A;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define STR(x) #x&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#xFF0C;&amp;#x5F53;&amp;#x4F60;&amp;#x8C03;&amp;#x7528; STR(this is a test) &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x9884;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x5C31;&amp;#x4F1A;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B8F;&amp;#x66FF;&amp;#x6362;&amp;#x4E3A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;this is a test&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x8FD9;&amp;#x6837;&amp;#x8C03;&amp;#x7528;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;STR(&amp;quot;this is \a test&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x7ED3;&amp;#x679C;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&amp;#x5728; ANSI C &amp;#x4E2D;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x89C4;&amp;#x5B9A;&amp;#x7684;&amp;#xFF1A;&amp;#x5F53;&amp;#x5E26;&amp;#x6709; # &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4E2D;&amp;#x6709; &amp;#x201C; &amp;#x7B26;&amp;#x53F7;&amp;#x548C; \ &amp;#x7B26;&amp;#x53F7;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4F1A;&amp;#x81EA;&amp;#x52A8;&amp;#x5728;&amp;#x5B83;&amp;#x7684;&amp;#x524D;&amp;#x9762;&amp;#x52A0;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E2A;&amp;#x53CD;&amp;#x659C;&amp;#x6760;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0A;&amp;#x9762;&amp;#x90A3;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#x7684;&amp;#x7B54;&amp;#x6848;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;\&amp;quot;this is \\a test\&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x4E2A;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26; ## &amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x8FDE;&amp;#x63A5;&amp;#x4E24;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x6709;&amp;#x8FD9;&amp;#x6837;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B8F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define XY(x,y) x##y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x8FD9;&amp;#x6837;&amp;#x8C03;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B8F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;XY(abc,def)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B8F;&amp;#x8C03;&amp;#x7528;&amp;#x6700;&amp;#x540E;&amp;#x4F1A;&amp;#x66FF;&amp;#x6362;&amp;#x4E3A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;abcdef&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26; ## &amp;#x4E0D;&amp;#x80FD;&amp;#x51FA;&amp;#x73B0;&amp;#x66FF;&amp;#x6362;&amp;#x5217;&amp;#x8868;&amp;#x7684;&amp;#x5F00;&amp;#x5934;&amp;#x548C;&amp;#x7ED3;&amp;#x5C3E;&amp;#xFF0C;&amp;#x50CF;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define X(x) ##x //error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define Y(y) y## //error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x662F;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26; ## &amp;#x53EF;&amp;#x4EE5;&amp;#x5F88;&amp;#x5BB9;&amp;#x6613;&amp;#x7684;&amp;#x751F;&amp;#x6210;&amp;#x4E00;&amp;#x4E9B;&amp;#x65B0;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#x548C;&amp;#x51FD;&amp;#x6570;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x5982;&amp;#x679C;&amp;#x8FC7;&amp;#x591A;&amp;#x7684;&amp;#x7528;&amp;#x8FD9;&amp;#x79CD;&amp;#x5B8F;&amp;#xFF0C;&amp;#x4E5F;&amp;#x4F1A;&amp;#x7ED9;&amp;#x4EE3;&amp;#x7801;&amp;#x9605;&amp;#x8BFB;&amp;#x5E26;&amp;#x6765;&amp;#x4E00;&amp;#x5B9A;&amp;#x7684;&amp;#x9EBB;&amp;#x70E6;&amp;#x3002;&lt;br&gt;&amp;#x5728;&amp;#x9605;&amp;#x8BFB; kernel &amp;#x6E90;&amp;#x7801;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7ECF;&amp;#x5E38;&amp;#x53D1;&amp;#x73B0;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x65E0;&amp;#x6CD5;&amp;#x88AB; grep &amp;#x5230;&amp;#xFF0C;&amp;#x597D;&amp;#x50CF;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x6216;&amp;#x8005;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x6CA1;&amp;#x6709;&amp;#x5B9A;&amp;#x4E49;&amp;#x4F3C;&amp;#x7684;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x51FA;&amp;#x73B0;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x6216;&amp;#x8005;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x6781;&amp;#x6709;&amp;#x53EF;&amp;#x80FD;&amp;#x662F;&amp;#x7531;&amp;#x5E26;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B26; ## &amp;#x7684;&amp;#x5B8F;&amp;#x6765;&amp;#x751F;&amp;#x6210;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x6BD4;&amp;#x5982; kernel &amp;#x4E2D;&amp;#x7684; MACHINE_START &amp;#x548C; MACHINE_END &amp;#x7684;&amp;#x5B9A;&amp;#x4E49;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define MACHINE_START(_type,_name) \ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;static const struct machine_desc __mach_desc_##_type \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__used \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__attribute__((__section__(&amp;quot;.arch.info.init&amp;quot;))) = { \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.nr = MACH_TYPE_##_type, \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.name = _name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define MACHINE_END \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230; &lt;strong&gt;mach&lt;em&gt;desc&lt;/em&gt;##_type &amp;#x5C31;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&amp;#x5B8F;&amp;#x6765;&amp;#x751F;&amp;#x6210;&amp;#x7684;&amp;#xFF0C;&amp;#x5982;&amp;#x679C; _type &amp;#x662F; arm&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A; machine_desc &amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x5C31;&amp;#x662F; &lt;/strong&gt;mach_desc__arm&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x76F4;&amp;#x63A5;&amp;#x641C;&amp;#x7D22;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#xFF0C;&amp;#x662F;&amp;#x641C;&amp;#x7D22;&amp;#x4E0D;&amp;#x5230;&amp;#x7684;&amp;#x3002;&amp;#x8FD9;&amp;#x79CD;&amp;#x5E26;&amp;#x6709; ## &amp;#x7684;&amp;#x5B8F;&amp;#x5728; kernel &amp;#x4E2D;&amp;#x7ECF;&amp;#x5E38;&amp;#x51FA;&amp;#x73B0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x591A;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A; ## &amp;#x6216;&amp;#x8005; # &amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#xFF0C;&amp;#x5219;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x5728; ANSI C &amp;#x4E2D;&amp;#x662F;&amp;#x672A;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#xFF0C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x5F97;&amp;#x5230;&amp;#x4E0D;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;&amp;#x8FD8;&amp;#x9700;&amp;#x6CE8;&amp;#x610F;&amp;#x4E00;&amp;#x70B9;&amp;#xFF0C;&amp;#x5B8F;&amp;#x5E76;&amp;#x4E0D;&amp;#x4F1A;&amp;#x5904;&amp;#x7406;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x91CC;&amp;#x9762;&amp;#x7684;&amp;#x66FF;&amp;#x6362;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define TRACE(var, fmt) printf(&amp;quot;TRACE: var = fmt\n&amp;quot;, var)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x60F3;&amp;#x901A;&amp;#x8FC7;&amp;#x8C03;&amp;#x7528; TRACE(i,%d) &amp;#x6765;&amp;#x5F97;&amp;#x5230;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;printf(&amp;quot;TRACE: i = %d\n&amp;quot;, i)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5E76;&amp;#x4E0D;&amp;#x80FD;&amp;#x5982;&amp;#x4F60;&amp;#x6240;&amp;#x613F;&amp;#x3002;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;warning: macro replacement within a string literal&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x5E94;&amp;#x8BE5;&amp;#x8FD9;&amp;#x6837;&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x4F60;&amp;#x7684;&amp;#x5B8F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define TRACE(var, fmt) \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		printf(&amp;quot;TRACE: &amp;quot; #var &amp;quot; = &amp;quot; #fmt &amp;quot;\n&amp;quot;, var)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在 C 语言中。宏分为两种：对象式宏和函数式宏。&lt;/p&gt;
&lt;p&gt;对象式宏就是不带参数的宏，只是进行一些简单的替换。而函数式宏是带函数的宏，外表看上去就像是一个函数。&lt;br&gt;比如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define TEST &amp;quot;this is a test&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define PRINT(int) printf(&amp;quot;PRINT: %d&amp;quot;, int)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
  <entry>
    <title>3.16-左值和右值</title>
    <link href="http://blog.miopeco.com/2013/08/11/c-faq.lvalue_rvalue/"/>
    <id>http://blog.miopeco.com/2013/08/11/c-faq.lvalue_rvalue/</id>
    <published>2013-08-10T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728; C &amp;#x548C; C++ &amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x7ECF;&amp;#x5E38;&amp;#x4F1A;&amp;#x78B0;&amp;#x5230;&amp;#x4E24;&amp;#x4E2A;&amp;#x6982;&amp;#x5FF5;&amp;#xFF0C;lvalue &amp;#x548C; rvalue&amp;#x3002;&amp;#x751A;&amp;#x81F3;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4E5F;&amp;#x4F1A;&amp;#x78B0;&amp;#x5230;&amp;#x4E00;&amp;#x4E9B;&amp;#x5173;&amp;#x4E8E; lvalue &amp;#x548C; rvalue &amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; ISO IEC &amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x6587;&amp;#x6863;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x6982;&amp;#x5FF5;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8BE6;&amp;#x7EC6;&amp;#x8BF4;&amp;#x660E;&amp;#xFF0C;&amp;#x7279;&amp;#x522B;&amp;#x662F; rvalue&amp;#xFF0C;&amp;#x53EA;&amp;#x5728;&amp;#x4E00;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x63D0;&amp;#x4E86;&amp;#x4E00;&amp;#x4E0B;&amp;#x3002;&lt;br&gt;&amp;#x5728; IBM &amp;#x7684; XL C/C++ V8.0 for AIX &amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x6587;&amp;#x6863;&amp;#x4E2D;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x6765;&amp;#x89C4;&amp;#x5B9A; lvalue&amp;#xFF1A;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An object is a region of storage that can be examined and stored into. An lvalue is an expression that refers to such an object.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4; lvalue &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4E14;&amp;#x6307;&amp;#x5411;&amp;#x4E00;&amp;#x4E2A;&amp;#x53EF;&amp;#x8BFB;&amp;#x5199;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#x533A;&amp;#x57DF;&amp;#x3002;&amp;#x800C; rvalue&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E3A;&amp;#x4EFB;&amp;#x4F55;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;lvalue &amp;#x548C; rvalue &amp;#x7684;&amp;#x53D6;&amp;#x540D;&amp;#xFF0C;&amp;#x662F;&amp;#x6765;&amp;#x81EA;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A;&amp;#x8D4B;&amp;#x503C;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x4E2D;&amp;#x7684;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A;&amp;#x5408;&amp;#x6CD5;&amp;#x7684;&amp;#x8D4B;&amp;#x503C;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;L = R;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x8BF4; L &amp;#x662F; lvalue&amp;#xFF0C;R &amp;#x662F; rvalue&amp;#x3002;&lt;/p&gt;
&lt;p&gt;lvalue &amp;#x5FC5;&amp;#x987B;&amp;#x662F;&amp;#x53EF;&amp;#x5199;&amp;#x7684;&amp;#xFF0C;&amp;#x4E14; lvalue &amp;#x53EF;&amp;#x4EE5;&amp;#x8F6C;&amp;#x6362;&amp;#x4E3A; rvalue&amp;#xFF0C;&amp;#x4F46;&amp;#x662F; rvalue &amp;#x5374;&amp;#x4E0D;&amp;#x4E00;&amp;#x5B9A;&amp;#x80FD;&amp;#x8F6C;&amp;#x6362;&amp;#x6210; lvalue&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int x;x=1;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8D4B;&amp;#x503C;&amp;#x662F;&amp;#x5408;&amp;#x6CD5;&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; x &amp;#x662F;&amp;#x4E00;&amp;#x4E2A; lvalue&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1=x;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x662F;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; 1 &amp;#x53EA;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; rvalue&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5DE6;&amp;#x503C;&amp;#x548C;&amp;#x53F3;&amp;#x503C;&amp;#x4E0D;&amp;#x4EC5;&amp;#x4EC5;&amp;#x5B58;&amp;#x5728;&amp;#x4E8E;&amp;#x53D8;&amp;#x91CF;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5728;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x5B58;&amp;#x5728;&amp;#x7684;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x5728; lvalue &amp;#x548C; rvalue &amp;#x7684;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x672C;&amp;#x8D28;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x3002;&amp;#x4E0D;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x90FD;&amp;#x4F1A;&amp;#x4EA7;&amp;#x751F; lvalue &amp;#x7684;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(m+1)=n;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#x8D4B;&amp;#x503C;&amp;#x8BED;&amp;#x53E5;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x52A0;&amp;#x6CD5;&amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x662F; rvalue&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E9B;&amp;#x4E00;&amp;#x5143;&amp;#x8FD0;&amp;#x7B97;&amp;#x7B26;&amp;#xFF0C;&amp;#x6709;&amp;#x7684;&amp;#x4F1A;&amp;#x4EA7;&amp;#x751F; lvalue&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int m,*p;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p=&amp;amp;m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;m=p; //error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x660E;&amp;#x663E;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; &amp;amp; &amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x662F; rvalue&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;*p=m;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x786E;&amp;#x662F;&amp;#x6B63;&amp;#x786E;&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; * &amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x662F; lvalue&amp;#x3002;&amp;#x518D;&amp;#x4E3E;&amp;#x4E00;&amp;#x4E2A;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;((condition) ? a : b) = complicated_expression; //error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*((condition) ? &amp;amp;a : &amp;amp;b) = complicated_expression; //correct&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5F88;&amp;#x591A;&amp;#x7C7B;&amp;#x578B;&amp;#x8F6C;&amp;#x6362;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x8FD9;&amp;#x4E48;&amp;#x7528;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;char *p; ((int *)p)++;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x7684;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x60F3;&amp;#x8BA9;&amp;#x6307;&amp;#x9488; p &amp;#x8DF3;&amp;#x8FC7;&amp;#x51E0;&amp;#x4E2A; int &amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4EE3;&amp;#x7801;&amp;#x5374;&amp;#x4E0D;&amp;#x80FD;&amp;#x6B63;&amp;#x5E38;&amp;#x6267;&amp;#x884C;&amp;#x3002;&amp;#x539F;&amp;#x56E0;&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#xFF0C;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x7C7B;&amp;#x578B;&amp;#x8F6C;&amp;#x6362;&amp;#x64CD;&amp;#x4F5C;&amp;#x6700;&amp;#x540E;&amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; rvalue&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x65E0;&amp;#x6CD5;&amp;#x7528;&amp;#x4E8E; ++&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x4E2A;&amp;#xFF0C;&amp;#x7C7B;&amp;#x578B;&amp;#x8F6C;&amp;#x6362;&amp;#x53EA;&amp;#x662F;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7C7B;&amp;#x578B;&amp;#x8F6C;&amp;#x6362;&amp;#xFF0C;&lt;br&gt;&amp;#x5E76;&amp;#x4E0D;&amp;#x4F1A;&amp;#x8BA9;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4E5F;&amp;#x968F;&amp;#x7740;&amp;#x7C7B;&amp;#x578B;&amp;#x6539;&amp;#x53D8;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x6700;&amp;#x540E;&amp;#xFF0C;&amp;#x81EA;&amp;#x589E;&amp;#x64CD;&amp;#x4F5C;&amp;#x6240;&amp;#x52A0;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; int &amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A; char &amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x4F60;&amp;#x5E94;&amp;#x8BE5;&amp;#x8FD9;&amp;#x6837;&amp;#x505A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;p = (char *)((int *)p + 1);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;REFERENCE&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://books.gigatux.nl/mirror/cinanutshell/0596006977/cinanut-CHP-5-SECT-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://books.gigatux.nl/mirror/cinanutshell/0596006977/cinanut-CHP-5-SECT-1.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ieng9.ucsd.edu/~cs30x/Lvalues%20and%20Rvalues.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ieng9.ucsd.edu/~cs30x/Lvalues%20and%20Rvalues.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www-01.ibm.com/support/knowledgecenter/SSGH3R_8.0.0/com.ibm.xlcpp8a.doc/language/ref/lvalue.htm%23lvalue?lang=en&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www-01.ibm.com/support/knowledgecenter/SSGH3R_8.0.0/com.ibm.xlcpp8a.doc/language/ref/lvalue.htm%23lvalue?lang=en&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在 C 和 C++ 中，我们经常会碰到两个概念，lvalue 和 rvalue。甚至在编译程序的时候，也会碰到一些关于 lvalue 和 rvalue 的错误。&lt;/p&gt;
&lt;p&gt;在 ISO IEC 的标准文档中，对这两个概念并没有详细说明，特别是 rvalue，只在一个地方提了一下。&lt;br&gt;在 IBM 的 XL C/C++ V8.0 for AIX 的标准文档中是这样来规定 lvalue：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An object is a region of storage that can be examined and stored into. An lvalue is an expression that refers to such an object.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
  <entry>
    <title>1.25-隐式函数声明</title>
    <link href="http://blog.miopeco.com/2013/08/11/c-faq.explicit_func/"/>
    <id>http://blog.miopeco.com/2013/08/11/c-faq.explicit_func/</id>
    <published>2013-08-10T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728; C &amp;#x8BED;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x662F;&amp;#x6307;&amp;#x51FD;&amp;#x6570;&amp;#x5728;&amp;#x8C03;&amp;#x7528;&amp;#x4E4B;&amp;#x524D;&amp;#x6CA1;&amp;#x6709;&amp;#x660E;&amp;#x786E;&amp;#x7684;&amp;#x58F0;&amp;#x660E;&amp;#x6216;&amp;#x5B9A;&amp;#x4E49;&amp;#x3002;&lt;br&gt;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x5BF9;&amp;#x5F85;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0D;&amp;#x540C;&amp;#x3002;&amp;#x5728; GCC &amp;#x4E2D;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x53EA;&amp;#x4F1A;&amp;#x7ED9;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A;&amp;#x8B66;&amp;#x544A;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x53EA;&amp;#x8981;&amp;#x4E0D;&amp;#x548C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x51FD;&amp;#x6570;&amp;#x539F;&amp;#x578B;&amp;#x51B2;&amp;#x7A81;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B9E;&amp;#x9A8C;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// file test.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int f1()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return f2();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int f2(int i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc, char * argv[])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;%d\n&amp;quot;,f1());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x4F60;&amp;#x76F4;&amp;#x63A5;&amp;#x7528; gcc test.c &amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x7F16;&amp;#x8BD1;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x80FD;&amp;#x591F;&amp;#x6B63;&amp;#x5E38;&amp;#x901A;&amp;#x8FC7;&amp;#x7F16;&amp;#x8BD1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#x5F53;&amp;#x4F60;&amp;#x628A;&amp;#x4E0A;&amp;#x9762;&amp;#x7684; f2 &amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x8FD4;&amp;#x56DE;&amp;#x7C7B;&amp;#x578B;&amp;#x6539;&amp;#x4E3A; char &amp;#x540E;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x6309;&amp;#x7167;&amp;#x539F;&amp;#x5148;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF08;gcc test.c&amp;#xFF09;&amp;#xFF0C;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#xFF0C;&amp;#x63D0;&amp;#x793A;&amp;#x5728; f2 &amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x90A3;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x548C;&amp;#x51FD;&amp;#x6570; f2 &amp;#x7C7B;&amp;#x578B;&amp;#x51B2;&amp;#x7A81;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x600E;&amp;#x4E48;&amp;#x4F1A;&amp;#x51FA;&amp;#x73B0;&amp;#x7C7B;&amp;#x578B;&amp;#x51B2;&amp;#x7A81;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#xFF1F;&amp;#x6211;&amp;#x4E4B;&amp;#x524D;&amp;#x6709;&amp;#x5B9A;&amp;#x4E49; f2 &amp;#x4E48;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x5B9E;&amp;#x8FD9;&amp;#x4E2D;&amp;#x95F4;&amp;#x5C31;&amp;#x662F;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x5728;&amp;#x6363;&amp;#x9B3C;&amp;#x3002;&amp;#x5728; gcc &amp;#x4E2D;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x78B0;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;&amp;#x672A;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x9ED8;&amp;#x8BA4;&amp;#x4F1A;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x539F;&amp;#x578B;&amp;#x5F53;&amp;#x4F5C; &amp;#x201C;int f()&amp;#x201D;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x53EF;&amp;#x4EE5;&amp;#x63A5;&amp;#x53D7;&amp;#x4EFB;&amp;#x610F;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E00;&amp;#x4E2A;&amp;#x6574;&amp;#x578B;&amp;#x6570;&amp;#x3002;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B21;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FD0;&amp;#x884C;&amp;#x6B63;&amp;#x5E38;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x4E0B;&amp;#x9762;&amp;#x7684; f2 &amp;#x5B9A;&amp;#x4E49;&amp;#x521A;&amp;#x597D;&amp;#x548C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x539F;&amp;#x578B;&amp;#x517C;&amp;#x5BB9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x4EEC;&amp;#x628A;&amp;#x8FD4;&amp;#x56DE;&amp;#x7C7B;&amp;#x578B;&amp;#x6362;&amp;#x6210; char &amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x548C;&amp;#x524D;&amp;#x9762;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x539F;&amp;#x578B;&amp;#x4E0D;&amp;#x517C;&amp;#x5BB9;&amp;#x4E86;&amp;#x3002;&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x51FA;&amp;#x73B0;&amp;#x4E24;&amp;#x4E2A;&amp;#x5BF9;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;&amp;#x540D;&amp;#x5B57;&amp;#x7684;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5728; C &amp;#x8BED;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5F53;&amp;#x7136;&amp;#x662F;&amp;#x4E0D;&amp;#x5141;&amp;#x8BB8;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#xFF1A;&amp;#x7C7B;&amp;#x578B;&amp;#x51B2;&amp;#x7A81;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; C89 &amp;#x7684;&amp;#x89C4;&amp;#x8303;&amp;#x4E2D;&amp;#xFF0C;&amp;#x662F;&amp;#x5141;&amp;#x8BB8;&amp;#x8FD9;&amp;#x79CD;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x4E14; gcc &amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;&amp;#x6309;&amp;#x7167; c89 &amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x6765;&amp;#x7F16;&amp;#x8BD1;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; gcc &amp;#x5728;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B21;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x8FDE;&amp;#x4E00;&amp;#x4E2A;&amp;#x8B66;&amp;#x544A;&amp;#x90FD;&amp;#x4E0D;&amp;#x51FA;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x52A0;&amp;#x4E00;&amp;#x4E2A; -Wall &amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;gcc &amp;#x5C31;&amp;#x4F1A;&amp;#x51FA;&amp;#x5148;&amp;#x8B66;&amp;#x544A;&amp;#xFF1A;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728; C99 &amp;#x7684;&amp;#x89C4;&amp;#x8303;&amp;#xFF0C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x4E0D;&amp;#x5141;&amp;#x8BB8;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x4E86;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x5728;&amp;#x7528; gcc &amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x52A0;&amp;#x4E0A; -std=c99 &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x9A6C;&amp;#x4E0A;&amp;#x4F1A;&amp;#x51FA;&amp;#x73B0;&amp;#x4E00;&amp;#x4E2A;&amp;#x8B66;&amp;#x544A;&amp;#xFF1A;&amp;#x9690;&amp;#x5F0F;&amp;#x51FD;&amp;#x6570;&amp;#x58F0;&amp;#x660E;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x518D;&amp;#x52A0;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E2A; -Werror &amp;#x7684;&amp;#x9009;&amp;#x9879;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x90A3;&amp;#x5C31;&amp;#x76F4;&amp;#x63A5;&amp;#x51FA;&amp;#x73B0;&amp;#x9519;&amp;#x8BEF;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECE;&amp;#x8FD9;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x51FA;&amp;#xFF0C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x5DEE;&amp;#x5F02;&amp;#x3002;&amp;#x4EE5;&amp;#x540E;&amp;#x7F16;&amp;#x8BD1;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x5C3D;&amp;#x91CF;&amp;#x52A0;&amp;#x4E0A; -Wall -std=c99&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x53D1;&amp;#x73B0;&amp;#x5F88;&amp;#x591A;&amp;#x9690;&amp;#x85CF;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在 C 语言中，隐式函数声明是指函数在调用之前没有明确的声明或定义。&lt;br&gt;不同的编译器对待隐式函数声明的方式不同。在 GCC 中，编译器只会给出一个警告，但是只要不和默认函数原型冲突，编译器是不会报错的。&lt;br&gt;下面来看一个实验：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// file test.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int f1()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return f2();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int f2(int i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc, char * argv[])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;%d\n&amp;quot;,f1());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
  <entry>
    <title>6.11-数组怪异写法</title>
    <link href="http://blog.miopeco.com/2013/08/07/c-faq.array/"/>
    <id>http://blog.miopeco.com/2013/08/07/c-faq.array/</id>
    <published>2013-08-06T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5148;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;%c\n&amp;quot;,5[&amp;quot;abcdssdc&amp;quot;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x89C9;&amp;#x5F97;&amp;#x8FD9;&amp;#x6BB5;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4F1A;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&lt;br&gt;s&amp;#xFF0C;&amp;#x786E;&amp;#x5B9E;&amp;#x662F; s&amp;#x3002;&amp;#x539F;&amp;#x56E0;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; s &amp;#x662F;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32; &amp;#x201C;abcdssdc&amp;#x201D; &amp;#x7684;&amp;#x7B2C;5&amp;#x4E2A;&amp;#x5B57;&amp;#x7B26;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8F6C;&amp;#x6362;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      char *tmp = &amp;quot;abcdssdc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      printf(&amp;quot;%c\n&amp;quot;, tmp+5);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5E94;&amp;#x8BE5;&amp;#x6E05;&amp;#x695A;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x79CD;&amp;#x5947;&amp;#x602A;&amp;#x7684;&amp;#x5199;&amp;#x6CD5;&amp;#x5176;&amp;#x5B9E;&amp;#x662F;&amp;#x5229;&amp;#x7528;&amp;#x4E86;&amp;#xFF0C;&amp;#x5728;C&amp;#x8BED;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x2019;[]&amp;#x2019; &amp;#x64CD;&amp;#x4F5C;&amp;#x7B26;&amp;#x91CC;&amp;#x5916;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E92;&amp;#x6362;&amp;#x3002;&amp;#x4E00;&amp;#x4E2A;&amp;#x6570;&amp;#x7EC4;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F; &amp;#x201C;a[5]&amp;#x201D;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5199;&amp;#x6210; &amp;#x201C;5[a]&amp;#x201D;&amp;#x3002;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x770B;&amp;#x6765;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E24;&amp;#x79CD;&amp;#x5199;&amp;#x6CD5;&amp;#x6700;&amp;#x540E;&amp;#x90FD;&amp;#x4F1A;&amp;#x7FFB;&amp;#x8BD1;&amp;#x6210; &amp;#x201C;*(a+5)&amp;#x201D;&amp;#x3002;&amp;#x66F4;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F; &amp;#x201C;x[y]&amp;#x201D; &amp;#x4E2D;&amp;#xFF0C;x &amp;#x548C; y &amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x52A0;&amp;#x6CD5;&amp;#x8FD0;&amp;#x7B97;&amp;#xFF0C;&amp;#x4E14;&amp;#x8FD0;&amp;#x7B97;&amp;#x540E;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x53EF;&amp;#x4EE5;&amp;#x6B63;&amp;#x5E38;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x5730;&amp;#x5740;&amp;#x88AB;&amp;#x5F15;&amp;#x7528;&amp;#xFF0C;&amp;#x90A3;&amp;#x8FD9;&amp;#x79CD;&amp;#x5199;&amp;#x6CD5;&amp;#x5C31;&amp;#x662F;&amp;#x5408;&amp;#x6CD5;&amp;#x7684;&amp;#xFF0C;&amp;#x4E14;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x4E0D;&amp;#x4F1A;&amp;#x62A5;&amp;#x4EFB;&amp;#x4F55;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x56DE;&amp;#x8FC7;&amp;#x5934;&amp;#x6765;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x5199;&amp;#x6CD5;&amp;#x5728;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x6709;&amp;#x7528;&amp;#x5417;&amp;#xFF1F;&amp;#x4E2A;&amp;#x4EBA;&amp;#x611F;&amp;#x89C9;&amp;#x6CA1;&amp;#x6709;&amp;#x591A;&amp;#x5927;&amp;#x7684;&amp;#x5B9E;&amp;#x7528;&amp;#x4EF7;&amp;#x503C;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8BF4;&amp;#x4E0D;&amp;#x5B9A;&amp;#x4F1A;&amp;#x5728; Obfuscated C Contest &amp;#x4E2D;&amp;#x6709;&amp;#x7528;&amp;#xFF01;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;先来看一段代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	printf(&amp;quot;%c\n&amp;quot;,5[&amp;quot;abcdssdc&amp;quot;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你觉得这段程序会打印出什么？&lt;br&gt;s，确实是 s。原因很简单，因为 s 是字符串 “abcdssdc” 的第5个字符。我们把这个程序转换一下：&lt;/p&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
  <entry>
    <title>4.8-引用传递的骗局</title>
    <link href="http://blog.miopeco.com/2013/07/31/c-faq.reference/"/>
    <id>http://blog.miopeco.com/2013/07/31/c-faq.reference/</id>
    <published>2013-07-30T16:00:00.000Z</published>
    <updated>2016-05-04T04:11:19.000Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;&amp;#x4EE5;&amp;#x524D;&amp;#x7684; C &amp;#x6559;&amp;#x79D1;&amp;#x4E66;&amp;#x4E0A;&amp;#xFF0C;&amp;#x4E00;&amp;#x76F4;&amp;#x6559;&amp;#x5BFC;&amp;#x6211;&amp;#x4EEC;&amp;#xFF0C;C &amp;#x8BED;&amp;#x8A00;&amp;#x51FD;&amp;#x6570;&amp;#x6709;&amp;#x4E24;&amp;#x79CD;&amp;#x4F20;&amp;#x9012;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF1A;&amp;#x503C;&amp;#x4F20;&amp;#x9012;&amp;#x548C;&amp;#x5F15;&amp;#x7528;&amp;#x4F20;&amp;#x9012;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x4ECA;&amp;#x5929;&amp;#x5728;&amp;#x770B; c-faq &amp;#x7684; 4.11 &amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x624D;&amp;#x4E86;&amp;#x89E3;&amp;#x5230;&amp;#x771F;&amp;#x76F8;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x4E25;&amp;#x683C;&amp;#x610F;&amp;#x4E49;&amp;#x4E0A;&amp;#x6765;&amp;#x8BB2;&amp;#xFF0C;C &amp;#x8BED;&amp;#x8A00;&amp;#x53EA;&amp;#x6709;&amp;#x503C;&amp;#x4F20;&amp;#x9012;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x7F16;&amp;#x8BD1;&amp;#x5668;&amp;#x53EF;&amp;#x4EE5;&amp;#x6A21;&amp;#x62DF;&amp;#x5F15;&amp;#x7528;&amp;#x4F20;&amp;#x9012;&amp;#xFF0C;&amp;#x4F46;&amp;#x672C;&amp;#x8D28;&amp;#x4E0A;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x503C;&amp;#x4F20;&amp;#x9012;&amp;#x3002;&lt;br&gt;&amp;#x4E3E;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void f(int *p);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f(&amp;amp;i);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F88;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x4F20;&amp;#x9012;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4E00;&amp;#x822C;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x79F0;&amp;#x4E3A;&amp;#x5F15;&amp;#x7528;&amp;#x4F20;&amp;#x9012;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6574;&amp;#x6570; i &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x786E;&amp;#x5B9E;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E; int &amp;#x6307;&amp;#x9488;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;f &amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x628A; i &amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x590D;&amp;#x5236;&amp;#x4E00;&amp;#x4EFD;&amp;#x7ED9; p&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x884C;&amp;#x4E3A;&amp;#x5176;&amp;#x5B9E;&amp;#x5C31;&amp;#x662F;&amp;#x4F20;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x80FD;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x660E;&amp;#x663E;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5F15;&amp;#x7528;&amp;#x4E00;&amp;#x4E0B; c-faq &amp;#x4E0A;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void f(int *p)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	static int dummy=5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	p=&amp;amp;dummy;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int *i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f(i);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6307;&amp;#x9488; i&amp;#x5728; f &amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#x540E;&amp;#xFF0C;&amp;#x662F;&amp;#x5426;&amp;#x6539;&amp;#x53D8;&amp;#x4E86;&amp;#xFF1F;&amp;#x7B54;&amp;#x6848;&amp;#x662F;&amp;#x5426;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A; f(i) &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F20;&amp;#x503C;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x590D;&amp;#x5236;&amp;#x4E86;&amp;#x4E00;&amp;#x4EFD; i &amp;#x7684;&amp;#x503C;&amp;#x800C;&amp;#x5DF2;&amp;#xFF0C;&amp;#x5C3D;&amp;#x7BA1;&amp;#x5728; f &amp;#x51FD;&amp;#x6570;&amp;#x5185;&amp;#x90E8;&amp;#x6539;&amp;#x53D8;&amp;#x4E86;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x53EA;&amp;#x662F;&amp;#x6539;&amp;#x53D8;&amp;#x4E86; i &amp;#x7684;&amp;#x590D;&amp;#x5236;&amp;#x7248;&amp;#x3002;&amp;#x8FD9;&amp;#x5176;&amp;#x5B9E;&amp;#x662F; C &amp;#x8BED;&amp;#x8A00;&amp;#x521D;&amp;#x5B66;&amp;#x8005;&amp;#xFF0C;&amp;#x7ECF;&amp;#x5E38;&amp;#x72AF;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#xFF0C;&amp;#x628A;&amp;#x4F20;&amp;#x503C;&amp;#x7406;&amp;#x89E3;&amp;#x4E3A;&amp;#x4F20;&amp;#x5730;&amp;#x5740;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8FD8;&amp;#x662F;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#x4EBA;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4EE3;&amp;#x7801;&amp;#x4E0A;&amp;#xFF0C;&amp;#x72AF;&amp;#x7CCA;&amp;#x6D82;&amp;#x4E86;&amp;#x5462;&amp;#xFF1F;&amp;#x56E0;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x9ED8;&amp;#x8BA4;&amp;#x628A;&amp;#x4F20;&amp;#x6307;&amp;#x9488;&amp;#x76F4;&amp;#x63A5;&amp;#x5F53;&amp;#x4F5C;&amp;#x5F15;&amp;#x7528;&amp;#x4F20;&amp;#x9012;&amp;#x7684;&amp;#x66FF;&amp;#x8EAB;&amp;#x4E86;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4E3A;&amp;#x4E86;&amp;#x4F20;&amp;#x9012;&amp;#x4E00;&amp;#x4E2A;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x5F15;&amp;#x7528;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x7528;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void f(int **p)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	static int dummy=5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	*p=&amp;amp;dummy;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int *i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f(&amp;amp;i);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6307;&amp;#x9488; &lt;em&gt;*p &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;f &amp;#x51FD;&amp;#x6570;&amp;#x662F;&amp;#x4F20;&amp;#x503C;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6307;&amp;#x9488; &lt;/em&gt;p &amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x662F;&amp;#x4F20;&amp;#x5730;&amp;#x5740;&amp;#xFF0C;&amp;#x8DDF;&amp;#x4E0A;&amp;#x9762;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x9053;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5E76;&amp;#x4E14;&amp;#x8FD9;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7528;&amp;#x6765;&amp;#x89E3;&amp;#x91CA;&amp;#xFF1A;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; free &amp;#x6389;&amp;#x4E00;&amp;#x4E2A;&amp;#x6307;&amp;#x9488;&amp;#x6240;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x540E;&amp;#xFF0C;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x503C;&amp;#x6CA1;&amp;#x6709;&amp;#x53D1;&amp;#x751F;&amp;#x6539;&amp;#x53D8;&amp;#xFF1F;&amp;#x5982;&amp;#x679C;&amp;#x6BCF;&amp;#x6B21; free &amp;#x5185;&amp;#x5B58;&amp;#x540E;&amp;#xFF0C;&amp;#x628A;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x91CD;&amp;#x7F6E;&amp;#x4E3A; 0&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x4E0D;&amp;#x662F;&amp;#x66F4;&amp;#x5B89;&amp;#x5168;&amp;#x4E48;&amp;#xFF1F;&lt;br&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48; C &amp;#x4E2D;&amp;#x6807;&amp;#x51C6;&amp;#x51FD;&amp;#x6570; free &amp;#x6CA1;&amp;#x6709;&amp;#x8FD9;&amp;#x6837;&amp;#x6765;&amp;#x8BBE;&amp;#x8BA1;&amp;#xFF1F;&amp;#x7531;&amp;#x4E8E; C &amp;#x8BED;&amp;#x8A00;&amp;#x7684;&amp;#x5929;&amp;#x751F;&amp;#x7684;&amp;#x4F20;&amp;#x503C;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x9700;&amp;#x8981;&amp;#x4FEE;&amp;#x6539;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6307;&amp;#x9488;&amp;#x672C;&amp;#x8EAB;&amp;#x7684;&amp;#x503C;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x610F;&amp;#x5473;&amp;#x7740; free &amp;#x7684;&amp;#x5F62;&amp;#x53C2;&amp;#x5FC5;&amp;#x987B;&amp;#x4E3A;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x624D;&amp;#x884C;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在以前的 C 教科书上，一直教导我们，C 语言函数有两种传递参数的方式：值传递和引用传递。但是，今天在看 c-faq 的 4.11 的时候，才了解到真相。其实严格意义上来讲，C 语言只有值传递，但是编译器可以模拟引用传递，但本质上，还是值传递。&lt;br&gt;举个例子：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void f(int *p);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;f(&amp;amp;i);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="language" scheme="http://blog.miopeco.com/categories/language/"/>
    
      <category term="c" scheme="http://blog.miopeco.com/categories/language/c/"/>
    
    
      <category term="c" scheme="http://blog.miopeco.com/tags/c/"/>
    
      <category term="c-faq" scheme="http://blog.miopeco.com/tags/c-faq/"/>
    
  </entry>
  
</feed>
